# Modern Dotfiles Organization (2025)

This document outlines best practices for organizing dotfiles in **`$HOME/.config`** with a focus on making zellij, zsh, Nix, Neovim and Yazi work seamlessly together.

## 1. Base Directory

- Keep all tool configs under a single `dotfiles/config` directory. The main [README](../README.md) shows the structure:

```
dotfiles/
├── config/              # Configuration files (XDG_CONFIG_HOME)
│   ├── nvim/            # Neovim editor
│   ├── yazi/            # Terminal file manager
│   ├── zellij/          # Terminal multiplexer
│   └── zsh/             # ZSH configuration
```

This mirrors `$XDG_CONFIG_HOME` so the repository can be symlinked or used with `home-manager`.

## 2. Zsh as the Glue

- Use a modular ZSH setup with files for aliases, functions and defaults. The [ZSH README](../config/zsh/README.md) details the structure and key features:

```
~/.config/zsh/
├── aliases.zsh     # Command aliases and shortcuts
├── anterior.zsh    # Project-specific configuration
├── brew.zsh        # Homebrew-related settings
├── defaults.zsh    # Default environment variables
├── functions.zsh   # Custom ZSH functions
└── utils.zsh       # Utility functions for scripts
```

- Export variables like `YAZI_CONFIG_DIR` and `ZELLIJ_CONFIG_DIR` in `defaults.zsh` so other tools pick them up automatically.
- Provide helper functions to launch Yazi or Neovim inside a Zellij session.

## 3. Zellij Integration

- Maintain layouts and keybinds in `config/zellij`. Autogenerated KDL files can be checked in for reproducible environments.
- Start Zellij from `.zshrc` if no session exists so the terminal multiplexer becomes the default workspace.
- Use a `just` task or `nix run` to set up sessions with your preferred layout.

## 4. Neovim and Yazi Synergy

- The Neovim config is organized as shown in its [README](../config/nvim/README.md):

```
~/.config/nvim/
├── init.lua                 # Main entry point
├── lua/
│   ├── config/              # Core configuration
│   └── plugins/             # Plugin configurations
│       ├── fzf-lua.lua      # Fuzzy finding
│       ├── yazi.lua         # File manager integration
```

- Yazi uses Neovim for text and code files. As documented in its [README](../config/yazi/README.md):

```
## File Openers
- Text files: Opens with Neovim
- Code files: Opens with Neovim or VS Code
```

- Enable the Yazi Neovim plugin so `yazi.nvim` can open the current directory in Neovim or return the selected file path.

## 5. Nix Management

- Keep `nix.conf` under `.config/nix` to share settings across machines:

```
experimental-features = nix-command flakes
substituters = https://cache.nixos.org ...
```

- Use flakes and `home-manager` to symlink the configs from `dotfiles/config` into `$HOME/.config` on each host.
- Declare packages such as Zellij, Neovim and Yazi via Nix to ensure consistent versions.

## 6. Utilities and Scripts

- Place helper scripts in `scripts/` or create `just` tasks to bootstrap the environment.
- Version lock plugin managers (for example, the `lazy.lua` file for Neovim) and document update commands in the README.

## 7. Theme Consistency

- Apply the same color scheme (e.g. Tokyo Night) across all tools. Neovim and Yazi both reference it in their READMEs.
- Configure Starship or another prompt to pick up the theme as well.

## 8. Keep It Portable

- Avoid hardcoding absolute paths. Use environment variables like `$DOTFILES` and `$XDG_CONFIG_HOME`.
- Test the configuration on macOS and Linux in a fresh user account or container.

Following these practices keeps the repository tidy and ensures all tools—Zellij, Zsh, Nix, Neovim and Yazi—work in harmony.
