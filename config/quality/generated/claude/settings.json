{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "$comment": "Generated by Quality System. Do not edit manually.",
  "cleanupPeriodDays": 99999,
  "includeCoAuthoredBy": false,
  "alwaysThinkingEnabled": true,
  "verbose": false,
  "permissions": {
    "allow": [
      "Read",
      "Grep(*)",
      "Glob(*)",
      "WebSearch",
      "Bash(ls:*)",
      "Bash(cat:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(find:*)",
      "Bash(fd:*)",
      "Bash(rg:*)",
      "Bash(grep:*)",
      "Bash(wc:*)",
      "Bash(which:*)",
      "Bash(echo:*)",
      "Bash(pwd)",
      "Bash(mkdir:*)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(rm:*)",
      "Bash(touch:*)",
      "Bash(tree:*)",
      "Bash(eza:*)",
      "Bash(bat:*)",
      "Bash(delta:*)",
      "Bash(sort:*)",
      "Bash(uniq:*)",
      "Bash(jq:*)",
      "Bash(curl:*)",
      "Bash(open:*)",
      "Bash(readlink:*)",
      "Bash(xargs:*)",
      "Bash(sh:*)",
      "Bash(git:*)",
      "Bash(GIT_PAGER=cat git:*)",
      "Bash(gh:*)",
      "Bash(pnpm:*)",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(node:*)",
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(uv:*)",
      "Bash(uvx:*)",
      "Bash(ruff:*)",
      "Bash(pytest:*)",
      "Bash(bun:*)",
      "Bash(just:*)",
      "Bash(make:*)",
      "Bash(cargo:*)",
      "Bash(biome:*)",
      "Bash(oxlint:*)",
      "Bash(vitest:*)",
      "Bash(tsc:*)",
      "Bash(playwright:*)",
      "Bash(docker:*)",
      "Bash(docker-compose:*)",
      "Bash(pulumi:*)",
      "Bash(esc:*)",
      "Bash(wrangler:*)",
      "Bash(kubectl:*)",
      "Bash(terraform:*)",
      "Bash(nix:*)",
      "Bash(nix-shell:*)",
      "Bash(darwin-rebuild:*)",
      "Bash(home-manager:*)",
      "Bash(sudo darwin-rebuild:*)",
      "Bash(alejandra:*)",
      "Bash(nixfmt:*)",
      "Bash(shfmt:*)",
      "Bash(stylua:*)",
      "Bash(ps:*)",
      "Bash(pgrep:*)",
      "Bash(killall:*)",
      "Bash(launchctl:*)",
      "Bash(sudo launchctl:*)",
      "Bash(defaults read:*)",
      "Bash(osascript:*)",
      "Bash(sw_vers:*)",
      "Bash(mdfind:*)",
      "Bash(infocmp:*)",
      "Bash(sqlite3:*)",
      "Bash(tree-sitter:*)",
      "Bash(tldr:*)",
      "Bash(fc-list:*)",
      "Bash(nvim:*)",
      "Bash(ghostty:*)",
      "Bash(zellij:*)",
      "Bash(claude:*)",
      "Write(*)",
      "Edit(*)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebFetch(domain:gist.github.com)",
      "WebFetch(domain:gist.githubusercontent.com)",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:effect.website)",
      "WebFetch(domain:ghostty.org)",
      "WebFetch(domain:zellij.dev)",
      "WebFetch(domain:www.lazyvim.org)",
      "WebFetch(domain:macos-defaults.com)",
      "WebFetch(domain:apps.apple.com)",
      "mcp__context7__resolve-library-id",
      "mcp__context7__get-library-docs"
    ],
    "deny": [
      "Read(**/.env*)",
      "Read(**/secrets*)",
      "Read(**/*.pem)",
      "Read(**/*.key)",
      "Read(**/.ssh/*)",
      "Read(**/.gnupg/*)",
      "Read(**/.netrc)",
      "Write(**/.env*)",
      "Write(**/.git/*)",
      "Edit(**/.git/*)",
      "Bash(rm -rf /)",
      "Bash(rm -rf ~)",
      "Bash(sudo rm -rf:*)",
      "Bash(chmod 777:*)",
      "Bash(git push --force:*)",
      "Bash(git reset --hard:*)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write|Edit|Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bun \"$HOME/dotfiles/config/quality/src/hooks/pre-tool-use.ts\"",
            "timeout": 5
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "bun \"$HOME/dotfiles/config/quality/src/hooks/unified-polish.ts\"",
            "timeout": 60
          }
        ]
      },
      {
        "matcher": "Write(**/package.json)|Edit(**/package.json)",
        "hooks": [
          {
            "type": "command",
            "command": "bun \"$HOME/dotfiles/config/quality/src/hooks/enforce-versions.ts\"",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "Bash(darwin-rebuild switch:*)|Bash(sudo darwin-rebuild switch:*)",
        "hooks": [
          {
            "type": "command",
            "command": "bun \"$HOME/dotfiles/config/quality/src/hooks/post-switch-gc.ts\"",
            "timeout": 120
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bun \"$HOME/dotfiles/config/quality/src/hooks/session-init.ts\"",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bun \"$HOME/dotfiles/config/quality/src/hooks/session-stop.ts\"",
            "timeout": 45
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bun \"$HOME/dotfiles/config/quality/src/hooks/prompt-validator.ts\"",
            "timeout": 3
          }
        ]
      }
    ]
  },
  "agents": [
    {
      "name": "code-reviewer",
      "description": "Reviews code for type safety, naming, errors, security, and performance. Use for any code changes.",
      "model": "sonnet"
    },
    {
      "name": "critic",
      "description": "Adversarial code reviewer that challenges assumptions and finds edge cases. Use after code generation for rigorous review.",
      "model": "sonnet"
    },
    {
      "name": "debugger",
      "description": "Effect stack traces, Fiber debugging, error analysis",
      "model": "opus"
    },
    {
      "name": "doc-writer",
      "description": "Generates technical documentation including READMEs, API docs, and inline comments.",
      "model": "sonnet"
    },
    {
      "name": "effect-architect",
      "description": "System design, Layer composition, Effect patterns",
      "model": "opus"
    },
    {
      "name": "effect-ts-expert",
      "description": "Effect-TS patterns expert. Use PROACTIVELY for Effect compositions, Layers, typed errors, resource management.",
      "model": "sonnet"
    },
    {
      "name": "nix-darwin-expert",
      "description": "Nix darwin/home-manager expert. Use for system configuration, module authoring, flake updates.",
      "model": "sonnet"
    },
    {
      "name": "refactorer",
      "description": "Performs behavior-preserving code improvements. Use for cleanup and optimization.",
      "model": "sonnet"
    },
    {
      "name": "reliability-engineer",
      "description": "Retry, timeout, circuit breaker patterns with Effect",
      "model": "sonnet"
    },
    {
      "name": "security-auditor",
      "description": "Authentication, authorization, input validation, secrets",
      "model": "opus"
    },
    {
      "name": "synthesizer",
      "description": "Resolves conflicts between agents, synthesizes multi-agent feedback into actionable changes. Use after collecting feedback from multiple agents.",
      "model": "opus"
    },
    {
      "name": "test-architect",
      "description": "TDD patterns with Effect Layer substitution",
      "model": "sonnet"
    },
    {
      "name": "test-writer",
      "description": "Generates comprehensive test suites using TDD principles. Invoke for new features or untested code.",
      "model": "sonnet"
    },
    {
      "name": "type-guardian",
      "description": "Branded types, Effect Schema, type-first development",
      "model": "sonnet"
    }
  ],
  "enabledPlugins": {
    "code-review@claude-code-plugins": true,
    "commit-commands@claude-code-plugins": true,
    "explanatory-output-style@claude-code-plugins": true,
    "feature-dev@claude-code-plugins": true,
    "frontend-design@claude-code-plugins": true,
    "learning-output-style@claude-code-plugins": true,
    "pr-review-toolkit@claude-code-plugins": true,
    "ralph-wiggum@claude-code-plugins": true
  },
  "statusLine": {
    "type": "command",
    "command": "input=$(cat); cwd=$(echo \"$input\" | jq -r '.workspace.current_dir'); cd \"$cwd\" 2>/dev/null; dir=$(echo \"$cwd\" | awk -F/ '{n=NF; if(n<=5) print $0; else {printf \"…/\"; for(i=n-4;i<=n;i++){printf \"%s\", $i; if(i<n) printf \"/\"}}}'); git_info=\"\"; if git rev-parse --git-dir >/dev/null 2>&1; then branch=$(git branch --show-current 2>/dev/null || echo \"detached\"); status=\"\"; git diff-index --quiet HEAD -- 2>/dev/null || status=\"*\"; upstream=$(git rev-parse --abbrev-ref @{upstream} 2>/dev/null); if [ -n \"$upstream\" ]; then ahead_behind=$(git rev-list --left-right --count HEAD...@{upstream} 2>/dev/null); ahead=$(echo \"$ahead_behind\" | cut -f1); behind=$(echo \"$ahead_behind\" | cut -f2); [ \"$ahead\" -gt 0 ] && status=\"$status↑$ahead\"; [ \"$behind\" -gt 0 ] && status=\"$status↓$behind\"; fi; git_info=\" $branch$status\"; fi; model=$(echo \"$input\" | jq -r '.model.display_name' | sed 's/Claude //' | sed 's/ Sonnet/S/' | sed 's/ Opus/O/' | sed 's/ Haiku/H/'); context=\"\"; usage=$(echo \"$input\" | jq '.context_window.current_usage'); if [ \"$usage\" != \"null\" ]; then current=$(echo \"$usage\" | jq '.input_tokens + .cache_creation_input_tokens + .cache_read_input_tokens'); size=$(echo \"$input\" | jq '.context_window.context_window_size'); pct=$((current * 100 / size)); [ \"$pct\" -gt 10 ] && context=\" ${pct}%\"; fi; time=$(date +%R); printf \"\\033[38;2;163;174;210m░▒▓\\033[0m\\033[48;2;163;174;210m\\033[38;2;9;12;12m  \\033[0m\\033[38;2;118;159;240m %s\\033[0m\" \"$dir\"; [ -n \"$git_info\" ] && printf \"\\033[38;2;118;159;240m %s\\033[0m\" \"$git_info\"; printf \" \\033[38;2;160;169;203m%s%s  %s\\033[0m\" \"$model\" \"$context\" \"$time\""
  }
}