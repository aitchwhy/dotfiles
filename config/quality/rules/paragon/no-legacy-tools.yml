# Guard 27: Block legacy Unix tools in shell scripts
# Use modern Rust alternatives: rg (ripgrep), fd, eza, dust
#
# Migration guide:
#   grep → rg (ripgrep)
#   find → fd
#   ls → eza
#   du → dust
#
# Note: This rule detects patterns in TypeScript/shell strings.
# For shell scripts, enforcement is via git-hooks and CI.
#
# @see config/agents/skills/paragon/SKILL.md

id: no-legacy-tools
language: typescript
severity: warning
rule:
  any:
    # Match string literals containing legacy tool commands
    - kind: string
      regex: '\bgrep\s+-'
    - kind: template_string
      regex: '\bgrep\s+-'
    - kind: string
      regex: '\bfind\s+\.'
    - kind: template_string
      regex: '\bfind\s+\.'
    - kind: string
      regex: '\bls\s+-[la]'
    - kind: template_string
      regex: '\bls\s+-[la]'
    - kind: string
      regex: '\bdu\s+-'
    - kind: template_string
      regex: '\bdu\s+-'
message: |
  LEGACY TOOL detected in string.

  Use modern Rust CLI tools instead:

    grep → rg (ripgrep)
      # OLD: grep -E 'pattern' file
      # NEW: rg 'pattern' file

    find → fd
      # OLD: find . -name "*.ts" -type f
      # NEW: fd -e ts

    ls → eza
      # OLD: ls -la
      # NEW: eza -la --git --icons

    du → dust
      # OLD: du -sh *
      # NEW: dust

  See: config/agents/rules/stack.md
note: "PARAGON Guard 27: Modern CLI tools"
