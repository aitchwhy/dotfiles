id: no-zod-infer
language: typescript
severity: error
rule:
  any:
    - pattern: "z.infer<$TYPE>"
    - pattern: "z.input<$TYPE>"
    - pattern: "z.output<$TYPE>"
message: |
  ZOD INFER VIOLATION detected.

  TypeScript type MUST be source of truth. Never derive types from schemas.

    // BAD
    const schema = z.object({ name: z.string() });
    type User = z.infer<typeof schema>;

    // GOOD - Type first, schema satisfies
    type User = { readonly name: string };
    const schema = z.object({ name: z.string() }) satisfies z.ZodType<User>;

  See zod-patterns skill for TypeScript-first Zod patterns.
note: "See: config/agents/skills/zod-patterns/SKILL.md"
