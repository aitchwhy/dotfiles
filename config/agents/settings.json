{
  "$comment": "Global Claude Code settings for ALL projects. See settings/claude-code.json for dotfiles-specific enforcement hooks.",
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@upstash/context7-mcp@1.0.8"]
    },
    "sequential-thinking": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sequential-thinking@0.6.2"]
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory@0.6.2"]
    },
    "aws-knowledge": {
      "type": "http",
      "url": "https://knowledge-mcp.global.api.aws"
    }
  },
  "cleanupPeriodDays": 90,
  "includeCoAuthoredBy": false,
  "permissions": {
    "allow": [
      "Read",
      "Grep(*)",
      "Glob(*)",
      "Bash(ls:*)",
      "Bash(cat:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(find:*)",
      "Bash(fd:*)",
      "Bash(rg:*)",
      "Bash(wc:*)",
      "Bash(which:*)",
      "Bash(echo:*)",
      "Bash(pwd)",
      "Bash(cd:*)",
      "Bash(mkdir:*)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(rm:*)",
      "Bash(touch:*)",
      "Bash(tree:*)",
      "Bash(eza:*)",
      "Bash(bat:*)",
      "Bash(delta:*)",
      "Bash(dust:*)",
      "Bash(duf:*)",
      "Bash(sort:*)",
      "Bash(uniq:*)",
      "Bash(jq:*)",
      "Bash(curl:*)",
      "Bash(bun:*)",
      "Bash(bunx:*)",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(node:*)",
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(uv:*)",
      "Bash(uvx:*)",
      "Bash(ruff:*)",
      "Bash(pytest:*)",
      "Bash(make:*)",
      "Bash(just:*)",
      "Bash(cargo:*)",
      "Bash(git:*)",
      "Bash(gh:*)",
      "Bash(biome:*)",
      "Bash(oxlint:*)",
      "Bash(vitest:*)",
      "Bash(tsc:*)",
      "Bash(playwright:*)",
      "Bash(wrangler:*)",
      "Bash(docker:*)",
      "Bash(docker-compose:*)",
      "Bash(kubectl:*)",
      "Bash(terraform:*)",
      "Bash(nix:*)",
      "Bash(nix-shell:*)",
      "Bash(darwin-rebuild:*)",
      "Bash(home-manager:*)",
      "Bash(sudo darwin-rebuild:*)",
      "Bash(alejandra:*)",
      "Bash(nixfmt:*)",
      "Bash(shfmt:*)",
      "Bash(stylua:*)",
      "Write(*.ts)",
      "Write(*.tsx)",
      "Write(*.js)",
      "Write(*.jsx)",
      "Write(*.json)",
      "Write(*.md)",
      "Write(*.py)",
      "Write(*.nix)",
      "Write(*.toml)",
      "Write(*.yaml)",
      "Write(*.yml)",
      "Write(*.sh)",
      "Write(*.bash)",
      "Write(*.sql)",
      "Write(*.css)",
      "Write(*.scss)",
      "Write(*.html)",
      "Write(*.lua)",
      "Write(*.kdl)",
      "Edit(*.ts)",
      "Edit(*.tsx)",
      "Edit(*.js)",
      "Edit(*.jsx)",
      "Edit(*.json)",
      "Edit(*.md)",
      "Edit(*.py)",
      "Edit(*.nix)",
      "Edit(*.toml)",
      "Edit(*.yaml)",
      "Edit(*.yml)",
      "Edit(*.sh)",
      "Edit(*.bash)",
      "Edit(*.sql)",
      "Edit(*.css)",
      "Edit(*.scss)",
      "Edit(*.html)",
      "Edit(*.lua)",
      "Edit(*.kdl)"
    ],
    "deny": [
      "Read(*/.env)",
      "Read(*/.env.*)",
      "Read(*/.dev.vars)",
      "Read(*/secrets*)",
      "Read(*/*.pem)",
      "Read(*/*.key)",
      "Read(*/.ssh/*)",
      "Read(*/.gnupg/*)",
      "Read(*/.netrc)",
      "Write(*/.env)",
      "Write(*/.env.*)",
      "Write(*/.dev.vars)",
      "Bash(rm -rf /)",
      "Bash(rm -rf ~)",
      "Bash(sudo:*)",
      "Bash(chmod 777:*)",
      "Bash(git push --force:*)",
      "Bash(git reset --hard:*)",
      "Write(*/.git/*)",
      "Edit(*/.git/*)"
    ]
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/unified-polish.ts\"",
            "timeout": 60
          }
        ]
      },
      {
        "matcher": "Write(**/package.json)|Edit(**/package.json)",
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/enforce-versions.ts\"",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "Bash(darwin-rebuild switch:*)|Bash(sudo darwin-rebuild switch:*)",
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$HOME/dotfiles/config/agents/hooks/post-switch-gc.sh\"",
            "timeout": 120
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit|Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/paragon-guard.ts\"",
            "timeout": 20
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Session: $(pwd)\" >> ~/.claude/session.log"
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$HOME/dotfiles/config/agents/hooks/plans-cleanup.sh\"",
            "timeout": 5
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$HOME/dotfiles/config/agents/hooks/session-start.sh\"",
            "timeout": 5
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Session ended | Dir: $(basename \"$PWD\") | Files: $(git diff --name-only HEAD~5 2>/dev/null | wc -l | tr -d ' ') modified | Commits: $(git log --oneline --since='1 hour ago' 2>/dev/null | wc -l | tr -d ' ')\" >> ~/.claude/session.log",
            "timeout": 10
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$HOME/dotfiles/config/agents/hooks/session-stop.sh\"",
            "timeout": 30
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/verification-gate.ts\"",
            "timeout": 15
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "input=$(cat); dir=$(echo \"$input\" | jq -r '.workspace.current_dir'); branch=$(cd \"$dir\" && git branch --show-current 2>/dev/null); dirty=$(cd \"$dir\" && git status --porcelain 2>/dev/null | wc -l | tr -d ' '); printf \"%s%s%s\" \"$(basename \"$dir\")\" \"${branch:+ âŽ‡ $branch}\" \"${dirty:+0 [$dirty]}\""
  },
  "enabledPlugins": {
    "code-review@claude-code-plugins": true,
    "commit-commands@claude-code-plugins": true,
    "explanatory-output-style@claude-code-plugins": true,
    "feature-dev@claude-code-plugins": true,
    "frontend-design@claude-code-plugins": true,
    "hookify@claude-code-plugins": false,
    "learning-output-style@claude-code-plugins": true,
    "pr-review-toolkit@claude-code-plugins": true,
    "ralph-wiggum@claude-code-plugins": true
  },
  "alwaysThinkingEnabled": true,
  "verbose": true
}
