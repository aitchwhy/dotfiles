{
  "$comment": "Dotfiles-specific Claude Code settings. Uses Signet MCP tools for stack enforcement. Hooks handle formatting and session tracking.",
  "cleanupPeriodDays": 90,
  "includeCoAuthoredBy": false,
  "permissions": {
    "allow": [
      "WebSearch",
      "Bash(git:*)",
      "Bash(GIT_PAGER=cat git:*)",
      "Bash(gh:*)",
      "Bash(nix:*)",
      "Bash(nixfmt:*)",
      "Bash(nixd:*)",
      "Bash(just:*)",
      "Bash(brew:*)",
      "Bash(mas:*)",
      "Bash(ls:*)",
      "Bash(tree:*)",
      "Bash(find:*)",
      "Bash(grep:*)",
      "Bash(cat:*)",
      "Bash(bat:*)",
      "Bash(mkdir:*)",
      "Bash(open:*)",
      "Bash(readlink:*)",
      "Bash(xargs:*)",
      "Bash(curl:*)",
      "Bash(sh:*)",
      "Bash(pgrep:*)",
      "Bash(killall:*)",
      "Bash(launchctl:*)",
      "Bash(sudo launchctl:*)",
      "Bash(defaults read:*)",
      "Bash(osascript:*)",
      "Bash(sw_vers:*)",
      "Bash(kextstat:*)",
      "Bash(systemextensionsctl:*)",
      "Bash(mdfind:*)",
      "Bash(infocmp:*)",
      "Bash(python3:*)",
      "Bash(bun:*)",
      "Bash(nvim:*)",
      "Bash(ghostty:*)",
      "Bash(zellij:*)",
      "Bash(sqlite3:*)",
      "Bash(tree-sitter:*)",
      "Bash(tldr:*)",
      "Bash(fc-list:*)",
      "Bash(claude:*)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebFetch(domain:gist.github.com)",
      "WebFetch(domain:gist.githubusercontent.com)",
      "WebFetch(domain:ghostty.org)",
      "WebFetch(domain:zellij.dev)",
      "WebFetch(domain:www.lazyvim.org)",
      "WebFetch(domain:macos-defaults.com)",
      "WebFetch(domain:apps.apple.com)",
      "mcp__context7__resolve-library-id",
      "mcp__context7__get-library-docs"
    ],
    "deny": [
      "Read(**/.env*)",
      "Read(**/secrets*)",
      "Read(**/*.pem)",
      "Read(**/*.key)",
      "Read(**/.ssh/*)",
      "Read(**/.gnupg/*)",
      "Write(**/.git/*)",
      "Bash(rm -rf /)",
      "Bash(rm -rf ~)",
      "Bash(git push --force)",
      "Bash(git reset --hard)"
    ]
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/unified-polish.ts\"",
            "timeout": 60
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit|Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/unified-guard.ts\"",
            "timeout": 20
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Session: $(pwd)\" >> ~/.claude/session.log"
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$HOME/dotfiles/config/agents/hooks/plans-cleanup.sh\"",
            "timeout": 5
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$HOME/dotfiles/config/agents/hooks/session-start.sh\"",
            "timeout": 5
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Session ended | Dir: $(basename \"$PWD\") | Files: $(git diff --name-only HEAD~5 2>/dev/null | wc -l | tr -d ' ') modified | Commits: $(git log --oneline --since='1 hour ago' 2>/dev/null | wc -l | tr -d ' ')\" >> ~/.claude/session.log",
            "timeout": 10
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$HOME/dotfiles/config/agents/hooks/session-stop.sh\"",
            "timeout": 30
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/session-polish.ts\"",
            "timeout": 120
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bun run \"$HOME/dotfiles/config/agents/hooks/verification-gate.ts\"",
            "timeout": 15
          }
        ]
      }
    ]
  },
  "enabledPlugins": []
}
