"use strict";var sf=Object.create;var Ze=Object.defineProperty;var af=Object.getOwnPropertyDescriptor;var cf=Object.getOwnPropertyNames;var lf=Object.getPrototypeOf,ff=Object.prototype.hasOwnProperty;var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),uf=(e,t)=>{for(var r in t)Ze(e,r,{get:t[r],enumerable:!0})},ao=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cf(t))!ff.call(e,o)&&o!==r&&Ze(e,o,{get:()=>t[o],enumerable:!(n=af(t,o))||n.enumerable});return e};var O=(e,t,r)=>(r=e!=null?sf(lf(e)):{},ao(t||!e||!e.__esModule?Ze(r,"default",{value:e,enumerable:!0}):r,e)),df=e=>ao(Ze({},"__esModule",{value:!0}),e);var qo=R((XS,Yo)=>{Yo.exports=Vo;Vo.sync=iu;var zo=require("fs");function ou(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Wo(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:ou(t,r)}function Vo(e,t,r){zo.stat(e,function(n,o){r(n,n?!1:Wo(o,e,t))})}function iu(e,t){return Wo(zo.statSync(e),e,t)}});var Jo=R((ZS,Zo)=>{Zo.exports=Ko;Ko.sync=su;var Ho=require("fs");function Ko(e,t,r){Ho.stat(e,function(n,o){r(n,n?!1:Xo(o,t))})}function su(e,t){return Xo(Ho.statSync(e),t)}function Xo(e,t){return e.isFile()&&au(e,t)}function au(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),f=parseInt("001",8),l=a|c,u=r&f||r&c&&o===s||r&a&&n===i||r&l&&i===0;return u}});var ei=R((QS,Qo)=>{var JS=require("fs"),ut;process.platform==="win32"||global.TESTING_WINDOWS?ut=qo():ut=Jo();Qo.exports=Ar;Ar.sync=cu;function Ar(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){Ar(e,t||{},function(i,s){i?o(i):n(s)})})}ut(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function cu(e,t){try{return ut.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var ai=R((ey,si)=>{var me=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ti=require("path"),lu=me?";":":",ri=ei(),ni=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),oi=(e,t)=>{let r=t.colon||lu,n=e.match(/\//)||me&&e.match(/\\/)?[""]:[...me?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=me?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=me?o.split(r):[""];return me&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},ii=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=oi(e,t),s=[],a=f=>new Promise((l,u)=>{if(f===n.length)return t.all&&s.length?l(s):u(ni(e));let d=n[f],p=/^".*"$/.test(d)?d.slice(1,-1):d,m=ti.join(p,e),S=!p&&/^\.[\\\/]/.test(e)?e.slice(0,2)+m:m;l(c(S,f,0))}),c=(f,l,u)=>new Promise((d,p)=>{if(u===o.length)return d(a(l+1));let m=o[u];ri(f+m,{pathExt:i},(S,E)=>{if(!S&&E)if(t.all)s.push(f+m);else return d(f+m);return d(c(f,l,u+1))})});return r?a(0).then(f=>r(null,f),r):a(0)},fu=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=oi(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,f=ti.join(c,e),l=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;for(let u=0;u<n.length;u++){let d=l+n[u];try{if(ri.sync(d,{pathExt:o}))if(t.all)i.push(d);else return d}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw ni(e)};si.exports=ii;ii.sync=fu});var li=R((ty,Or)=>{"use strict";var ci=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};Or.exports=ci;Or.exports.default=ci});var pi=R((ry,di)=>{"use strict";var fi=require("path"),uu=ai(),du=li();function ui(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=uu.sync(e.command,{path:r[du({env:r})],pathExt:t?fi.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return s&&(s=fi.resolve(o?e.options.cwd:"",s)),s}function pu(e){return ui(e)||ui(e,!0)}di.exports=pu});var mi=R((ny,Rr)=>{"use strict";var Ir=/([()\][%!^"`<>&|;, *?])/g;function mu(e){return e=e.replace(Ir,"^$1"),e}function hu(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Ir,"^$1"),t&&(e=e.replace(Ir,"^$1")),e}Rr.exports.command=mu;Rr.exports.argument=hu});var gi=R((oy,hi)=>{"use strict";hi.exports=/^#!(.*)/});var yi=R((iy,Si)=>{"use strict";var gu=gi();Si.exports=(e="")=>{let t=e.match(gu);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var wi=R((sy,bi)=>{"use strict";var Dr=require("fs"),Su=yi();function yu(e){let r=Buffer.alloc(150),n;try{n=Dr.openSync(e,"r"),Dr.readSync(n,r,0,150,0),Dr.closeSync(n)}catch{}return Su(r.toString())}bi.exports=yu});var Ai=R((ay,Ti)=>{"use strict";var bu=require("path"),xi=pi(),Ei=mi(),wu=wi(),xu=process.platform==="win32",Eu=/\.(?:com|exe)$/i,Tu=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Au(e){e.file=xi(e);let t=e.file&&wu(e.file);return t?(e.args.unshift(e.file),e.command=t,xi(e)):e.file}function Ou(e){if(!xu)return e;let t=Au(e),r=!Eu.test(t);if(e.options.forceShell||r){let n=Tu.test(t);e.command=bu.normalize(e.command),e.command=Ei.command(e.command),e.args=e.args.map(i=>Ei.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function Iu(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:Ou(n)}Ti.exports=Iu});var Ri=R((cy,Ii)=>{"use strict";var Cr=process.platform==="win32";function Mr(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Ru(e,t){if(!Cr)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=Oi(o,t,"spawn");if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function Oi(e,t){return Cr&&e===1&&!t.file?Mr(t.original,"spawn"):null}function Du(e,t){return Cr&&e===1&&!t.file?Mr(t.original,"spawnSync"):null}Ii.exports={hookChildProcess:Ru,verifyENOENT:Oi,verifyENOENTSync:Du,notFoundError:Mr}});var Mi=R((ly,he)=>{"use strict";var Di=require("child_process"),Pr=Ai(),Fr=Ri();function Ci(e,t,r){let n=Pr(e,t,r),o=Di.spawn(n.command,n.args,n.options);return Fr.hookChildProcess(o,n),o}function Cu(e,t,r){let n=Pr(e,t,r),o=Di.spawnSync(n.command,n.args,n.options);return o.error=o.error||Fr.verifyENOENTSync(o.status,n),o}he.exports=Ci;he.exports.spawn=Ci;he.exports.sync=Cu;he.exports._parse=Pr;he.exports._enoent=Fr});var Tg={};uf(Tg,{default:()=>of});module.exports=df(Tg);var dr=require("react");var g=require("@raycast/api"),Jl=O(require("fs")),Ql=require("os");var F=require("@raycast/api");function x(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}var co=require("node:url"),ue=(e,t)=>{let r=mr(e);if(typeof r!="string")throw new TypeError(`${t} must be a string or a file URL: ${r}.`);return r},mr=e=>e instanceof URL?(0,co.fileURLToPath)(e):e;var Je=(e,t=[],r={})=>{let n=ue(e,"First argument"),[o,i]=x(t)?[[],t]:[t,r];if(!Array.isArray(o))throw new TypeError(`Second argument must be either an array of arguments or an options object: ${o}`);if(o.some(c=>typeof c=="object"&&c!==null))throw new TypeError(`Second argument must be an array of strings: ${o}`);let s=o.map(String),a=s.find(c=>c.includes("\0"));if(a!==void 0)throw new TypeError(`Arguments cannot contain null bytes ("\\0"): ${a}`);if(!x(i))throw new TypeError(`Last argument must be an options object: ${i}`);return[n,s,i]};var yo=require("node:child_process");var lo=require("node:string_decoder"),{toString:fo}=Object.prototype,uo=e=>fo.call(e)==="[object ArrayBuffer]",T=e=>fo.call(e)==="[object Uint8Array]",W=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),pf=new TextEncoder,po=e=>pf.encode(e),mf=new TextDecoder,Qe=e=>mf.decode(e),mo=(e,t)=>hf(e,t).join(""),hf=(e,t)=>{if(t==="utf8"&&e.every(i=>typeof i=="string"))return e;let r=new lo.StringDecoder(t),n=e.map(i=>typeof i=="string"?po(i):i).map(i=>r.write(i)),o=r.end();return o===""?n:[...n,o]},Fe=e=>e.length===1&&T(e[0])?e[0]:hr(gf(e)),gf=e=>e.map(t=>typeof t=="string"?po(t):t),hr=e=>{let t=new Uint8Array(Sf(e)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t},Sf=e=>{let t=0;for(let r of e)t+=r.length;return t};var bo=e=>Array.isArray(e)&&Array.isArray(e.raw),wo=(e,t)=>{let r=[];for(let[i,s]of e.entries())r=yf({templates:e,expressions:t,tokens:r,index:i,template:s});if(r.length===0)throw new TypeError("Template script must not be empty");let[n,...o]=r;return[n,o,{}]},yf=({templates:e,expressions:t,tokens:r,index:n,template:o})=>{if(o===void 0)throw new TypeError(`Invalid backslash sequence: ${e.raw[n]}`);let{nextTokens:i,leadingWhitespaces:s,trailingWhitespaces:a}=bf(o,e.raw[n]),c=go(r,i,s);if(n===t.length)return c;let f=t[n],l=Array.isArray(f)?f.map(u=>So(u)):[So(f)];return go(c,l,a)},bf=(e,t)=>{if(t.length===0)return{nextTokens:[],leadingWhitespaces:!1,trailingWhitespaces:!1};let r=[],n=0,o=ho.has(t[0]);for(let s=0,a=0;s<e.length;s+=1,a+=1){let c=t[a];if(ho.has(c))n!==s&&r.push(e.slice(n,s)),n=s+1;else if(c==="\\"){let f=t[a+1];f==="u"&&t[a+2]==="{"?a=t.indexOf("}",a+3):a+=wf[f]??1}}let i=n===e.length;return i||r.push(e.slice(n)),{nextTokens:r,leadingWhitespaces:o,trailingWhitespaces:i}},ho=new Set([" ","	","\r",`
`]),wf={x:3,u:5},go=(e,t,r)=>r||e.length===0||t.length===0?[...e,...t]:[...e.slice(0,-1),`${e.at(-1)}${t[0]}`,...t.slice(1)],So=e=>{let t=typeof e;if(t==="string")return e;if(t==="number")return String(e);if(x(e)&&("stdout"in e||"isMaxBuffer"in e))return xf(e);throw e instanceof yo.ChildProcess||Object.prototype.toString.call(e)==="[object Promise]"?new TypeError("Unexpected subprocess in template expression. Please use ${await subprocess} instead of ${subprocess}."):new TypeError(`Unexpected "${t}" in template expression`)},xf=({stdout:e})=>{if(typeof e=="string")return e;if(T(e))return Qe(e);throw e===void 0?new TypeError(`Missing result.stdout in template expression. This is probably due to the previous subprocess' "stdout" option.`):new TypeError(`Unexpected "${typeof e}" stdout in template expression`)};var Pc=require("node:child_process");var Eo=require("node:util");var et=O(require("node:process"),1),B=e=>tt.includes(e),tt=[et.default.stdin,et.default.stdout,et.default.stderr],M=["stdin","stdout","stderr"],rt=e=>M[e]??`stdio[${e}]`;var To=e=>{let t={...e};for(let r of yr)t[r]=gr(e,r);return t},gr=(e,t)=>{let r=Array.from({length:Ef(e)+1}),n=Tf(e[t],r,t);return Df(n,t)},Ef=({stdio:e})=>Array.isArray(e)?Math.max(e.length,M.length):M.length,Tf=(e,t,r)=>x(e)?Af(e,t,r):t.fill(e),Af=(e,t,r)=>{for(let n of Object.keys(e).sort(Of))for(let o of If(n,r,t))t[o]=e[n];return t},Of=(e,t)=>xo(e)<xo(t)?1:-1,xo=e=>e==="stdout"||e==="stderr"?0:e==="all"?2:1,If=(e,t,r)=>{if(e==="ipc")return[r.length-1];let n=Sr(e);if(n===void 0||n===0)throw new TypeError(`"${t}.${e}" is invalid.
It must be "${t}.stdout", "${t}.stderr", "${t}.all", "${t}.ipc", or "${t}.fd3", "${t}.fd4" (and so on).`);if(n>=r.length)throw new TypeError(`"${t}.${e}" is invalid: that file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);return n==="all"?[1,2]:[n]},Sr=e=>{if(e==="all")return e;if(M.includes(e))return M.indexOf(e);let t=Rf.exec(e);if(t!==null)return Number(t[1])},Rf=/^fd(\d+)$/,Df=(e,t)=>e.map(r=>r===void 0?Mf[t]:r),Cf=(0,Eo.debuglog)("execa").enabled?"full":"none",Mf={lines:!1,buffer:!0,maxBuffer:1e3*1e3*100,verbose:Cf,stripFinalNewline:!0},yr=["lines","buffer","maxBuffer","verbose","stripFinalNewline"],V=(e,t)=>t==="ipc"?e.at(-1):e[t];var de=({verbose:e},t)=>br(e,t)!=="none",pe=({verbose:e},t)=>!["none","short"].includes(br(e,t)),Ao=({verbose:e},t)=>{let r=br(e,t);return nt(r)?r:void 0},br=(e,t)=>t===void 0?Pf(e):V(e,t),Pf=e=>e.find(t=>nt(t))??ot.findLast(t=>e.includes(t)),nt=e=>typeof e=="function",ot=["none","short","full"];var _o=require("node:fs"),jo=require("node:util");var Oo=require("node:process"),Io=require("node:util"),Ro=(e,t)=>{let r=[e,...t],n=r.join(" "),o=r.map(i=>Uf(Do(i))).join(" ");return{command:n,escapedCommand:o}},Be=e=>(0,Io.stripVTControlCharacters)(e).split(`
`).map(t=>Do(t)).join(`
`),Do=e=>e.replaceAll(Lf,t=>Ff(t)),Ff=e=>{let t=vf[e];if(t!==void 0)return t;let r=e.codePointAt(0),n=r.toString(16);return r<=$f?`\\u${n.padStart(4,"0")}`:`\\U${n}`},Bf=()=>{try{return new RegExp("\\p{Separator}|\\p{Other}","gu")}catch{return/[\s\u0000-\u001F\u007F-\u009F\u00AD]/g}},Lf=Bf(),vf={" ":" ","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},$f=65535,Uf=e=>Nf.test(e)?e:Oo.platform==="win32"?`"${e.replaceAll('"','""')}"`:`'${e.replaceAll("'","'\\''")}'`,Nf=/^[\w./-]+$/;var wr=O(require("node:process"),1);function xr(){let{env:e}=wr.default,{TERM:t,TERM_PROGRAM:r}=e;return wr.default.platform!=="win32"?t!=="linux":!!e.WT_SESSION||!!e.TERMINUS_SUBLIME||e.ConEmuTask==="{cmd::Cmder}"||r==="Terminus-Sublime"||r==="vscode"||t==="xterm-256color"||t==="alacritty"||t==="rxvt-unicode"||t==="rxvt-unicode-256color"||e.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var Co={circleQuestionMark:"(?)",questionMarkPrefix:"(?)",square:"\u2588",squareDarkShade:"\u2593",squareMediumShade:"\u2592",squareLightShade:"\u2591",squareTop:"\u2580",squareBottom:"\u2584",squareLeft:"\u258C",squareRight:"\u2590",squareCenter:"\u25A0",bullet:"\u25CF",dot:"\u2024",ellipsis:"\u2026",pointerSmall:"\u203A",triangleUp:"\u25B2",triangleUpSmall:"\u25B4",triangleDown:"\u25BC",triangleDownSmall:"\u25BE",triangleLeftSmall:"\u25C2",triangleRightSmall:"\u25B8",home:"\u2302",heart:"\u2665",musicNote:"\u266A",musicNoteBeamed:"\u266B",arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",arrowLeftRight:"\u2194",arrowUpDown:"\u2195",almostEqual:"\u2248",notEqual:"\u2260",lessOrEqual:"\u2264",greaterOrEqual:"\u2265",identical:"\u2261",infinity:"\u221E",subscriptZero:"\u2080",subscriptOne:"\u2081",subscriptTwo:"\u2082",subscriptThree:"\u2083",subscriptFour:"\u2084",subscriptFive:"\u2085",subscriptSix:"\u2086",subscriptSeven:"\u2087",subscriptEight:"\u2088",subscriptNine:"\u2089",oneHalf:"\xBD",oneThird:"\u2153",oneQuarter:"\xBC",oneFifth:"\u2155",oneSixth:"\u2159",oneEighth:"\u215B",twoThirds:"\u2154",twoFifths:"\u2156",threeQuarters:"\xBE",threeFifths:"\u2157",threeEighths:"\u215C",fourFifths:"\u2158",fiveSixths:"\u215A",fiveEighths:"\u215D",sevenEighths:"\u215E",line:"\u2500",lineBold:"\u2501",lineDouble:"\u2550",lineDashed0:"\u2504",lineDashed1:"\u2505",lineDashed2:"\u2508",lineDashed3:"\u2509",lineDashed4:"\u254C",lineDashed5:"\u254D",lineDashed6:"\u2574",lineDashed7:"\u2576",lineDashed8:"\u2578",lineDashed9:"\u257A",lineDashed10:"\u257C",lineDashed11:"\u257E",lineDashed12:"\u2212",lineDashed13:"\u2013",lineDashed14:"\u2010",lineDashed15:"\u2043",lineVertical:"\u2502",lineVerticalBold:"\u2503",lineVerticalDouble:"\u2551",lineVerticalDashed0:"\u2506",lineVerticalDashed1:"\u2507",lineVerticalDashed2:"\u250A",lineVerticalDashed3:"\u250B",lineVerticalDashed4:"\u254E",lineVerticalDashed5:"\u254F",lineVerticalDashed6:"\u2575",lineVerticalDashed7:"\u2577",lineVerticalDashed8:"\u2579",lineVerticalDashed9:"\u257B",lineVerticalDashed10:"\u257D",lineVerticalDashed11:"\u257F",lineDownLeft:"\u2510",lineDownLeftArc:"\u256E",lineDownBoldLeftBold:"\u2513",lineDownBoldLeft:"\u2512",lineDownLeftBold:"\u2511",lineDownDoubleLeftDouble:"\u2557",lineDownDoubleLeft:"\u2556",lineDownLeftDouble:"\u2555",lineDownRight:"\u250C",lineDownRightArc:"\u256D",lineDownBoldRightBold:"\u250F",lineDownBoldRight:"\u250E",lineDownRightBold:"\u250D",lineDownDoubleRightDouble:"\u2554",lineDownDoubleRight:"\u2553",lineDownRightDouble:"\u2552",lineUpLeft:"\u2518",lineUpLeftArc:"\u256F",lineUpBoldLeftBold:"\u251B",lineUpBoldLeft:"\u251A",lineUpLeftBold:"\u2519",lineUpDoubleLeftDouble:"\u255D",lineUpDoubleLeft:"\u255C",lineUpLeftDouble:"\u255B",lineUpRight:"\u2514",lineUpRightArc:"\u2570",lineUpBoldRightBold:"\u2517",lineUpBoldRight:"\u2516",lineUpRightBold:"\u2515",lineUpDoubleRightDouble:"\u255A",lineUpDoubleRight:"\u2559",lineUpRightDouble:"\u2558",lineUpDownLeft:"\u2524",lineUpBoldDownBoldLeftBold:"\u252B",lineUpBoldDownBoldLeft:"\u2528",lineUpDownLeftBold:"\u2525",lineUpBoldDownLeftBold:"\u2529",lineUpDownBoldLeftBold:"\u252A",lineUpDownBoldLeft:"\u2527",lineUpBoldDownLeft:"\u2526",lineUpDoubleDownDoubleLeftDouble:"\u2563",lineUpDoubleDownDoubleLeft:"\u2562",lineUpDownLeftDouble:"\u2561",lineUpDownRight:"\u251C",lineUpBoldDownBoldRightBold:"\u2523",lineUpBoldDownBoldRight:"\u2520",lineUpDownRightBold:"\u251D",lineUpBoldDownRightBold:"\u2521",lineUpDownBoldRightBold:"\u2522",lineUpDownBoldRight:"\u251F",lineUpBoldDownRight:"\u251E",lineUpDoubleDownDoubleRightDouble:"\u2560",lineUpDoubleDownDoubleRight:"\u255F",lineUpDownRightDouble:"\u255E",lineDownLeftRight:"\u252C",lineDownBoldLeftBoldRightBold:"\u2533",lineDownLeftBoldRightBold:"\u252F",lineDownBoldLeftRight:"\u2530",lineDownBoldLeftBoldRight:"\u2531",lineDownBoldLeftRightBold:"\u2532",lineDownLeftRightBold:"\u252E",lineDownLeftBoldRight:"\u252D",lineDownDoubleLeftDoubleRightDouble:"\u2566",lineDownDoubleLeftRight:"\u2565",lineDownLeftDoubleRightDouble:"\u2564",lineUpLeftRight:"\u2534",lineUpBoldLeftBoldRightBold:"\u253B",lineUpLeftBoldRightBold:"\u2537",lineUpBoldLeftRight:"\u2538",lineUpBoldLeftBoldRight:"\u2539",lineUpBoldLeftRightBold:"\u253A",lineUpLeftRightBold:"\u2536",lineUpLeftBoldRight:"\u2535",lineUpDoubleLeftDoubleRightDouble:"\u2569",lineUpDoubleLeftRight:"\u2568",lineUpLeftDoubleRightDouble:"\u2567",lineUpDownLeftRight:"\u253C",lineUpBoldDownBoldLeftBoldRightBold:"\u254B",lineUpDownBoldLeftBoldRightBold:"\u2548",lineUpBoldDownLeftBoldRightBold:"\u2547",lineUpBoldDownBoldLeftRightBold:"\u254A",lineUpBoldDownBoldLeftBoldRight:"\u2549",lineUpBoldDownLeftRight:"\u2540",lineUpDownBoldLeftRight:"\u2541",lineUpDownLeftBoldRight:"\u253D",lineUpDownLeftRightBold:"\u253E",lineUpBoldDownBoldLeftRight:"\u2542",lineUpDownLeftBoldRightBold:"\u253F",lineUpBoldDownLeftBoldRight:"\u2543",lineUpBoldDownLeftRightBold:"\u2544",lineUpDownBoldLeftBoldRight:"\u2545",lineUpDownBoldLeftRightBold:"\u2546",lineUpDoubleDownDoubleLeftDoubleRightDouble:"\u256C",lineUpDoubleDownDoubleLeftRight:"\u256B",lineUpDownLeftDoubleRightDouble:"\u256A",lineCross:"\u2573",lineBackslash:"\u2572",lineSlash:"\u2571"},Mo={tick:"\u2714",info:"\u2139",warning:"\u26A0",cross:"\u2718",squareSmall:"\u25FB",squareSmallFilled:"\u25FC",circle:"\u25EF",circleFilled:"\u25C9",circleDotted:"\u25CC",circleDouble:"\u25CE",circleCircle:"\u24DE",circleCross:"\u24E7",circlePipe:"\u24BE",radioOn:"\u25C9",radioOff:"\u25EF",checkboxOn:"\u2612",checkboxOff:"\u2610",checkboxCircleOn:"\u24E7",checkboxCircleOff:"\u24BE",pointer:"\u276F",triangleUpOutline:"\u25B3",triangleLeft:"\u25C0",triangleRight:"\u25B6",lozenge:"\u25C6",lozengeOutline:"\u25C7",hamburger:"\u2630",smiley:"\u32E1",mustache:"\u0DF4",star:"\u2605",play:"\u25B6",nodejs:"\u2B22",oneSeventh:"\u2150",oneNinth:"\u2151",oneTenth:"\u2152"},_f={tick:"\u221A",info:"i",warning:"\u203C",cross:"\xD7",squareSmall:"\u25A1",squareSmallFilled:"\u25A0",circle:"( )",circleFilled:"(*)",circleDotted:"( )",circleDouble:"( )",circleCircle:"(\u25CB)",circleCross:"(\xD7)",circlePipe:"(\u2502)",radioOn:"(*)",radioOff:"( )",checkboxOn:"[\xD7]",checkboxOff:"[ ]",checkboxCircleOn:"(\xD7)",checkboxCircleOff:"( )",pointer:">",triangleUpOutline:"\u2206",triangleLeft:"\u25C4",triangleRight:"\u25BA",lozenge:"\u2666",lozengeOutline:"\u25CA",hamburger:"\u2261",smiley:"\u263A",mustache:"\u250C\u2500\u2510",star:"\u2736",play:"\u25BA",nodejs:"\u2666",oneSeventh:"1/7",oneNinth:"1/9",oneTenth:"1/10"},jf={...Co,...Mo},kf={...Co,..._f},Gf=xr(),zf=Gf?jf:kf,it=zf,zg=Object.entries(Mo);var Po=O(require("node:tty"),1),Wf=Po.default?.WriteStream?.prototype?.hasColors?.()??!1,h=(e,t)=>{if(!Wf)return o=>o;let r=`\x1B[${e}m`,n=`\x1B[${t}m`;return o=>{let i=o+"",s=i.indexOf(n);if(s===-1)return r+i+n;let a=r,c=0;for(;s!==-1;)a+=i.slice(c,s)+r,c=s+n.length,s=i.indexOf(n,c);return a+=i.slice(c)+n,a}},Vg=h(0,0),Fo=h(1,22),Yg=h(2,22),qg=h(3,23),Hg=h(4,24),Kg=h(53,55),Xg=h(7,27),Zg=h(8,28),Jg=h(9,29),Qg=h(30,39),eS=h(31,39),tS=h(32,39),rS=h(33,39),nS=h(34,39),oS=h(35,39),iS=h(36,39),sS=h(37,39),st=h(90,39),aS=h(40,49),cS=h(41,49),lS=h(42,49),fS=h(43,49),uS=h(44,49),dS=h(45,49),pS=h(46,49),mS=h(47,49),hS=h(100,49),Bo=h(91,39),gS=h(92,39),Lo=h(93,39),SS=h(94,39),yS=h(95,39),bS=h(96,39),wS=h(97,39),xS=h(101,49),ES=h(102,49),TS=h(103,49),AS=h(104,49),OS=h(105,49),IS=h(106,49),RS=h(107,49);var Uo=({type:e,message:t,timestamp:r,piped:n,commandId:o,result:{failed:i=!1}={},options:{reject:s=!0}})=>{let a=Vf(r),c=Yf[e]({failed:i,reject:s,piped:n}),f=qf[e]({reject:s});return`${st(`[${a}]`)} ${st(`[${o}]`)} ${f(c)} ${f(t)}`},Vf=e=>`${at(e.getHours(),2)}:${at(e.getMinutes(),2)}:${at(e.getSeconds(),2)}.${at(e.getMilliseconds(),3)}`,at=(e,t)=>String(e).padStart(t,"0"),vo=({failed:e,reject:t})=>e?t?it.cross:it.warning:it.tick,Yf={command:({piped:e})=>e?"|":"$",output:()=>" ",ipc:()=>"*",error:vo,duration:vo},$o=e=>e,qf={command:()=>Fo,output:()=>$o,ipc:()=>$o,error:({reject:e})=>e?Bo:Lo,duration:()=>st};var No=(e,t,r)=>{let n=Ao(t,r);return e.map(({verboseLine:o,verboseObject:i})=>Hf(o,i,n)).filter(o=>o!==void 0).map(o=>Kf(o)).join("")},Hf=(e,t,r)=>{if(r===void 0)return e;let n=r(e,t);if(typeof n=="string")return n},Kf=e=>e.endsWith(`
`)?e:`${e}
`;var U=({type:e,verboseMessage:t,fdNumber:r,verboseInfo:n,result:o})=>{let i=Xf({type:e,result:o,verboseInfo:n}),s=Zf(t,i),a=No(s,n,r);(0,_o.writeFileSync)(Qf,a)},Xf=({type:e,result:t,verboseInfo:{escapedCommand:r,commandId:n,rawOptions:{piped:o=!1,...i}}})=>({type:e,escapedCommand:r,commandId:`${n}`,timestamp:new Date,piped:o,result:t,options:i}),Zf=(e,t)=>e.split(`
`).map(r=>Jf({...t,message:r})),Jf=e=>({verboseLine:Uo(e),verboseObject:e}),Qf=2,ct=e=>{let t=typeof e=="string"?e:(0,jo.inspect)(e);return Be(t).replaceAll("	"," ".repeat(eu))},eu=2;var ko=(e,t)=>{de(t)&&U({type:"command",verboseMessage:e,verboseInfo:t})};var Go=(e,t,r)=>{nu(e);let n=tu(e);return{verbose:e,escapedCommand:t,commandId:n,rawOptions:r}},tu=e=>de({verbose:e})?ru++:void 0,ru=0n,nu=e=>{for(let t of e){if(t===!1)throw new TypeError(`The "verbose: false" option was renamed to "verbose: 'none'".`);if(t===!0)throw new TypeError(`The "verbose: true" option was renamed to "verbose: 'short'".`);if(!ot.includes(t)&&!nt(t)){let r=ot.map(n=>`'${n}'`).join(", ");throw new TypeError(`The "verbose" option must not be ${t}. Allowed values are: ${r} or a function.`)}}};var Er=require("node:process"),lt=()=>Er.hrtime.bigint(),Tr=e=>Number(Er.hrtime.bigint()-e)/1e6;var ft=(e,t,r)=>{let n=lt(),{command:o,escapedCommand:i}=Ro(e,t),s=gr(r,"verbose"),a=Go(s,i,{...r});return ko(i,a),{command:o,escapedCommand:i,startTime:n,verboseInfo:a}};var ra=O(require("node:path"),1),qr=O(require("node:process"),1),na=O(Mi(),1);var Le=O(require("node:process"),1),X=O(require("node:path"),1);function dt(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}var Pi=require("node:util"),Lr=require("node:child_process"),Br=O(require("node:path"),1),Fi=require("node:url"),uy=(0,Pi.promisify)(Lr.execFile);function pt(e){return e instanceof URL?(0,Fi.fileURLToPath)(e):e}function Bi(e){return{*[Symbol.iterator](){let t=Br.default.resolve(pt(e)),r;for(;r!==t;)yield t,r=t,t=Br.default.resolve(t,"..")}}}var dy=10*1024*1024;var Mu=({cwd:e=Le.default.cwd(),path:t=Le.default.env[dt()],preferLocal:r=!0,execPath:n=Le.default.execPath,addExecPath:o=!0}={})=>{let i=X.default.resolve(pt(e)),s=[],a=t.split(X.default.delimiter);return r&&Pu(s,a,i),o&&Fu(s,a,n,i),t===""||t===X.default.delimiter?`${s.join(X.default.delimiter)}${t}`:[...s,t].join(X.default.delimiter)},Pu=(e,t,r)=>{for(let n of Bi(r)){let o=X.default.join(n,"node_modules/.bin");t.includes(o)||e.push(o)}},Fu=(e,t,r,n)=>{let o=X.default.resolve(n,pt(r),"..");t.includes(o)||e.push(o)},Li=({env:e=Le.default.env,...t}={})=>{e={...e};let r=dt({env:e});return t.path=e[r],e[r]=Mu(t),e};var Xi=require("node:timers/promises");var vi=(e,t,r)=>{let n=r?$e:ve,o=e instanceof L?{}:{cause:e};return new n(t,o)},L=class extends Error{},$i=(e,t)=>{Object.defineProperty(e.prototype,"name",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,Ni,{value:!0,writable:!1,enumerable:!1,configurable:!1})},Ui=e=>mt(e)&&Ni in e,Ni=Symbol("isExecaError"),mt=e=>Object.prototype.toString.call(e)==="[object Error]",ve=class extends Error{};$i(ve,ve.name);var $e=class extends Error{};$i($e,$e.name);var ge=require("node:os");var Wi=require("node:os");var _i=()=>{let e=ki-ji+1;return Array.from({length:e},Bu)},Bu=(e,t)=>({name:`SIGRT${t+1}`,number:ji+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),ji=34,ki=64;var zi=require("node:os");var Gi=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var vr=()=>{let e=_i();return[...Gi,...e].map(Lu)},Lu=({name:e,number:t,description:r,action:n,forced:o=!1,standard:i})=>{let{signals:{[e]:s}}=zi.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}};var vu=()=>{let e=vr();return Object.fromEntries(e.map($u))},$u=({name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s})=>[e,{name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}],Vi=vu(),Uu=()=>{let e=vr(),t=65,r=Array.from({length:t},(n,o)=>Nu(o,e));return Object.assign({},...r)},Nu=(e,t)=>{let r=_u(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},_u=(e,t)=>{let r=t.find(({name:n})=>Wi.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},Oy=Uu();var qi=e=>{let t="option `killSignal`";if(e===0)throw new TypeError(`Invalid ${t}: 0 cannot be used.`);return Ki(e,t)},Hi=e=>e===0?e:Ki(e,"`subprocess.kill()`'s argument"),Ki=(e,t)=>{if(Number.isInteger(e))return ju(e,t);if(typeof e=="string")return Gu(e,t);throw new TypeError(`Invalid ${t} ${String(e)}: it must be a string or an integer.
${$r()}`)},ju=(e,t)=>{if(Yi.has(e))return Yi.get(e);throw new TypeError(`Invalid ${t} ${e}: this signal integer does not exist.
${$r()}`)},ku=()=>new Map(Object.entries(ge.constants.signals).reverse().map(([e,t])=>[t,e])),Yi=ku(),Gu=(e,t)=>{if(e in ge.constants.signals)return e;throw e.toUpperCase()in ge.constants.signals?new TypeError(`Invalid ${t} '${e}': please rename it to '${e.toUpperCase()}'.`):new TypeError(`Invalid ${t} '${e}': this signal name does not exist.
${$r()}`)},$r=()=>`Available signal names: ${zu()}.
Available signal numbers: ${Wu()}.`,zu=()=>Object.keys(ge.constants.signals).sort().map(e=>`'${e}'`).join(", "),Wu=()=>[...new Set(Object.values(ge.constants.signals).sort((e,t)=>e-t))].join(", "),ht=e=>Vi[e].description;var Zi=e=>{if(e===!1)return e;if(e===!0)return Vu;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterDelay\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Vu=1e3*5,Ji=({kill:e,options:{forceKillAfterDelay:t,killSignal:r},onInternalError:n,context:o,controller:i},s,a)=>{let{signal:c,error:f}=Yu(s,a,r);qu(f,n);let l=e(c);return Hu({kill:e,signal:c,forceKillAfterDelay:t,killSignal:r,killResult:l,context:o,controller:i}),l},Yu=(e,t,r)=>{let[n=r,o]=mt(e)?[void 0,e]:[e,t];if(typeof n!="string"&&!Number.isInteger(n))throw new TypeError(`The first argument must be an error instance or a signal name string/integer: ${String(n)}`);if(o!==void 0&&!mt(o))throw new TypeError(`The second argument is optional. If specified, it must be an error instance: ${o}`);return{signal:Hi(n),error:o}},qu=(e,t)=>{e!==void 0&&t.reject(e)},Hu=async({kill:e,signal:t,forceKillAfterDelay:r,killSignal:n,killResult:o,context:i,controller:s})=>{t===n&&o&&Ur({kill:e,forceKillAfterDelay:r,context:i,controllerSignal:s.signal})},Ur=async({kill:e,forceKillAfterDelay:t,context:r,controllerSignal:n})=>{if(t!==!1)try{await(0,Xi.setTimeout)(t,void 0,{signal:n}),e("SIGKILL")&&(r.isForcefullyTerminated??=!0)}catch{}};var Qi=require("node:events"),gt=async(e,t)=>{e.aborted||await(0,Qi.once)(e,"abort",{signal:t})};var es=({cancelSignal:e})=>{if(e!==void 0&&Object.prototype.toString.call(e)!=="[object AbortSignal]")throw new Error(`The \`cancelSignal\` option must be an AbortSignal: ${String(e)}`)},ts=({subprocess:e,cancelSignal:t,gracefulCancel:r,context:n,controller:o})=>t===void 0||r?[]:[Ku(e,t,n,o)],Ku=async(e,t,r,{signal:n})=>{throw await gt(t,n),r.terminationReason??="cancel",e.kill(),t.reason};var Ls=require("node:timers/promises");var Fs=require("node:util");var Se=({methodName:e,isSubprocess:t,ipc:r,isConnected:n})=>{Xu(e,t,r),Nr(e,t,n)},Xu=(e,t,r)=>{if(!r)throw new Error(`${v(e,t)} can only be used if the \`ipc\` option is \`true\`.`)},Nr=(e,t,r)=>{if(!r)throw new Error(`${v(e,t)} cannot be used: the ${Z(t)} has already exited or disconnected.`)},rs=e=>{throw new Error(`${v("getOneMessage",e)} could not complete: the ${Z(e)} exited or disconnected.`)},ns=e=>{throw new Error(`${v("sendMessage",e)} failed: the ${Z(e)} is sending a message too, instead of listening to incoming messages.
This can be fixed by both sending a message and listening to incoming messages at the same time:

const [receivedMessage] = await Promise.all([
	${v("getOneMessage",e)},
	${v("sendMessage",e,"message, {strict: true}")},
]);`)},St=(e,t)=>new Error(`${v("sendMessage",t)} failed when sending an acknowledgment response to the ${Z(t)}.`,{cause:e}),os=e=>{throw new Error(`${v("sendMessage",e)} failed: the ${Z(e)} is not listening to incoming messages.`)},is=e=>{throw new Error(`${v("sendMessage",e)} failed: the ${Z(e)} exited without listening to incoming messages.`)},ss=()=>new Error(`\`cancelSignal\` aborted: the ${Z(!0)} disconnected.`),as=()=>{throw new Error("`getCancelSignal()` cannot be used without setting the `cancelSignal` subprocess option.")},cs=({error:e,methodName:t,isSubprocess:r})=>{if(e.code==="EPIPE")throw new Error(`${v(t,r)} cannot be used: the ${Z(r)} is disconnecting.`,{cause:e})},ls=({error:e,methodName:t,isSubprocess:r,message:n})=>{if(Zu(e))throw new Error(`${v(t,r)}'s argument type is invalid: the message cannot be serialized: ${String(n)}.`,{cause:e})},Zu=({code:e,message:t})=>Ju.has(e)||Qu.some(r=>t.includes(r)),Ju=new Set(["ERR_MISSING_ARGS","ERR_INVALID_ARG_TYPE"]),Qu=["could not be cloned","circular structure","call stack size exceeded"],v=(e,t,r="")=>e==="cancelSignal"?"`cancelSignal`'s `controller.abort()`":`${ed(t)}${e}(${r})`,ed=e=>e?"":"subprocess.",Z=e=>e?"parent process":"subprocess",ye=e=>{e.connected&&e.disconnect()};var N=()=>{let e={},t=new Promise((r,n)=>{Object.assign(e,{resolve:r,reject:n})});return Object.assign(t,e)};var bt=(e,t="stdin")=>{let{options:n,fileDescriptors:o}=_.get(e),i=fs(o,t,!0),s=e.stdio[i];if(s===null)throw new TypeError(us(i,t,n,!0));return s},be=(e,t="stdout")=>{let{options:n,fileDescriptors:o}=_.get(e),i=fs(o,t,!1),s=i==="all"?e.all:e.stdio[i];if(s==null)throw new TypeError(us(i,t,n,!1));return s},_=new WeakMap,fs=(e,t,r)=>{let n=td(t,r);return rd(n,t,r,e),n},td=(e,t)=>{let r=Sr(e);if(r!==void 0)return r;let{validOptions:n,defaultValue:o}=t?{validOptions:'"stdin"',defaultValue:"stdin"}:{validOptions:'"stdout", "stderr", "all"',defaultValue:"stdout"};throw new TypeError(`"${Ue(t)}" must not be "${e}".
It must be ${n} or "fd3", "fd4" (and so on).
It is optional and defaults to "${o}".`)},rd=(e,t,r,n)=>{let o=n[ds(e)];if(o===void 0)throw new TypeError(`"${Ue(r)}" must not be ${t}. That file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);if(o.direction==="input"&&!r)throw new TypeError(`"${Ue(r)}" must not be ${t}. It must be a readable stream, not writable.`);if(o.direction!=="input"&&r)throw new TypeError(`"${Ue(r)}" must not be ${t}. It must be a writable stream, not readable.`)},us=(e,t,r,n)=>{if(e==="all"&&!r.all)return`The "all" option must be true to use "from: 'all'".`;let{optionName:o,optionValue:i}=nd(e,r);return`The "${o}: ${yt(i)}" option is incompatible with using "${Ue(n)}: ${yt(t)}".
Please set this option with "pipe" instead.`},nd=(e,{stdin:t,stdout:r,stderr:n,stdio:o})=>{let i=ds(e);return i===0&&t!==void 0?{optionName:"stdin",optionValue:t}:i===1&&r!==void 0?{optionName:"stdout",optionValue:r}:i===2&&n!==void 0?{optionName:"stderr",optionValue:n}:{optionName:`stdio[${i}]`,optionValue:o[i]}},ds=e=>e==="all"?1:e,Ue=e=>e?"to":"from",yt=e=>typeof e=="string"?`'${e}'`:typeof e=="number"?`${e}`:"Stream";var Os=require("node:events");var ps=require("node:events"),oe=(e,t,r)=>{let n=e.getMaxListeners();n===0||n===Number.POSITIVE_INFINITY||(e.setMaxListeners(n+t),(0,ps.addAbortListener)(r,()=>{e.setMaxListeners(e.getMaxListeners()-t)}))};var As=require("node:events");var gs=require("node:events"),Ss=require("node:timers/promises");var wt=(e,t)=>{t&&_r(e)},_r=e=>{e.refCounted()},xt=(e,t)=>{t&&jr(e)},jr=e=>{e.unrefCounted()},ms=(e,t)=>{t&&(jr(e),jr(e))},hs=(e,t)=>{t&&(_r(e),_r(e))};var ys=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n},o)=>{if(xs(o)||Ts(o))return;Et.has(e)||Et.set(e,[]);let i=Et.get(e);if(i.push(o),!(i.length>1))for(;i.length>0;){await Es(e,n,o),await Ss.scheduler.yield();let s=await ws({wrappedMessage:i[0],anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n});i.shift(),n.emit("message",s),n.emit("message:done")}},bs=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n,boundOnMessage:o})=>{kr();let i=Et.get(e);for(;i?.length>0;)await(0,gs.once)(n,"message:done");e.removeListener("message",o),hs(t,r),n.connected=!1,n.emit("disconnect")},Et=new WeakMap;var J=(e,t,r)=>{if(Tt.has(e))return Tt.get(e);let n=new As.EventEmitter;return n.connected=!0,Tt.set(e,n),od({ipcEmitter:n,anyProcess:e,channel:t,isSubprocess:r}),n},Tt=new WeakMap,od=({ipcEmitter:e,anyProcess:t,channel:r,isSubprocess:n})=>{let o=ys.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e});t.on("message",o),t.once("disconnect",bs.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e,boundOnMessage:o})),ms(r,n)},At=e=>{let t=Tt.get(e);return t===void 0?e.channel!==null:t.connected};var Is=({anyProcess:e,channel:t,isSubprocess:r,message:n,strict:o})=>{if(!o)return n;let i=J(e,t,r),s=Rt(e,i);return{id:id++,type:It,message:n,hasListeners:s}},id=0n,Rs=(e,t)=>{if(!(t?.type!==It||t.hasListeners))for(let{id:r}of e)r!==void 0&&Ot[r].resolve({isDeadlock:!0,hasListeners:!1})},ws=async({wrappedMessage:e,anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:o})=>{if(e?.type!==It||!t.connected)return e;let{id:i,message:s}=e,a={id:i,type:Cs,message:Rt(t,o)};try{await Dt({anyProcess:t,channel:r,isSubprocess:n,ipc:!0},a)}catch(c){o.emit("strict:error",c)}return s},xs=e=>{if(e?.type!==Cs)return!1;let{id:t,message:r}=e;return Ot[t]?.resolve({isDeadlock:!1,hasListeners:r}),!0},Ds=async(e,t,r)=>{if(e?.type!==It)return;let n=N();Ot[e.id]=n;let o=new AbortController;try{let{isDeadlock:i,hasListeners:s}=await Promise.race([n,sd(t,r,o)]);i&&ns(r),s||os(r)}finally{o.abort(),delete Ot[e.id]}},Ot={},sd=async(e,t,{signal:r})=>{oe(e,1,r),await(0,Os.once)(e,"disconnect",{signal:r}),is(t)},It="execa:ipc:request",Cs="execa:ipc:response";var Ms=(e,t,r)=>{Ne.has(e)||Ne.set(e,new Set);let n=Ne.get(e),o=N(),i=r?t.id:void 0,s={onMessageSent:o,id:i};return n.add(s),{outgoingMessages:n,outgoingMessage:s}},Ps=({outgoingMessages:e,outgoingMessage:t})=>{e.delete(t),t.onMessageSent.resolve()},Es=async(e,t,r)=>{for(;!Rt(e,t)&&Ne.get(e)?.size>0;){let n=[...Ne.get(e)];Rs(n,r),await Promise.all(n.map(({onMessageSent:o})=>o))}},Ne=new WeakMap,Rt=(e,t)=>t.listenerCount("message")>ad(e),ad=e=>_.has(e)&&!V(_.get(e).options.buffer,"ipc")?1:0;var Dt=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},o,{strict:i=!1}={})=>{let s="sendMessage";return Se({methodName:s,isSubprocess:r,ipc:n,isConnected:e.connected}),cd({anyProcess:e,channel:t,methodName:s,isSubprocess:r,message:o,strict:i})},cd=async({anyProcess:e,channel:t,methodName:r,isSubprocess:n,message:o,strict:i})=>{let s=Is({anyProcess:e,channel:t,isSubprocess:n,message:o,strict:i}),a=Ms(e,s,i);try{await zr({anyProcess:e,methodName:r,isSubprocess:n,wrappedMessage:s,message:o})}catch(c){throw ye(e),c}finally{Ps(a)}},zr=async({anyProcess:e,methodName:t,isSubprocess:r,wrappedMessage:n,message:o})=>{let i=ld(e);try{await Promise.all([Ds(n,e,r),i(n)])}catch(s){throw cs({error:s,methodName:t,isSubprocess:r}),ls({error:s,methodName:t,isSubprocess:r,message:o}),s}},ld=e=>{if(Gr.has(e))return Gr.get(e);let t=(0,Fs.promisify)(e.send.bind(e));return Gr.set(e,t),t},Gr=new WeakMap;var vs=(e,t)=>{let r="cancelSignal";return Nr(r,!1,e.connected),zr({anyProcess:e,methodName:r,isSubprocess:!1,wrappedMessage:{type:Us,message:t},message:t})},$s=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>(await fd({anyProcess:e,channel:t,isSubprocess:r,ipc:n}),Wr.signal),fd=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>{if(!Bs){if(Bs=!0,!n){as();return}if(t===null){kr();return}J(e,t,r),await Ls.scheduler.yield()}},Bs=!1,Ts=e=>e?.type!==Us?!1:(Wr.abort(e.message),!0),Us="execa:ipc:cancel",kr=()=>{Wr.abort(ss())},Wr=new AbortController;var Ns=({gracefulCancel:e,cancelSignal:t,ipc:r,serialization:n})=>{if(e){if(t===void 0)throw new Error("The `cancelSignal` option must be defined when setting the `gracefulCancel` option.");if(!r)throw new Error("The `ipc` option cannot be false when setting the `gracefulCancel` option.");if(n==="json")throw new Error("The `serialization` option cannot be 'json' when setting the `gracefulCancel` option.")}},_s=({subprocess:e,cancelSignal:t,gracefulCancel:r,forceKillAfterDelay:n,context:o,controller:i})=>r?[ud({subprocess:e,cancelSignal:t,forceKillAfterDelay:n,context:o,controller:i})]:[],ud=async({subprocess:e,cancelSignal:t,forceKillAfterDelay:r,context:n,controller:{signal:o}})=>{await gt(t,o);let i=dd(t);throw await vs(e,i),Ur({kill:e.kill,forceKillAfterDelay:r,context:n,controllerSignal:o}),n.terminationReason??="gracefulCancel",t.reason},dd=({reason:e})=>{if(!(e instanceof DOMException))return e;let t=new Error(e.message);return Object.defineProperty(t,"stack",{value:e.stack,enumerable:!1,configurable:!0,writable:!0}),t};var js=require("node:timers/promises");var ks=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Gs=(e,t,r,n)=>t===0||t===void 0?[]:[pd(e,t,r,n)],pd=async(e,t,r,{signal:n})=>{throw await(0,js.setTimeout)(t,void 0,{signal:n}),r.terminationReason??="timeout",e.kill(),new L};var Ct=require("node:process"),Vr=O(require("node:path"),1);var zs=({options:e})=>{if(e.node===!1)throw new TypeError('The "node" option cannot be false with `execaNode()`.');return{options:{...e,node:!0}}},Ws=(e,t,{node:r=!1,nodePath:n=Ct.execPath,nodeOptions:o=Ct.execArgv.filter(c=>!c.startsWith("--inspect")),cwd:i,execPath:s,...a})=>{if(s!==void 0)throw new TypeError('The "execPath" option has been removed. Please use the "nodePath" option instead.');let c=ue(n,'The "nodePath" option'),f=Vr.default.resolve(i,c),l={...a,nodePath:f,node:r,cwd:i};if(!r)return[e,t,l];if(Vr.default.basename(e,".exe")==="node")throw new TypeError('When the "node" option is true, the first argument does not need to be "node".');return[f,[...o,e,...t],{ipc:!0,...l,shell:!1}]};var Vs=require("node:v8"),Ys=({ipcInput:e,ipc:t,serialization:r})=>{if(e!==void 0){if(!t)throw new Error("The `ipcInput` option cannot be set unless the `ipc` option is `true`.");gd[r](e)}},md=e=>{try{(0,Vs.serialize)(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with a structured clone.",{cause:t})}},hd=e=>{try{JSON.stringify(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with JSON.",{cause:t})}},gd={advanced:md,json:hd},qs=async(e,t)=>{t!==void 0&&await e.sendMessage(t)};var Ks=({encoding:e})=>{if(Yr.has(e))return;let t=yd(e);if(t!==void 0)throw new TypeError(`Invalid option \`encoding: ${Mt(e)}\`.
Please rename it to ${Mt(t)}.`);let r=[...Yr].map(n=>Mt(n)).join(", ");throw new TypeError(`Invalid option \`encoding: ${Mt(e)}\`.
Please rename it to one of: ${r}.`)},Sd=new Set(["utf8","utf16le"]),D=new Set(["buffer","hex","base64","base64url","latin1","ascii"]),Yr=new Set([...Sd,...D]),yd=e=>{if(e===null)return"buffer";if(typeof e!="string")return;let t=e.toLowerCase();if(t in Hs)return Hs[t];if(Yr.has(t))return t},Hs={"utf-8":"utf8","utf-16le":"utf16le","ucs-2":"utf16le",ucs2:"utf16le",binary:"latin1"},Mt=e=>typeof e=="string"?`"${e}"`:String(e);var Xs=require("node:fs"),Zs=O(require("node:path"),1),Js=O(require("node:process"),1);var Qs=(e=ea())=>{let t=ue(e,'The "cwd" option');return Zs.default.resolve(t)},ea=()=>{try{return Js.default.cwd()}catch(e){throw e.message=`The current directory does not exist.
${e.message}`,e}},ta=(e,t)=>{if(t===ea())return e;let r;try{r=(0,Xs.statSync)(t)}catch(n){return`The "cwd" option is invalid: ${t}.
${n.message}
${e}`}return r.isDirectory()?e:`The "cwd" option is not a directory: ${t}.
${e}`};var Pt=(e,t,r)=>{r.cwd=Qs(r.cwd);let[n,o,i]=Ws(e,t,r),{command:s,args:a,options:c}=na.default._parse(n,o,i),f=To(c),l=bd(f);return ks(l),Ks(l),Ys(l),es(l),Ns(l),l.shell=mr(l.shell),l.env=wd(l),l.killSignal=qi(l.killSignal),l.forceKillAfterDelay=Zi(l.forceKillAfterDelay),l.lines=l.lines.map((u,d)=>u&&!D.has(l.encoding)&&l.buffer[d]),qr.default.platform==="win32"&&ra.default.basename(s,".exe")==="cmd"&&a.unshift("/q"),{file:s,commandArguments:a,options:l}},bd=({extendEnv:e=!0,preferLocal:t=!1,cwd:r,localDir:n=r,encoding:o="utf8",reject:i=!0,cleanup:s=!0,all:a=!1,windowsHide:c=!0,killSignal:f="SIGTERM",forceKillAfterDelay:l=!0,gracefulCancel:u=!1,ipcInput:d,ipc:p=d!==void 0||u,serialization:m="advanced",...S})=>({...S,extendEnv:e,preferLocal:t,cwd:r,localDirectory:n,encoding:o,reject:i,cleanup:s,all:a,windowsHide:c,killSignal:f,forceKillAfterDelay:l,gracefulCancel:u,ipcInput:d,ipc:p,serialization:m}),wd=({env:e,extendEnv:t,preferLocal:r,node:n,localDirectory:o,nodePath:i})=>{let s=t?{...qr.default.env,...e}:e;return r||n?Li({env:s,cwd:o,execPath:i,preferLocal:r,addExecPath:n}):s};var Oa=require("node:util");function we(e){if(typeof e=="string")return xd(e);if(!(ArrayBuffer.isView(e)&&e.BYTES_PER_ELEMENT===1))throw new Error("Input must be a string or a Uint8Array");return Ed(e)}var xd=e=>e.at(-1)===oa?e.slice(0,e.at(-2)===ia?-2:-1):e,Ed=e=>e.at(-1)===Td?e.subarray(0,e.at(-2)===Ad?-2:-1):e,oa=`
`,Td=oa.codePointAt(0),ia="\r",Ad=ia.codePointAt(0);var Sa=require("node:events"),ya=require("node:stream/promises");function $(e,{checkOpen:t=!0}={}){return e!==null&&typeof e=="object"&&(e.writable||e.readable||!t||e.writable===void 0&&e.readable===void 0)&&typeof e.pipe=="function"}function Hr(e,{checkOpen:t=!0}={}){return $(e,{checkOpen:t})&&(e.writable||!t)&&typeof e.write=="function"&&typeof e.end=="function"&&typeof e.writable=="boolean"&&typeof e.writableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function ie(e,{checkOpen:t=!0}={}){return $(e,{checkOpen:t})&&(e.readable||!t)&&typeof e.read=="function"&&typeof e.readable=="boolean"&&typeof e.readableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function Kr(e,t){return Hr(e,t)&&ie(e,t)}var Od=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),Xr=class{#t;#r;#e=!1;#n=void 0;constructor(t,r){this.#t=t,this.#r=r}next(){let t=()=>this.#i();return this.#n=this.#n?this.#n.then(t,t):t(),this.#n}return(t){let r=()=>this.#o(t);return this.#n?this.#n.then(r,r):r()}async#i(){if(this.#e)return{done:!0,value:void 0};let t;try{t=await this.#t.read()}catch(r){throw this.#n=void 0,this.#e=!0,this.#t.releaseLock(),r}return t.done&&(this.#n=void 0,this.#e=!0,this.#t.releaseLock()),t}async#o(t){if(this.#e)return{done:!0,value:t};if(this.#e=!0,!this.#r){let r=this.#t.cancel(t);return this.#t.releaseLock(),await r,{done:!0,value:t}}return this.#t.releaseLock(),{done:!0,value:t}}},Zr=Symbol();function sa(){return this[Zr].next()}Object.defineProperty(sa,"name",{value:"next"});function aa(e){return this[Zr].return(e)}Object.defineProperty(aa,"name",{value:"return"});var Id=Object.create(Od,{next:{enumerable:!0,configurable:!0,writable:!0,value:sa},return:{enumerable:!0,configurable:!0,writable:!0,value:aa}});function Jr({preventCancel:e=!1}={}){let t=this.getReader(),r=new Xr(t,e),n=Object.create(Id);return n[Zr]=r,n}var ca=e=>{if(ie(e,{checkOpen:!1})&&_e.on!==void 0)return Dd(e);if(typeof e?.[Symbol.asyncIterator]=="function")return e;if(Rd.call(e)==="[object ReadableStream]")return Jr.call(e);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:Rd}=Object.prototype,Dd=async function*(e){let t=new AbortController,r={};Cd(e,t,r);try{for await(let[n]of _e.on(e,"data",{signal:t.signal}))yield n}catch(n){if(r.error!==void 0)throw r.error;if(!t.signal.aborted)throw n}finally{e.destroy()}},Cd=async(e,t,r)=>{try{await _e.finished(e,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(n){r.error=n}finally{t.abort()}},_e={};var xe=async(e,{init:t,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:s,finalize:a},{maxBuffer:c=Number.POSITIVE_INFINITY}={})=>{let f=ca(e),l=t();l.length=0;try{for await(let u of f){let d=Pd(u),p=r[d](u,l);ua({convertedChunk:p,state:l,getSize:n,truncateChunk:o,addChunk:i,maxBuffer:c})}return Md({state:l,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:s,maxBuffer:c}),a(l)}catch(u){let d=typeof u=="object"&&u!==null?u:new Error(u);throw d.bufferedData=a(l),d}},Md=({state:e,getSize:t,truncateChunk:r,addChunk:n,getFinalChunk:o,maxBuffer:i})=>{let s=o(e);s!==void 0&&ua({convertedChunk:s,state:e,getSize:t,truncateChunk:r,addChunk:n,maxBuffer:i})},ua=({convertedChunk:e,state:t,getSize:r,truncateChunk:n,addChunk:o,maxBuffer:i})=>{let s=r(e),a=t.length+s;if(a<=i){la(e,t,o,a);return}let c=n(e,i-t.length);throw c!==void 0&&la(c,t,o,i),new j},la=(e,t,r,n)=>{t.contents=r(e,t,n),t.length=n},Pd=e=>{let t=typeof e;if(t==="string")return"string";if(t!=="object"||e===null)return"others";if(globalThis.Buffer?.isBuffer(e))return"buffer";let r=fa.call(e);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(e.byteLength)&&Number.isInteger(e.byteOffset)&&fa.call(e.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:fa}=Object.prototype,j=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var Y=e=>e,je=()=>{},Ft=({contents:e})=>e,Bt=e=>{throw new Error(`Streams in object mode are not supported: ${String(e)}`)},Lt=e=>e.length;async function vt(e,t){return xe(e,vd,t)}var Fd=()=>({contents:[]}),Bd=()=>1,Ld=(e,{contents:t})=>(t.push(e),t),vd={init:Fd,convertChunk:{string:Y,buffer:Y,arrayBuffer:Y,dataView:Y,typedArray:Y,others:Y},getSize:Bd,truncateChunk:je,addChunk:Ld,getFinalChunk:je,finalize:Ft};async function $t(e,t){return xe(e,Wd,t)}var $d=()=>({contents:new ArrayBuffer(0)}),Ud=e=>Nd.encode(e),Nd=new TextEncoder,da=e=>new Uint8Array(e),pa=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),_d=(e,t)=>e.slice(0,t),jd=(e,{contents:t,length:r},n)=>{let o=ga()?Gd(t,n):kd(t,n);return new Uint8Array(o).set(e,r),o},kd=(e,t)=>{if(t<=e.byteLength)return e;let r=new ArrayBuffer(ha(t));return new Uint8Array(r).set(new Uint8Array(e),0),r},Gd=(e,t)=>{if(t<=e.maxByteLength)return e.resize(t),e;let r=new ArrayBuffer(t,{maxByteLength:ha(t)});return new Uint8Array(r).set(new Uint8Array(e),0),r},ha=e=>ma**Math.ceil(Math.log(e)/Math.log(ma)),ma=2,zd=({contents:e,length:t})=>ga()?e:e.slice(0,t),ga=()=>"resize"in ArrayBuffer.prototype,Wd={init:$d,convertChunk:{string:Ud,buffer:da,arrayBuffer:da,dataView:pa,typedArray:pa,others:Bt},getSize:Lt,truncateChunk:_d,addChunk:jd,getFinalChunk:je,finalize:zd};async function Nt(e,t){return xe(e,Kd,t)}var Vd=()=>({contents:"",textDecoder:new TextDecoder}),Ut=(e,{textDecoder:t})=>t.decode(e,{stream:!0}),Yd=(e,{contents:t})=>t+e,qd=(e,t)=>e.slice(0,t),Hd=({textDecoder:e})=>{let t=e.decode();return t===""?void 0:t},Kd={init:Vd,convertChunk:{string:Y,buffer:Ut,arrayBuffer:Ut,dataView:Ut,typedArray:Ut,others:Bt},getSize:Lt,truncateChunk:qd,addChunk:Yd,getFinalChunk:Hd,finalize:Ft};Object.assign(_e,{on:Sa.on,finished:ya.finished});var ba=({error:e,stream:t,readableObjectMode:r,lines:n,encoding:o,fdNumber:i})=>{if(!(e instanceof j))throw e;if(i==="all")return e;let s=Xd(r,n,o);throw e.maxBufferInfo={fdNumber:i,unit:s},t.destroy(),e},Xd=(e,t,r)=>e?"objects":t?"lines":r==="buffer"?"bytes":"characters",wa=(e,t,r)=>{if(t.length!==r)return;let n=new j;throw n.maxBufferInfo={fdNumber:"ipc"},n},xa=(e,t)=>{let{streamName:r,threshold:n,unit:o}=Zd(e,t);return`Command's ${r} was larger than ${n} ${o}`},Zd=(e,t)=>{if(e?.maxBufferInfo===void 0)return{streamName:"output",threshold:t[1],unit:"bytes"};let{maxBufferInfo:{fdNumber:r,unit:n}}=e;delete e.maxBufferInfo;let o=V(t,r);return r==="ipc"?{streamName:"IPC output",threshold:o,unit:"messages"}:{streamName:rt(r),threshold:o,unit:n}},Ea=(e,t,r)=>e?.code==="ENOBUFS"&&t!==null&&t.some(n=>n!==null&&n.length>_t(r)),Ta=(e,t,r)=>{if(!t)return e;let n=_t(r);return e.length>n?e.slice(0,n):e},_t=([,e])=>e;var Ia=({stdio:e,all:t,ipcOutput:r,originalError:n,signal:o,signalDescription:i,exitCode:s,escapedCommand:a,timedOut:c,isCanceled:f,isGracefullyCanceled:l,isMaxBuffer:u,isForcefullyTerminated:d,forceKillAfterDelay:p,killSignal:m,maxBuffer:S,timeout:E,cwd:w})=>{let A=n?.code,I=Jd({originalError:n,timedOut:c,timeout:E,isMaxBuffer:u,maxBuffer:S,errorCode:A,signal:o,signalDescription:i,exitCode:s,isCanceled:f,isGracefullyCanceled:l,isForcefullyTerminated:d,forceKillAfterDelay:p,killSignal:m}),C=ep(n,w),z=C===void 0?"":`
${C}`,H=`${I}: ${a}${z}`,ne=t===void 0?[e[2],e[1]]:[t],fe=[H,...ne,...e.slice(3),r.map(K=>tp(K)).join(`
`)].map(K=>Be(we(rp(K)))).filter(Boolean).join(`

`);return{originalMessage:C,shortMessage:H,message:fe}},Jd=({originalError:e,timedOut:t,timeout:r,isMaxBuffer:n,maxBuffer:o,errorCode:i,signal:s,signalDescription:a,exitCode:c,isCanceled:f,isGracefullyCanceled:l,isForcefullyTerminated:u,forceKillAfterDelay:d,killSignal:p})=>{let m=Qd(u,d);return t?`Command timed out after ${r} milliseconds${m}`:l?s===void 0?`Command was gracefully canceled with exit code ${c}`:u?`Command was gracefully canceled${m}`:`Command was gracefully canceled with ${s} (${a})`:f?`Command was canceled${m}`:n?`${xa(e,o)}${m}`:i!==void 0?`Command failed with ${i}${m}`:u?`Command was killed with ${p} (${ht(p)})${m}`:s!==void 0?`Command was killed with ${s} (${a})`:c!==void 0?`Command failed with exit code ${c}`:"Command failed"},Qd=(e,t)=>e?` and was forcefully terminated after ${t} milliseconds`:"",ep=(e,t)=>{if(e instanceof L)return;let r=Ui(e)?e.originalMessage:String(e?.message??e),n=Be(ta(r,t));return n===""?void 0:n},tp=e=>typeof e=="string"?e:(0,Oa.inspect)(e),rp=e=>Array.isArray(e)?e.map(t=>we(Aa(t))).filter(Boolean).join(`
`):Aa(e),Aa=e=>typeof e=="string"?e:T(e)?Qe(e):"";var jt=({command:e,escapedCommand:t,stdio:r,all:n,ipcOutput:o,options:{cwd:i},startTime:s})=>Ra({command:e,escapedCommand:t,cwd:i,durationMs:Tr(s),failed:!1,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isTerminated:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,exitCode:0,stdout:r[1],stderr:r[2],all:n,stdio:r,ipcOutput:o,pipedFrom:[]}),Ee=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:s})=>ke({error:e,command:t,escapedCommand:r,startTime:i,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,stdio:Array.from({length:n.length}),ipcOutput:[],options:o,isSync:s}),ke=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:f,signal:l,stdio:u,all:d,ipcOutput:p,options:{timeoutDuration:m,timeout:S=m,forceKillAfterDelay:E,killSignal:w,cwd:A,maxBuffer:I},isSync:C})=>{let{exitCode:z,signal:H,signalDescription:ne}=op(f,l),{originalMessage:fe,shortMessage:K,message:pr}=Ia({stdio:u,all:d,ipcOutput:p,originalError:e,signal:H,signalDescription:ne,exitCode:z,escapedCommand:r,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,forceKillAfterDelay:E,killSignal:w,maxBuffer:I,timeout:S,cwd:A}),Pe=vi(e,pr,C);return Object.assign(Pe,np({error:Pe,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:z,signal:H,signalDescription:ne,stdio:u,all:d,ipcOutput:p,cwd:A,originalMessage:fe,shortMessage:K})),Pe},np=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:f,signal:l,signalDescription:u,stdio:d,all:p,ipcOutput:m,cwd:S,originalMessage:E,shortMessage:w})=>Ra({shortMessage:w,originalMessage:E,command:t,escapedCommand:r,cwd:S,durationMs:Tr(n),failed:!0,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isTerminated:l!==void 0,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:f,signal:l,signalDescription:u,code:e.cause?.code,stdout:d[1],stderr:d[2],all:p,stdio:d,ipcOutput:m,pipedFrom:[]}),Ra=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)),op=(e,t)=>{let r=e===null?void 0:e,n=t===null?void 0:t,o=n===void 0?void 0:ht(t);return{exitCode:r,signal:n,signalDescription:o}};var Da=e=>Number.isFinite(e)?e:0;function ip(e){return{days:Math.trunc(e/864e5),hours:Math.trunc(e/36e5%24),minutes:Math.trunc(e/6e4%60),seconds:Math.trunc(e/1e3%60),milliseconds:Math.trunc(e%1e3),microseconds:Math.trunc(Da(e*1e3)%1e3),nanoseconds:Math.trunc(Da(e*1e6)%1e3)}}function sp(e){return{days:e/86400000n,hours:e/3600000n%24n,minutes:e/60000n%60n,seconds:e/1000n%60n,milliseconds:e%1000n,microseconds:0n,nanoseconds:0n}}function Qr(e){switch(typeof e){case"number":{if(Number.isFinite(e))return ip(e);break}case"bigint":return sp(e)}throw new TypeError("Expected a finite number or bigint")}var ap=e=>e===0||e===0n,cp=(e,t)=>t===1||t===1n?e:`${e}s`,lp=1e-7,fp=24n*60n*60n*1000n;function en(e,t){let r=typeof e=="bigint";if(!r&&!Number.isFinite(e))throw new TypeError("Expected a finite number or bigint");t={...t};let n=e<0?"-":"";e=e<0?-e:e,t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.unitCount=1,t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);let o=[],i=(l,u)=>{let d=Math.floor(l*10**u+lp);return(Math.round(d)/10**u).toFixed(u)},s=(l,u,d,p)=>{if(!((o.length===0||!t.colonNotation)&&ap(l)&&!(t.colonNotation&&d==="m"))){if(p??=String(l),t.colonNotation){let m=p.includes(".")?p.split(".")[0].length:p.length,S=o.length>0?2:1;p="0".repeat(Math.max(0,S-m))+p}else p+=t.verbose?" "+cp(u,l):d;o.push(p)}},a=Qr(e),c=BigInt(a.days);if(s(c/365n,"year","y"),s(c%365n,"day","d"),s(Number(a.hours),"hour","h"),s(Number(a.minutes),"minute","m"),t.separateMilliseconds||t.formatSubMilliseconds||!t.colonNotation&&e<1e3){let l=Number(a.seconds),u=Number(a.milliseconds),d=Number(a.microseconds),p=Number(a.nanoseconds);if(s(l,"second","s"),t.formatSubMilliseconds)s(u,"millisecond","ms"),s(d,"microsecond","\xB5s"),s(p,"nanosecond","ns");else{let m=u+d/1e3+p/1e6,S=typeof t.millisecondsDecimalDigits=="number"?t.millisecondsDecimalDigits:0,E=m>=1?Math.round(m):Math.ceil(m),w=S?m.toFixed(S):E;s(Number.parseFloat(w),"millisecond","ms",w)}}else{let l=(r?Number(e%fp):e)/1e3%60,u=typeof t.secondsDecimalDigits=="number"?t.secondsDecimalDigits:1,d=i(l,u),p=t.keepDecimalsOnWholeSeconds?d:d.replace(/\.0+$/,"");s(Number.parseFloat(p),"second","s",p)}if(o.length===0)return n+"0"+(t.verbose?" milliseconds":"ms");let f=t.colonNotation?":":" ";return typeof t.unitCount=="number"&&(o=o.slice(0,Math.max(t.unitCount,1))),n+o.join(f)}var Ca=(e,t)=>{e.failed&&U({type:"error",verboseMessage:e.shortMessage,verboseInfo:t,result:e})};var Ma=(e,t)=>{de(t)&&(Ca(e,t),up(e,t))},up=(e,t)=>{let r=`(done in ${en(e.durationMs)})`;U({type:"duration",verboseMessage:r,verboseInfo:t,result:e})};var Te=(e,t,{reject:r})=>{if(Ma(e,t),e.failed&&r)throw e;return e};var ln=require("node:fs");var Ba=(e,t)=>se(e)?"asyncGenerator":$a(e)?"generator":kt(e)?"fileUrl":gp(e)?"filePath":yp(e)?"webStream":$(e,{checkOpen:!1})?"native":T(e)?"uint8Array":bp(e)?"asyncIterable":wp(e)?"iterable":nn(e)?La({transform:e},t):hp(e)?dp(e,t):"native",dp=(e,t)=>Kr(e.transform,{checkOpen:!1})?pp(e,t):nn(e.transform)?La(e,t):mp(e,t),pp=(e,t)=>(va(e,t,"Duplex stream"),"duplex"),La=(e,t)=>(va(e,t,"web TransformStream"),"webTransform"),va=({final:e,binary:t,objectMode:r},n,o)=>{Pa(e,`${n}.final`,o),Pa(t,`${n}.binary`,o),tn(r,`${n}.objectMode`)},Pa=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${t}\` option can only be defined when using a generator, not a ${r}.`)},mp=({transform:e,final:t,binary:r,objectMode:n},o)=>{if(e!==void 0&&!Fa(e))throw new TypeError(`The \`${o}.transform\` option must be a generator, a Duplex stream or a web TransformStream.`);if(Kr(t,{checkOpen:!1}))throw new TypeError(`The \`${o}.final\` option must not be a Duplex stream.`);if(nn(t))throw new TypeError(`The \`${o}.final\` option must not be a web TransformStream.`);if(t!==void 0&&!Fa(t))throw new TypeError(`The \`${o}.final\` option must be a generator.`);return tn(r,`${o}.binary`),tn(n,`${o}.objectMode`),se(e)||se(t)?"asyncGenerator":"generator"},tn=(e,t)=>{if(e!==void 0&&typeof e!="boolean")throw new TypeError(`The \`${t}\` option must use a boolean.`)},Fa=e=>se(e)||$a(e),se=e=>Object.prototype.toString.call(e)==="[object AsyncGeneratorFunction]",$a=e=>Object.prototype.toString.call(e)==="[object GeneratorFunction]",hp=e=>x(e)&&(e.transform!==void 0||e.final!==void 0),kt=e=>Object.prototype.toString.call(e)==="[object URL]",Ua=e=>kt(e)&&e.protocol!=="file:",gp=e=>x(e)&&Object.keys(e).length===1&&rn(e.file),rn=e=>typeof e=="string",Na=(e,t)=>e==="native"&&typeof t=="string"&&!Sp.has(t),Sp=new Set(["ipc","ignore","inherit","overlapped","pipe"]),_a=e=>Object.prototype.toString.call(e)==="[object ReadableStream]",Gt=e=>Object.prototype.toString.call(e)==="[object WritableStream]",yp=e=>_a(e)||Gt(e),nn=e=>_a(e?.readable)&&Gt(e?.writable),bp=e=>ja(e)&&typeof e[Symbol.asyncIterator]=="function",wp=e=>ja(e)&&typeof e[Symbol.iterator]=="function",ja=e=>typeof e=="object"&&e!==null,P=new Set(["generator","asyncGenerator","duplex","webTransform"]),zt=new Set(["fileUrl","filePath","fileNumber"]),on=new Set(["fileUrl","filePath"]),ka=new Set([...on,"webStream","nodeStream"]),Ga=new Set(["webTransform","duplex"]),Q={generator:"a generator",asyncGenerator:"an async generator",fileUrl:"a file URL",filePath:"a file path string",fileNumber:"a file descriptor number",webStream:"a web stream",nodeStream:"a Node.js stream",webTransform:"a web TransformStream",duplex:"a Duplex stream",native:"any value",iterable:"an iterable",asyncIterable:"an async iterable",string:"a string",uint8Array:"a Uint8Array"};var sn=(e,t,r,n)=>n==="output"?xp(e,t,r):Ep(e,t,r),xp=(e,t,r)=>{let n=t!==0&&r[t-1].value.readableObjectMode;return{writableObjectMode:n,readableObjectMode:e??n}},Ep=(e,t,r)=>{let n=t===0?e===!0:r[t-1].value.readableObjectMode,o=t!==r.length-1&&(e??n);return{writableObjectMode:n,readableObjectMode:o}},za=(e,t)=>{let r=e.findLast(({type:n})=>P.has(n));return r===void 0?!1:t==="input"?r.value.writableObjectMode:r.value.readableObjectMode};var Wa=(e,t,r,n)=>[...e.filter(({type:o})=>!P.has(o)),...Tp(e,t,r,n)],Tp=(e,t,r,{encoding:n})=>{let o=e.filter(({type:s})=>P.has(s)),i=Array.from({length:o.length});for(let[s,a]of Object.entries(o))i[s]=Ap({stdioItem:a,index:Number(s),newTransforms:i,optionName:t,direction:r,encoding:n});return Dp(i,r)},Ap=({stdioItem:e,stdioItem:{type:t},index:r,newTransforms:n,optionName:o,direction:i,encoding:s})=>t==="duplex"?Op({stdioItem:e,optionName:o}):t==="webTransform"?Ip({stdioItem:e,index:r,newTransforms:n,direction:i}):Rp({stdioItem:e,index:r,newTransforms:n,direction:i,encoding:s}),Op=({stdioItem:e,stdioItem:{value:{transform:t,transform:{writableObjectMode:r,readableObjectMode:n},objectMode:o=n}},optionName:i})=>{if(o&&!n)throw new TypeError(`The \`${i}.objectMode\` option can only be \`true\` if \`new Duplex({objectMode: true})\` is used.`);if(!o&&n)throw new TypeError(`The \`${i}.objectMode\` option cannot be \`false\` if \`new Duplex({objectMode: true})\` is used.`);return{...e,value:{transform:t,writableObjectMode:r,readableObjectMode:n}}},Ip=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o})=>{let{transform:i,objectMode:s}=x(t)?t:{transform:t},{writableObjectMode:a,readableObjectMode:c}=sn(s,r,n,o);return{...e,value:{transform:i,writableObjectMode:a,readableObjectMode:c}}},Rp=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o,encoding:i})=>{let{transform:s,final:a,binary:c=!1,preserveNewlines:f=!1,objectMode:l}=x(t)?t:{transform:t},u=c||D.has(i),{writableObjectMode:d,readableObjectMode:p}=sn(l,r,n,o);return{...e,value:{transform:s,final:a,binary:u,preserveNewlines:f,writableObjectMode:d,readableObjectMode:p}}},Dp=(e,t)=>t==="input"?e.reverse():e;var Wt=O(require("node:process"),1);var Va=(e,t,r)=>{let n=e.map(o=>Cp(o,t));if(n.includes("input")&&n.includes("output"))throw new TypeError(`The \`${r}\` option must not be an array of both readable and writable values.`);return n.find(Boolean)??Fp},Cp=({type:e,value:t},r)=>Mp[r]??Ya[e](t),Mp=["input","output","output"],Ae=()=>{},an=()=>"input",Ya={generator:Ae,asyncGenerator:Ae,fileUrl:Ae,filePath:Ae,iterable:an,asyncIterable:an,uint8Array:an,webStream:e=>Gt(e)?"output":"input",nodeStream(e){return ie(e,{checkOpen:!1})?Hr(e,{checkOpen:!1})?void 0:"input":"output"},webTransform:Ae,duplex:Ae,native(e){let t=Pp(e);if(t!==void 0)return t;if($(e,{checkOpen:!1}))return Ya.nodeStream(e)}},Pp=e=>{if([0,Wt.default.stdin].includes(e))return"input";if([1,2,Wt.default.stdout,Wt.default.stderr].includes(e))return"output"},Fp="output";var qa=(e,t)=>t&&!e.includes("ipc")?[...e,"ipc"]:e;var Ha=({stdio:e,ipc:t,buffer:r,...n},o,i)=>{let s=Bp(e,n).map((a,c)=>Ka(a,c));return i?vp(s,r,o):qa(s,t)},Bp=(e,t)=>{if(e===void 0)return M.map(n=>t[n]);if(Lp(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${M.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return[e,e,e];if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,M.length);return Array.from({length:r},(n,o)=>e[o])},Lp=e=>M.some(t=>e[t]!==void 0),Ka=(e,t)=>Array.isArray(e)?e.map(r=>Ka(r,t)):e??(t>=M.length?"ignore":"pipe"),vp=(e,t,r)=>e.map((n,o)=>!t[o]&&o!==0&&!pe(r,o)&&$p(n)?"ignore":n),$p=e=>e==="pipe"||Array.isArray(e)&&e.every(t=>t==="pipe");var Za=require("node:fs"),Ja=O(require("node:tty"),1);var Qa=({stdioItem:e,stdioItem:{type:t},isStdioArray:r,fdNumber:n,direction:o,isSync:i})=>!r||t!=="native"?e:i?Up({stdioItem:e,fdNumber:n,direction:o}):jp({stdioItem:e,fdNumber:n}),Up=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n,direction:o})=>{let i=Np({value:t,optionName:r,fdNumber:n,direction:o});if(i!==void 0)return i;if($(t,{checkOpen:!1}))throw new TypeError(`The \`${r}: Stream\` option cannot both be an array and include a stream with synchronous methods.`);return e},Np=({value:e,optionName:t,fdNumber:r,direction:n})=>{let o=_p(e,r);if(o!==void 0){if(n==="output")return{type:"fileNumber",value:o,optionName:t};if(Ja.default.isatty(o))throw new TypeError(`The \`${t}: ${yt(e)}\` option is invalid: it cannot be a TTY with synchronous methods.`);return{type:"uint8Array",value:W((0,Za.readFileSync)(o)),optionName:t}}},_p=(e,t)=>{if(e==="inherit")return t;if(typeof e=="number")return e;let r=tt.indexOf(e);if(r!==-1)return r},jp=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n})=>t==="inherit"?{type:"nodeStream",value:Xa(n,t,r),optionName:r}:typeof t=="number"?{type:"nodeStream",value:Xa(t,t,r),optionName:r}:$(t,{checkOpen:!1})?{type:"nodeStream",value:t,optionName:r}:e,Xa=(e,t,r)=>{let n=tt[e];if(n===void 0)throw new TypeError(`The \`${r}: ${t}\` option is invalid: no such standard stream.`);return n};var ec=({input:e,inputFile:t},r)=>r===0?[...kp(e),...zp(t)]:[],kp=e=>e===void 0?[]:[{type:Gp(e),value:e,optionName:"input"}],Gp=e=>{if(ie(e,{checkOpen:!1}))return"nodeStream";if(typeof e=="string")return"string";if(T(e))return"uint8Array";throw new Error("The `input` option must be a string, a Uint8Array or a Node.js Readable stream.")},zp=e=>e===void 0?[]:[{...Wp(e),optionName:"inputFile"}],Wp=e=>{if(kt(e))return{type:"fileUrl",value:e};if(rn(e))return{type:"filePath",value:{file:e}};throw new Error("The `inputFile` option must be a file path string or a file URL.")};var tc=e=>e.filter((t,r)=>e.every((n,o)=>t.value!==n.value||r>=o||t.type==="generator"||t.type==="asyncGenerator")),rc=({stdioItem:{type:e,value:t,optionName:r},direction:n,fileDescriptors:o,isSync:i})=>{let s=Vp(o,e);if(s.length!==0){if(i){Yp({otherStdioItems:s,type:e,value:t,optionName:r,direction:n});return}if(ka.has(e))return nc({otherStdioItems:s,type:e,value:t,optionName:r,direction:n});Ga.has(e)&&Hp({otherStdioItems:s,type:e,value:t,optionName:r})}},Vp=(e,t)=>e.flatMap(({direction:r,stdioItems:n})=>n.filter(o=>o.type===t).map(o=>({...o,direction:r}))),Yp=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{on.has(t)&&nc({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})},nc=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{let i=e.filter(a=>qp(a,r));if(i.length===0)return;let s=i.find(a=>a.direction!==o);return oc(s,n,t),o==="output"?i[0].stream:void 0},qp=({type:e,value:t},r)=>e==="filePath"?t.file===r.file:e==="fileUrl"?t.href===r.href:t===r,Hp=({otherStdioItems:e,type:t,value:r,optionName:n})=>{let o=e.find(({value:{transform:i}})=>i===r.transform);oc(o,n,t)},oc=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${e.optionName}\` and \`${t}\` options must not target ${Q[r]} that is the same.`)};var Vt=(e,t,r,n)=>{let i=Ha(t,r,n).map((a,c)=>Kp({stdioOption:a,fdNumber:c,options:t,isSync:n})),s=nm({initialFileDescriptors:i,addProperties:e,options:t,isSync:n});return t.stdio=s.map(({stdioItems:a})=>sm(a)),s},Kp=({stdioOption:e,fdNumber:t,options:r,isSync:n})=>{let o=rt(t),{stdioItems:i,isStdioArray:s}=Xp({stdioOption:e,fdNumber:t,options:r,optionName:o}),a=Va(i,t,o),c=i.map(u=>Qa({stdioItem:u,isStdioArray:s,fdNumber:t,direction:a,isSync:n})),f=Wa(c,o,a,r),l=za(f,a);return rm(f,l),{direction:a,objectMode:l,stdioItems:f}},Xp=({stdioOption:e,fdNumber:t,options:r,optionName:n})=>{let i=[...(Array.isArray(e)?e:[e]).map(c=>Zp(c,n)),...ec(r,t)],s=tc(i),a=s.length>1;return Jp(s,a,n),em(s),{stdioItems:s,isStdioArray:a}},Zp=(e,t)=>({type:Ba(e,t),value:e,optionName:t}),Jp=(e,t,r)=>{if(e.length===0)throw new TypeError(`The \`${r}\` option must not be an empty array.`);if(t){for(let{value:n,optionName:o}of e)if(Qp.has(n))throw new Error(`The \`${o}\` option must not include \`${n}\`.`)}},Qp=new Set(["ignore","ipc"]),em=e=>{for(let t of e)tm(t)},tm=({type:e,value:t,optionName:r})=>{if(Ua(t))throw new TypeError(`The \`${r}: URL\` option must use the \`file:\` scheme.
For example, you can use the \`pathToFileURL()\` method of the \`url\` core module.`);if(Na(e,t))throw new TypeError(`The \`${r}: { file: '...' }\` option must be used instead of \`${r}: '...'\`.`)},rm=(e,t)=>{if(!t)return;let r=e.find(({type:n})=>zt.has(n));if(r!==void 0)throw new TypeError(`The \`${r.optionName}\` option cannot use both files and transforms in objectMode.`)},nm=({initialFileDescriptors:e,addProperties:t,options:r,isSync:n})=>{let o=[];try{for(let i of e)o.push(om({fileDescriptor:i,fileDescriptors:o,addProperties:t,options:r,isSync:n}));return o}catch(i){throw cn(o),i}},om=({fileDescriptor:{direction:e,objectMode:t,stdioItems:r},fileDescriptors:n,addProperties:o,options:i,isSync:s})=>{let a=r.map(c=>im({stdioItem:c,addProperties:o,direction:e,options:i,fileDescriptors:n,isSync:s}));return{direction:e,objectMode:t,stdioItems:a}},im=({stdioItem:e,addProperties:t,direction:r,options:n,fileDescriptors:o,isSync:i})=>{let s=rc({stdioItem:e,direction:r,fileDescriptors:o,isSync:i});return s!==void 0?{...e,stream:s}:{...e,...t[r][e.type](e,n)}},cn=e=>{for(let{stdioItems:t}of e)for(let{stream:r}of t)r!==void 0&&!B(r)&&r.destroy()},sm=e=>{if(e.length>1)return e.some(({value:n})=>n==="overlapped")?"overlapped":"pipe";let[{type:t,value:r}]=e;return t==="native"?r:"pipe"};var sc=(e,t)=>Vt(cm,e,t,!0),k=({type:e,optionName:t})=>{ac(t,Q[e])},am=({optionName:e,value:t})=>((t==="ipc"||t==="overlapped")&&ac(e,`"${t}"`),{}),ac=(e,t)=>{throw new TypeError(`The \`${e}\` option cannot be ${t} with synchronous methods.`)},ic={generator(){},asyncGenerator:k,webStream:k,nodeStream:k,webTransform:k,duplex:k,asyncIterable:k,native:am},cm={input:{...ic,fileUrl:({value:e})=>({contents:[W((0,ln.readFileSync)(e))]}),filePath:({value:{file:e}})=>({contents:[W((0,ln.readFileSync)(e))]}),fileNumber:k,iterable:({value:e})=>({contents:[...e]}),string:({value:e})=>({contents:[e]}),uint8Array:({value:e})=>({contents:[e]})},output:{...ic,fileUrl:({value:e})=>({path:e}),filePath:({value:{file:e}})=>({path:e}),fileNumber:({value:e})=>({path:e}),iterable:k,string:k,uint8Array:k}};var q=(e,{stripFinalNewline:t},r)=>fn(t,r)&&e!==void 0&&!Array.isArray(e)?we(e):e,fn=(e,t)=>t==="all"?e[1]||e[2]:e[t];var ze=require("node:stream");var Yt=(e,t,r,n)=>e||r?void 0:lc(t,n),dn=(e,t,r)=>r?e.flatMap(n=>cc(n,t)):cc(e,t),cc=(e,t)=>{let{transform:r,final:n}=lc(t,{});return[...r(e),...n()]},lc=(e,t)=>(t.previousChunks="",{transform:lm.bind(void 0,t,e),final:um.bind(void 0,t)}),lm=function*(e,t,r){if(typeof r!="string"){yield r;return}let{previousChunks:n}=e,o=-1;for(let i=0;i<r.length;i+=1)if(r[i]===`
`){let s=fm(r,i,t,e),a=r.slice(o+1,i+1-s);n.length>0&&(a=un(n,a),n=""),yield a,o=i}o!==r.length-1&&(n=un(n,r.slice(o+1))),e.previousChunks=n},fm=(e,t,r,n)=>r?0:(n.isWindowsNewline=t!==0&&e[t-1]==="\r",n.isWindowsNewline?2:1),um=function*({previousChunks:e}){e.length>0&&(yield e)},fc=({binary:e,preserveNewlines:t,readableObjectMode:r,state:n})=>e||t||r?void 0:{transform:dm.bind(void 0,n)},dm=function*({isWindowsNewline:e=!1},t){let{unixNewline:r,windowsNewline:n,LF:o,concatBytes:i}=typeof t=="string"?pm:hm;if(t.at(-1)===o){yield t;return}yield i(t,e?n:r)},un=(e,t)=>`${e}${t}`,pm={windowsNewline:`\r
`,unixNewline:`
`,LF:`
`,concatBytes:un},mm=(e,t)=>{let r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r},hm={windowsNewline:new Uint8Array([13,10]),unixNewline:new Uint8Array([10]),LF:10,concatBytes:mm};var uc=require("node:buffer");var dc=(e,t)=>e?void 0:gm.bind(void 0,t),gm=function*(e,t){if(typeof t!="string"&&!T(t)&&!uc.Buffer.isBuffer(t))throw new TypeError(`The \`${e}\` option's transform must use "objectMode: true" to receive as input: ${typeof t}.`);yield t},pc=(e,t)=>e?Sm.bind(void 0,t):ym.bind(void 0,t),Sm=function*(e,t){mc(e,t),yield t},ym=function*(e,t){if(mc(e,t),typeof t!="string"&&!T(t))throw new TypeError(`The \`${e}\` option's function must yield a string or an Uint8Array, not ${typeof t}.`);yield t},mc=(e,t)=>{if(t==null)throw new TypeError(`The \`${e}\` option's function must not call \`yield ${t}\`.
Instead, \`yield\` should either be called with a value, or not be called at all. For example:
  if (condition) { yield value; }`)};var hc=require("node:buffer"),gc=require("node:string_decoder");var qt=(e,t,r)=>{if(r)return;if(e)return{transform:bm.bind(void 0,new TextEncoder)};let n=new gc.StringDecoder(t);return{transform:wm.bind(void 0,n),final:xm.bind(void 0,n)}},bm=function*(e,t){hc.Buffer.isBuffer(t)?yield W(t):typeof t=="string"?yield e.encode(t):yield t},wm=function*(e,t){yield T(t)?e.write(t):t},xm=function*(e){let t=e.end();t!==""&&(yield t)};var pn=require("node:util"),mn=(0,pn.callbackify)(async(e,t,r,n)=>{t.currentIterable=e(...r);try{for await(let o of t.currentIterable)n.push(o)}finally{delete t.currentIterable}}),Ht=async function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=Tm}=t[r];for await(let o of n(e))yield*Ht(o,t,r+1)},Sc=async function*(e){for(let[t,{final:r}]of Object.entries(e))yield*Em(r,Number(t),e)},Em=async function*(e,t,r){if(e!==void 0)for await(let n of e())yield*Ht(n,r,t+1)},yc=(0,pn.callbackify)(async({currentIterable:e},t)=>{if(e!==void 0){await(t?e.throw(t):e.return());return}if(t)throw t}),Tm=function*(e){yield e};var hn=(e,t,r,n)=>{try{for(let o of e(...t))r.push(o);n()}catch(o){n(o)}},bc=(e,t)=>[...t.flatMap(r=>[...ae(r,e,0)]),...Ge(e)],ae=function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=Om}=t[r];for(let o of n(e))yield*ae(o,t,r+1)},Ge=function*(e){for(let[t,{final:r}]of Object.entries(e))yield*Am(r,Number(t),e)},Am=function*(e,t,r){if(e!==void 0)for(let n of e())yield*ae(n,r,t+1)},Om=function*(e){yield e};var gn=({value:e,value:{transform:t,final:r,writableObjectMode:n,readableObjectMode:o},optionName:i},{encoding:s})=>{let a={},c=wc(e,s,i),f=se(t),l=se(r),u=f?mn.bind(void 0,Ht,a):hn.bind(void 0,ae),d=f||l?mn.bind(void 0,Sc,a):hn.bind(void 0,Ge),p=f||l?yc.bind(void 0,a):void 0;return{stream:new ze.Transform({writableObjectMode:n,writableHighWaterMark:(0,ze.getDefaultHighWaterMark)(n),readableObjectMode:o,readableHighWaterMark:(0,ze.getDefaultHighWaterMark)(o),transform(S,E,w){u([S,c,0],this,w)},flush(S){d([c],this,S)},destroy:p})}},Kt=(e,t,r,n)=>{let o=t.filter(({type:s})=>s==="generator"),i=n?o.reverse():o;for(let{value:s,optionName:a}of i){let c=wc(s,r,a);e=bc(c,e)}return e},wc=({transform:e,final:t,binary:r,writableObjectMode:n,readableObjectMode:o,preserveNewlines:i},s,a)=>{let c={};return[{transform:dc(n,a)},qt(r,s,n),Yt(r,i,n,c),{transform:e,final:t},{transform:pc(o,a)},fc({binary:r,preserveNewlines:i,readableObjectMode:o,state:c})].filter(Boolean)};var xc=(e,t)=>{for(let r of Im(e))Rm(e,r,t)},Im=e=>new Set(Object.entries(e).filter(([,{direction:t}])=>t==="input").map(([t])=>Number(t))),Rm=(e,t,r)=>{let{stdioItems:n}=e[t],o=n.filter(({contents:a})=>a!==void 0);if(o.length===0)return;if(t!==0){let[{type:a,optionName:c}]=o;throw new TypeError(`Only the \`stdin\` option, not \`${c}\`, can be ${Q[a]} with synchronous methods.`)}let s=o.map(({contents:a})=>a).map(a=>Dm(a,n));r.input=Fe(s)},Dm=(e,t)=>{let r=Kt(e,t,"utf8",!0);return Cm(r),Fe(r)},Cm=e=>{let t=e.find(r=>typeof r!="string"&&!T(r));if(t!==void 0)throw new TypeError(`The \`stdin\` option is invalid: when passing objects as input, a transform must be used to serialize them to strings or Uint8Arrays: ${t}.`)};var Zt=require("node:fs");var Xt=({stdioItems:e,encoding:t,verboseInfo:r,fdNumber:n})=>n!=="all"&&pe(r,n)&&!D.has(t)&&Mm(n)&&(e.some(({type:o,value:i})=>o==="native"&&Pm.has(i))||e.every(({type:o})=>P.has(o))),Mm=e=>e===1||e===2,Pm=new Set(["pipe","overlapped"]),Ec=async(e,t,r,n)=>{for await(let o of e)Fm(t)||Ac(o,r,n)},Tc=(e,t,r)=>{for(let n of e)Ac(n,t,r)},Fm=e=>e._readableState.pipes.length>0,Ac=(e,t,r)=>{let n=ct(e);U({type:"output",verboseMessage:n,fdNumber:t,verboseInfo:r})};var Oc=({fileDescriptors:e,syncResult:{output:t},options:r,isMaxBuffer:n,verboseInfo:o})=>{if(t===null)return{output:Array.from({length:3})};let i={},s=new Set([]);return{output:t.map((c,f)=>Bm({result:c,fileDescriptors:e,fdNumber:f,state:i,outputFiles:s,isMaxBuffer:n,verboseInfo:o},r)),...i}},Bm=({result:e,fileDescriptors:t,fdNumber:r,state:n,outputFiles:o,isMaxBuffer:i,verboseInfo:s},{buffer:a,encoding:c,lines:f,stripFinalNewline:l,maxBuffer:u})=>{if(e===null)return;let d=Ta(e,i,u),p=W(d),{stdioItems:m,objectMode:S}=t[r],E=Lm([p],m,c,n),{serializedResult:w,finalResult:A=w}=vm({chunks:E,objectMode:S,encoding:c,lines:f,stripFinalNewline:l,fdNumber:r});$m({serializedResult:w,fdNumber:r,state:n,verboseInfo:s,encoding:c,stdioItems:m,objectMode:S});let I=a[r]?A:void 0;try{return n.error===void 0&&Um(w,m,o),I}catch(C){return n.error=C,I}},Lm=(e,t,r,n)=>{try{return Kt(e,t,r,!1)}catch(o){return n.error=o,e}},vm=({chunks:e,objectMode:t,encoding:r,lines:n,stripFinalNewline:o,fdNumber:i})=>{if(t)return{serializedResult:e};if(r==="buffer")return{serializedResult:Fe(e)};let s=mo(e,r);return n[i]?{serializedResult:s,finalResult:dn(s,!o[i],t)}:{serializedResult:s}},$m=({serializedResult:e,fdNumber:t,state:r,verboseInfo:n,encoding:o,stdioItems:i,objectMode:s})=>{if(!Xt({stdioItems:i,encoding:o,verboseInfo:n,fdNumber:t}))return;let a=dn(e,!1,s);try{Tc(a,t,n)}catch(c){r.error??=c}},Um=(e,t,r)=>{for(let{path:n}of t.filter(({type:o})=>zt.has(o))){let o=typeof n=="string"?n:n.toString();r.has(o)?(0,Zt.appendFileSync)(n,e):(r.add(o),(0,Zt.writeFileSync)(n,e))}};var Ic=([,e,t],r)=>{if(r.all)return e===void 0?t:t===void 0?e:Array.isArray(e)?Array.isArray(t)?[...e,...t]:[...e,q(t,r,"all")]:Array.isArray(t)?[q(e,r,"all"),...t]:T(e)&&T(t)?hr([e,t]):`${e}${t}`};var Jt=require("node:events");var Rc=async(e,t)=>{let[r,n]=await Nm(e);return t.isForcefullyTerminated??=!1,[r,n]},Nm=async e=>{let[t,r]=await Promise.allSettled([(0,Jt.once)(e,"spawn"),(0,Jt.once)(e,"exit")]);return t.status==="rejected"?[]:r.status==="rejected"?Dc(e):r.value},Dc=async e=>{try{return await(0,Jt.once)(e,"exit")}catch{return Dc(e)}},Cc=async e=>{let[t,r]=await e;if(!_m(t,r)&&Sn(t,r))throw new L;return[t,r]},_m=(e,t)=>e===void 0&&t===void 0,Sn=(e,t)=>e!==0||t!==null;var Mc=({error:e,status:t,signal:r,output:n},{maxBuffer:o})=>{let i=jm(e,t,r),s=i?.code==="ETIMEDOUT",a=Ea(i,n,o);return{resultError:i,exitCode:t,signal:r,timedOut:s,isMaxBuffer:a}},jm=(e,t,r)=>e!==void 0?e:Sn(t,r)?new L:void 0;var Fc=(e,t,r)=>{let{file:n,commandArguments:o,command:i,escapedCommand:s,startTime:a,verboseInfo:c,options:f,fileDescriptors:l}=km(e,t,r),u=Wm({file:n,commandArguments:o,options:f,command:i,escapedCommand:s,verboseInfo:c,fileDescriptors:l,startTime:a});return Te(u,c,f)},km=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:s}=ft(e,t,r),a=Gm(r),{file:c,commandArguments:f,options:l}=Pt(e,t,a);zm(l);let u=sc(l,s);return{file:c,commandArguments:f,command:n,escapedCommand:o,startTime:i,verboseInfo:s,options:l,fileDescriptors:u}},Gm=e=>e.node&&!e.ipc?{...e,ipc:!1}:e,zm=({ipc:e,ipcInput:t,detached:r,cancelSignal:n})=>{t&&Qt("ipcInput"),e&&Qt("ipc: true"),r&&Qt("detached: true"),n&&Qt("cancelSignal")},Qt=e=>{throw new TypeError(`The "${e}" option cannot be used with synchronous methods.`)},Wm=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,verboseInfo:i,fileDescriptors:s,startTime:a})=>{let c=Vm({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:s,startTime:a});if(c.failed)return c;let{resultError:f,exitCode:l,signal:u,timedOut:d,isMaxBuffer:p}=Mc(c,r),{output:m,error:S=f}=Oc({fileDescriptors:s,syncResult:c,options:r,isMaxBuffer:p,verboseInfo:i}),E=m.map((A,I)=>q(A,r,I)),w=q(Ic(m,r),r,"all");return qm({error:S,exitCode:l,signal:u,timedOut:d,isMaxBuffer:p,stdio:E,all:w,options:r,command:n,escapedCommand:o,startTime:a})},Vm=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:i,startTime:s})=>{try{xc(i,r);let a=Ym(r);return(0,Pc.spawnSync)(e,t,a)}catch(a){return Ee({error:a,command:n,escapedCommand:o,fileDescriptors:i,options:r,startTime:s,isSync:!0})}},Ym=({encoding:e,maxBuffer:t,...r})=>({...r,encoding:"buffer",maxBuffer:_t(t)}),qm=({error:e,exitCode:t,signal:r,timedOut:n,isMaxBuffer:o,stdio:i,all:s,options:a,command:c,escapedCommand:f,startTime:l})=>e===void 0?jt({command:c,escapedCommand:f,stdio:i,all:s,ipcOutput:[],options:a,startTime:l}):ke({error:e,command:c,escapedCommand:f,timedOut:n,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:o,isForcefullyTerminated:!1,exitCode:t,signal:r,stdio:i,all:s,ipcOutput:[],options:a,startTime:l,isSync:!0});var jl=require("node:events"),kl=require("node:child_process");var bn=O(require("node:process"),1);var Oe=require("node:events");var Bc=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0,filter:i}={})=>(Se({methodName:"getOneMessage",isSubprocess:r,ipc:n,isConnected:At(e)}),Hm({anyProcess:e,channel:t,isSubprocess:r,filter:i,reference:o})),Hm=async({anyProcess:e,channel:t,isSubprocess:r,filter:n,reference:o})=>{wt(t,o);let i=J(e,t,r),s=new AbortController;try{return await Promise.race([Km(i,n,s),Xm(i,r,s),Zm(i,r,s)])}catch(a){throw ye(e),a}finally{s.abort(),xt(t,o)}},Km=async(e,t,{signal:r})=>{if(t===void 0){let[n]=await(0,Oe.once)(e,"message",{signal:r});return n}for await(let[n]of(0,Oe.on)(e,"message",{signal:r}))if(t(n))return n},Xm=async(e,t,{signal:r})=>{await(0,Oe.once)(e,"disconnect",{signal:r}),rs(t)},Zm=async(e,t,{signal:r})=>{let[n]=await(0,Oe.once)(e,"strict:error",{signal:r});throw St(n,t)};var We=require("node:events");var vc=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0}={})=>yn({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:!r,reference:o}),yn=({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:o,reference:i})=>{Se({methodName:"getEachMessage",isSubprocess:r,ipc:n,isConnected:At(e)}),wt(t,i);let s=J(e,t,r),a=new AbortController,c={};return Jm(e,s,a),Qm({ipcEmitter:s,isSubprocess:r,controller:a,state:c}),eh({anyProcess:e,channel:t,ipcEmitter:s,isSubprocess:r,shouldAwait:o,controller:a,state:c,reference:i})},Jm=async(e,t,r)=>{try{await(0,We.once)(t,"disconnect",{signal:r.signal}),r.abort()}catch{}},Qm=async({ipcEmitter:e,isSubprocess:t,controller:r,state:n})=>{try{let[o]=await(0,We.once)(e,"strict:error",{signal:r.signal});n.error=St(o,t),r.abort()}catch{}},eh=async function*({anyProcess:e,channel:t,ipcEmitter:r,isSubprocess:n,shouldAwait:o,controller:i,state:s,reference:a}){try{for await(let[c]of(0,We.on)(r,"message",{signal:i.signal}))Lc(s),yield c}catch{Lc(s)}finally{i.abort(),xt(t,a),n||ye(e),o&&await e}},Lc=({error:e})=>{if(e)throw e};var $c=(e,{ipc:t})=>{Object.assign(e,Nc(e,!1,t))},Uc=()=>{let e=bn.default,t=!0,r=bn.default.channel!==void 0;return{...Nc(e,t,r),getCancelSignal:$s.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})}},Nc=(e,t,r)=>({sendMessage:Dt.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getOneMessage:Bc.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getEachMessage:vc.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})});var _c=require("node:child_process"),ee=require("node:stream");var jc=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,verboseInfo:s})=>{cn(n);let a=new _c.ChildProcess;th(a,n),Object.assign(a,{readable:rh,writable:nh,duplex:oh});let c=Ee({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:!1}),f=ih(c,s,o);return{subprocess:a,promise:f}},th=(e,t)=>{let r=Ve(),n=Ve(),o=Ve(),i=Array.from({length:t.length-3},Ve),s=Ve(),a=[r,n,o,...i];Object.assign(e,{stdin:r,stdout:n,stderr:o,all:s,stdio:a})},Ve=()=>{let e=new ee.PassThrough;return e.end(),e},rh=()=>new ee.Readable({read(){}}),nh=()=>new ee.Writable({write(){}}),oh=()=>new ee.Duplex({read(){},write(){}}),ih=async(e,t,r)=>Te(e,t,r);var Ie=require("node:fs"),Gc=require("node:buffer"),G=require("node:stream");var zc=(e,t)=>Vt(sh,e,t,!1),Ye=({type:e,optionName:t})=>{throw new TypeError(`The \`${t}\` option cannot be ${Q[e]}.`)},kc={fileNumber:Ye,generator:gn,asyncGenerator:gn,nodeStream:({value:e})=>({stream:e}),webTransform({value:{transform:e,writableObjectMode:t,readableObjectMode:r}}){let n=t||r;return{stream:G.Duplex.fromWeb(e,{objectMode:n})}},duplex:({value:{transform:e}})=>({stream:e}),native(){}},sh={input:{...kc,fileUrl:({value:e})=>({stream:(0,Ie.createReadStream)(e)}),filePath:({value:{file:e}})=>({stream:(0,Ie.createReadStream)(e)}),webStream:({value:e})=>({stream:G.Readable.fromWeb(e)}),iterable:({value:e})=>({stream:G.Readable.from(e)}),asyncIterable:({value:e})=>({stream:G.Readable.from(e)}),string:({value:e})=>({stream:G.Readable.from(e)}),uint8Array:({value:e})=>({stream:G.Readable.from(Gc.Buffer.from(e))})},output:{...kc,fileUrl:({value:e})=>({stream:(0,Ie.createWriteStream)(e)}),filePath:({value:{file:e}})=>({stream:(0,Ie.createWriteStream)(e)}),webStream:({value:e})=>({stream:G.Writable.fromWeb(e)}),iterable:Ye,asyncIterable:Ye,string:Ye,uint8Array:Ye}};var qe=require("node:events"),tr=require("node:stream"),En=require("node:stream/promises");function ce(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got \`${typeof e}\`.`);for(let o of e)xn(o);let t=e.some(({readableObjectMode:o})=>o),r=ah(e,t),n=new wn({objectMode:t,writableHighWaterMark:r,readableHighWaterMark:r});for(let o of e)n.add(o);return n}var ah=(e,t)=>{if(e.length===0)return(0,tr.getDefaultHighWaterMark)(t);let r=e.filter(({readableObjectMode:n})=>n===t).map(({readableHighWaterMark:n})=>n);return Math.max(...r)},wn=class extends tr.PassThrough{#t=new Set([]);#r=new Set([]);#e=new Set([]);#n;#i=Symbol("unpipe");#o=new WeakMap;add(t){if(xn(t),this.#t.has(t))return;this.#t.add(t),this.#n??=ch(this,this.#t,this.#i);let r=uh({passThroughStream:this,stream:t,streams:this.#t,ended:this.#r,aborted:this.#e,onFinished:this.#n,unpipeEvent:this.#i});this.#o.set(t,r),t.pipe(this,{end:!1})}async remove(t){if(xn(t),!this.#t.has(t))return!1;let r=this.#o.get(t);return r===void 0?!1:(this.#o.delete(t),t.unpipe(this),await r,!0)}},ch=async(e,t,r)=>{er(e,Wc);let n=new AbortController;try{await Promise.race([lh(e,n),fh(e,t,r,n)])}finally{n.abort(),er(e,-Wc)}},lh=async(e,{signal:t})=>{try{await(0,En.finished)(e,{signal:t,cleanup:!0})}catch(r){throw Yc(e,r),r}},fh=async(e,t,r,{signal:n})=>{for await(let[o]of(0,qe.on)(e,"unpipe",{signal:n}))t.has(o)&&o.emit(r)},xn=e=>{if(typeof e?.pipe!="function")throw new TypeError(`Expected a readable stream, got: \`${typeof e}\`.`)},uh=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,onFinished:i,unpipeEvent:s})=>{er(e,Vc);let a=new AbortController;try{await Promise.race([dh(i,t,a),ph({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:a}),mh({stream:t,streams:r,ended:n,aborted:o,unpipeEvent:s,controller:a})])}finally{a.abort(),er(e,-Vc)}r.size>0&&r.size===n.size+o.size&&(n.size===0&&o.size>0?Tn(e):hh(e))},dh=async(e,t,{signal:r})=>{try{await e,r.aborted||Tn(t)}catch(n){r.aborted||Yc(t,n)}},ph=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:{signal:i}})=>{try{await(0,En.finished)(t,{signal:i,cleanup:!0,readable:!0,writable:!1}),r.has(t)&&n.add(t)}catch(s){if(i.aborted||!r.has(t))return;qc(s)?o.add(t):Hc(e,s)}},mh=async({stream:e,streams:t,ended:r,aborted:n,unpipeEvent:o,controller:{signal:i}})=>{if(await(0,qe.once)(e,o,{signal:i}),!e.readable)return(0,qe.once)(i,"abort",{signal:i});t.delete(e),r.delete(e),n.delete(e)},hh=e=>{e.writable&&e.end()},Yc=(e,t)=>{qc(t)?Tn(e):Hc(e,t)},qc=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",Tn=e=>{(e.readable||e.writable)&&e.destroy()},Hc=(e,t)=>{e.destroyed||(e.once("error",gh),e.destroy(t))},gh=()=>{},er=(e,t)=>{let r=e.getMaxListeners();r!==0&&r!==Number.POSITIVE_INFINITY&&e.setMaxListeners(r+t)},Wc=2,Vc=1;var An=require("node:stream/promises");var Re=(e,t)=>{e.pipe(t),Sh(e,t),yh(e,t)},Sh=async(e,t)=>{if(!(B(e)||B(t))){try{await(0,An.finished)(e,{cleanup:!0,readable:!0,writable:!1})}catch{}On(t)}},On=e=>{e.writable&&e.end()},yh=async(e,t)=>{if(!(B(e)||B(t))){try{await(0,An.finished)(t,{cleanup:!0,readable:!1,writable:!0})}catch{}In(e)}},In=e=>{e.readable&&e.destroy()};var Kc=(e,t,r)=>{let n=new Map;for(let[o,{stdioItems:i,direction:s}]of Object.entries(t)){for(let{stream:a}of i.filter(({type:c})=>P.has(c)))bh(e,a,s,o);for(let{stream:a}of i.filter(({type:c})=>!P.has(c)))xh({subprocess:e,stream:a,direction:s,fdNumber:o,pipeGroups:n,controller:r})}for(let[o,i]of n.entries()){let s=i.length===1?i[0]:ce(i);Re(s,o)}},bh=(e,t,r,n)=>{r==="output"?Re(e.stdio[n],t):Re(t,e.stdio[n]);let o=wh[n];o!==void 0&&(e[o]=t),e.stdio[n]=t},wh=["stdin","stdout","stderr"],xh=({subprocess:e,stream:t,direction:r,fdNumber:n,pipeGroups:o,controller:i})=>{if(t===void 0)return;Eh(t,i);let[s,a]=r==="output"?[t,e.stdio[n]]:[e.stdio[n],t],c=o.get(s)??[];o.set(s,[...c,a])},Eh=(e,{signal:t})=>{B(e)&&oe(e,Th,t)},Th=2;var Zc=require("node:events");var le=[];le.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&le.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&le.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var rr=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Rn=Symbol.for("signal-exit emitter"),Dn=globalThis,Ah=Object.defineProperty.bind(Object),Cn=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Dn[Rn])return Dn[Rn];Ah(Dn,Rn,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],o=n.indexOf(r);o!==-1&&(o===0&&n.length===1?n.length=0:n.splice(o,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let o=!1;for(let i of this.listeners[t])o=i(r,n)===!0||o;return t==="exit"&&(o=this.emit("afterExit",r,n)||o),o}},nr=class{},Oh=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Mn=class extends nr{onExit(){return()=>{}}load(){}unload(){}},Pn=class extends nr{#t=Fn.platform==="win32"?"SIGINT":"SIGHUP";#r=new Cn;#e;#n;#i;#o={};#s=!1;constructor(t){super(),this.#e=t,this.#o={};for(let r of le)this.#o[r]=()=>{let n=this.#e.listeners(r),{count:o}=this.#r,i=t;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(o+=i.__signal_exit_emitter__.count),n.length===o){this.unload();let s=this.#r.emit("exit",null,r),a=r==="SIGHUP"?this.#t:r;s||t.kill(t.pid,a)}};this.#i=t.reallyExit,this.#n=t.emit}onExit(t,r){if(!rr(this.#e))return()=>{};this.#s===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#r.on(n,t),()=>{this.#r.removeListener(n,t),this.#r.listeners.exit.length===0&&this.#r.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#s){this.#s=!0,this.#r.count+=1;for(let t of le)try{let r=this.#o[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#c(t,...r),this.#e.reallyExit=t=>this.#a(t)}}unload(){this.#s&&(this.#s=!1,le.forEach(t=>{let r=this.#o[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#n,this.#e.reallyExit=this.#i,this.#r.count-=1)}#a(t){return rr(this.#e)?(this.#e.exitCode=t||0,this.#r.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#c(t,...r){let n=this.#n;if(t==="exit"&&rr(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let o=n.call(this.#e,t,...r);return this.#r.emit("exit",this.#e.exitCode,null),o}else return n.call(this.#e,t,...r)}},Fn=globalThis.process,{onExit:Xc,load:mT,unload:hT}=Oh(rr(Fn)?new Pn(Fn):new Mn);var Jc=(e,{cleanup:t,detached:r},{signal:n})=>{if(!t||r)return;let o=Xc(()=>{e.kill()});(0,Zc.addAbortListener)(n,()=>{o()})};var el=({source:e,sourcePromise:t,boundOptions:r,createNested:n},...o)=>{let i=lt(),{destination:s,destinationStream:a,destinationError:c,from:f,unpipeSignal:l}=Ih(r,n,o),{sourceStream:u,sourceError:d}=Dh(e,f),{options:p,fileDescriptors:m}=_.get(e);return{sourcePromise:t,sourceStream:u,sourceOptions:p,sourceError:d,destination:s,destinationStream:a,destinationError:c,unpipeSignal:l,fileDescriptors:m,startTime:i}},Ih=(e,t,r)=>{try{let{destination:n,pipeOptions:{from:o,to:i,unpipeSignal:s}={}}=Rh(e,t,...r),a=bt(n,i);return{destination:n,destinationStream:a,from:o,unpipeSignal:s}}catch(n){return{destinationError:n}}},Rh=(e,t,r,...n)=>{if(Array.isArray(r))return{destination:t(Qc,e)(r,...n),pipeOptions:e};if(typeof r=="string"||r instanceof URL){if(Object.keys(e).length>0)throw new TypeError('Please use .pipe("file", ..., options) or .pipe(execa("file", ..., options)) instead of .pipe(options)("file", ...).');let[o,i,s]=Je(r,...n);return{destination:t(Qc)(o,i,s),pipeOptions:s}}if(_.has(r)){if(Object.keys(e).length>0)throw new TypeError("Please use .pipe(options)`command` or .pipe($(options)`command`) instead of .pipe(options)($`command`).");return{destination:r,pipeOptions:n[0]}}throw new TypeError(`The first argument must be a template string, an options object, or an Execa subprocess: ${r}`)},Qc=({options:e})=>({options:{...e,stdin:"pipe",piped:!0}}),Dh=(e,t)=>{try{return{sourceStream:be(e,t)}}catch(r){return{sourceError:r}}};var rl=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n,fileDescriptors:o,sourceOptions:i,startTime:s})=>{let a=Ch({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n});if(a!==void 0)throw Bn({error:a,fileDescriptors:o,sourceOptions:i,startTime:s})},Ch=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n})=>{if(t!==void 0&&n!==void 0)return n;if(n!==void 0)return In(e),n;if(t!==void 0)return On(r),t},Bn=({error:e,fileDescriptors:t,sourceOptions:r,startTime:n})=>Ee({error:e,command:tl,escapedCommand:tl,fileDescriptors:t,options:r,startTime:n,isSync:!1}),tl="source.pipe(destination)";var nl=async e=>{let[{status:t,reason:r,value:n=r},{status:o,reason:i,value:s=i}]=await e;if(s.pipedFrom.includes(n)||s.pipedFrom.push(n),o==="rejected")throw s;if(t==="rejected")throw n;return s};var ol=require("node:stream/promises");var il=(e,t,r)=>{let n=or.has(t)?Ph(e,t):Mh(e,t);return oe(e,Bh,r.signal),oe(t,Lh,r.signal),Fh(t),n},Mh=(e,t)=>{let r=ce([e]);return Re(r,t),or.set(t,r),r},Ph=(e,t)=>{let r=or.get(t);return r.add(e),r},Fh=async e=>{try{await(0,ol.finished)(e,{cleanup:!0,readable:!1,writable:!0})}catch{}or.delete(e)},or=new WeakMap,Bh=2,Lh=1;var sl=require("node:util");var al=(e,t)=>e===void 0?[]:[vh(e,t)],vh=async(e,{sourceStream:t,mergedStream:r,fileDescriptors:n,sourceOptions:o,startTime:i})=>{await(0,sl.aborted)(e,t),await r.remove(t);let s=new Error("Pipe canceled by `unpipeSignal` option.");throw Bn({error:s,fileDescriptors:n,sourceOptions:o,startTime:i})};var ir=(e,...t)=>{if(x(t[0]))return ir.bind(void 0,{...e,boundOptions:{...e.boundOptions,...t[0]}});let{destination:r,...n}=el(e,...t),o=$h({...n,destination:r});return o.pipe=ir.bind(void 0,{...e,source:r,sourcePromise:o,boundOptions:{}}),o},$h=async({sourcePromise:e,sourceStream:t,sourceOptions:r,sourceError:n,destination:o,destinationStream:i,destinationError:s,unpipeSignal:a,fileDescriptors:c,startTime:f})=>{let l=Uh(e,o);rl({sourceStream:t,sourceError:n,destinationStream:i,destinationError:s,fileDescriptors:c,sourceOptions:r,startTime:f});let u=new AbortController;try{let d=il(t,i,u);return await Promise.race([nl(l),...al(a,{sourceStream:t,mergedStream:d,sourceOptions:r,fileDescriptors:c,startTime:f})])}finally{u.abort()}},Uh=(e,t)=>Promise.allSettled([e,t]);var dl=require("node:timers/promises");var ll=require("node:events"),fl=require("node:stream");var sr=({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:n,encoding:o,preserveNewlines:i})=>{let s=new AbortController;return Nh(t,s),ul({stream:e,controller:s,binary:r,shouldEncode:!e.readableObjectMode&&n,encoding:o,shouldSplit:!e.readableObjectMode,preserveNewlines:i})},Nh=async(e,t)=>{try{await e}catch{}finally{t.abort()}},Ln=({stream:e,onStreamEnd:t,lines:r,encoding:n,stripFinalNewline:o,allMixed:i})=>{let s=new AbortController;_h(t,s,e);let a=e.readableObjectMode&&!i;return ul({stream:e,controller:s,binary:n==="buffer",shouldEncode:!a,encoding:n,shouldSplit:!a&&r,preserveNewlines:!o})},_h=async(e,t,r)=>{try{await e}catch{r.destroy()}finally{t.abort()}},ul=({stream:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s})=>{let a=(0,ll.on)(e,"data",{signal:t.signal,highWaterMark:cl,highWatermark:cl});return jh({onStdoutChunk:a,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s})},vn=(0,fl.getDefaultHighWaterMark)(!0),cl=vn,jh=async function*({onStdoutChunk:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s}){let a=kh({binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s});try{for await(let[c]of e)yield*ae(c,a,0)}catch(c){if(!t.signal.aborted)throw c}finally{yield*Ge(a)}},kh=({binary:e,shouldEncode:t,encoding:r,shouldSplit:n,preserveNewlines:o})=>[qt(e,r,!t),Yt(e,o,!n,{})].filter(Boolean);var pl=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,buffer:o,maxBuffer:i,lines:s,allMixed:a,stripFinalNewline:c,verboseInfo:f,streamInfo:l})=>{let u=Gh({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:a,verboseInfo:f,streamInfo:l});if(!o){await Promise.all([zh(e),u]);return}let d=fn(c,r),p=Ln({stream:e,onStreamEnd:t,lines:s,encoding:n,stripFinalNewline:d,allMixed:a}),[m]=await Promise.all([Wh({stream:e,iterable:p,fdNumber:r,encoding:n,maxBuffer:i,lines:s}),u]);return m},Gh=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:o,verboseInfo:i,streamInfo:{fileDescriptors:s}})=>{if(!Xt({stdioItems:s[r]?.stdioItems,encoding:n,verboseInfo:i,fdNumber:r}))return;let a=Ln({stream:e,onStreamEnd:t,lines:!0,encoding:n,stripFinalNewline:!0,allMixed:o});await Ec(a,e,r,i)},zh=async e=>{await(0,dl.setImmediate)(),e.readableFlowing===null&&e.resume()},Wh=async({stream:e,stream:{readableObjectMode:t},iterable:r,fdNumber:n,encoding:o,maxBuffer:i,lines:s})=>{try{return t||s?await vt(r,{maxBuffer:i}):o==="buffer"?new Uint8Array(await $t(r,{maxBuffer:i})):await Nt(r,{maxBuffer:i})}catch(a){return ml(ba({error:a,stream:e,readableObjectMode:t,lines:s,encoding:o,fdNumber:n}))}},$n=async e=>{try{return await e}catch(t){return ml(t)}},ml=({bufferedData:e})=>uo(e)?new Uint8Array(e):e;var gl=require("node:stream/promises"),He=async(e,t,r,{isSameDirection:n,stopOnExit:o=!1}={})=>{let i=Vh(e,r),s=new AbortController;try{await Promise.race([...o?[r.exitPromise]:[],(0,gl.finished)(e,{cleanup:!0,signal:s.signal})])}catch(a){i.stdinCleanedUp||Hh(a,t,r,n)}finally{s.abort()}},Vh=(e,{originalStreams:[t],subprocess:r})=>{let n={stdinCleanedUp:!1};return e===t&&Yh(e,r,n),n},Yh=(e,t,r)=>{let{_destroy:n}=e;e._destroy=(...o)=>{qh(t,r),n.call(e,...o)}},qh=({exitCode:e,signalCode:t},r)=>{(e!==null||t!==null)&&(r.stdinCleanedUp=!0)},Hh=(e,t,r,n)=>{if(!Kh(e,t,r,n))throw e},Kh=(e,t,r,n=!0)=>r.propagating?hl(e)||ar(e):(r.propagating=!0,Un(r,t)===n?hl(e):ar(e)),Un=({fileDescriptors:e},t)=>t!=="all"&&e[t].direction==="input",ar=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",hl=e=>e?.code==="EPIPE";var Sl=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:s,streamInfo:a})=>e.stdio.map((c,f)=>Nn({stream:c,fdNumber:f,encoding:t,buffer:r[f],maxBuffer:n[f],lines:o[f],allMixed:!1,stripFinalNewline:i,verboseInfo:s,streamInfo:a})),Nn=async({stream:e,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:s,stripFinalNewline:a,verboseInfo:c,streamInfo:f})=>{if(!e)return;let l=He(e,t,f);if(Un(f,t)){await l;return}let[u]=await Promise.all([pl({stream:e,onStreamEnd:l,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:s,stripFinalNewline:a,verboseInfo:c,streamInfo:f}),l]);return u};var yl=({stdout:e,stderr:t},{all:r})=>r&&(e||t)?ce([e,t].filter(Boolean)):void 0,bl=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:s,streamInfo:a})=>Nn({...Xh(e,r),fdNumber:"all",encoding:t,maxBuffer:n[1]+n[2],lines:o[1]||o[2],allMixed:Zh(e),stripFinalNewline:i,verboseInfo:s,streamInfo:a}),Xh=({stdout:e,stderr:t,all:r},[,n,o])=>{let i=n||o;return i?n?o?{stream:r,buffer:i}:{stream:e,buffer:i}:{stream:t,buffer:i}:{stream:r,buffer:i}},Zh=({all:e,stdout:t,stderr:r})=>e&&t&&r&&t.readableObjectMode!==r.readableObjectMode;var Al=require("node:events");var wl=e=>pe(e,"ipc"),xl=(e,t)=>{let r=ct(e);U({type:"ipc",verboseMessage:r,fdNumber:"ipc",verboseInfo:t})};var El=async({subprocess:e,buffer:t,maxBuffer:r,ipc:n,ipcOutput:o,verboseInfo:i})=>{if(!n)return o;let s=wl(i),a=V(t,"ipc"),c=V(r,"ipc");for await(let f of yn({anyProcess:e,channel:e.channel,isSubprocess:!1,ipc:n,shouldAwait:!1,reference:!0}))a&&(wa(e,o,c),o.push(f)),s&&xl(f,i);return o},Tl=async(e,t)=>(await Promise.allSettled([e]),t);var Ol=async({subprocess:e,options:{encoding:t,buffer:r,maxBuffer:n,lines:o,timeoutDuration:i,cancelSignal:s,gracefulCancel:a,forceKillAfterDelay:c,stripFinalNewline:f,ipc:l,ipcInput:u},context:d,verboseInfo:p,fileDescriptors:m,originalStreams:S,onInternalError:E,controller:w})=>{let A=Rc(e,d),I={originalStreams:S,fileDescriptors:m,subprocess:e,exitPromise:A,propagating:!1},C=Sl({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:f,verboseInfo:p,streamInfo:I}),z=bl({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:f,verboseInfo:p,streamInfo:I}),H=[],ne=El({subprocess:e,buffer:r,maxBuffer:n,ipc:l,ipcOutput:H,verboseInfo:p}),fe=Jh(S,e,I),K=Qh(m,I);try{return await Promise.race([Promise.all([{},Cc(A),Promise.all(C),z,ne,qs(e,u),...fe,...K]),E,eg(e,w),...Gs(e,i,d,w),...ts({subprocess:e,cancelSignal:s,gracefulCancel:a,context:d,controller:w}),..._s({subprocess:e,cancelSignal:s,gracefulCancel:a,forceKillAfterDelay:c,context:d,controller:w})])}catch(pr){return d.terminationReason??="other",Promise.all([{error:pr},A,Promise.all(C.map(Pe=>$n(Pe))),$n(z),Tl(ne,H),Promise.allSettled(fe),Promise.allSettled(K)])}},Jh=(e,t,r)=>e.map((n,o)=>n===t.stdio[o]?void 0:He(n,o,r)),Qh=(e,t)=>e.flatMap(({stdioItems:r},n)=>r.filter(({value:o,stream:i=o})=>$(i,{checkOpen:!1})&&!B(i)).map(({type:o,value:i,stream:s=i})=>He(s,n,t,{isSameDirection:P.has(o),stopOnExit:o==="native"}))),eg=async(e,{signal:t})=>{let[r]=await(0,Al.once)(e,"error",{signal:t});throw r};var Il=()=>({readableDestroy:new WeakMap,writableFinal:new WeakMap,writableDestroy:new WeakMap}),Ke=(e,t,r)=>{let n=e[r];n.has(t)||n.set(t,[]);let o=n.get(t),i=N();return o.push(i),{resolve:i.resolve.bind(i),promises:o}},De=async({resolve:e,promises:t},r)=>{e();let[n]=await Promise.race([Promise.allSettled([!0,r]),Promise.all([!1,...t])]);return!n};var Dl=require("node:stream"),Cl=require("node:util");var _n=require("node:stream/promises");var jn=async e=>{if(e!==void 0)try{await kn(e)}catch{}},Rl=async e=>{if(e!==void 0)try{await Gn(e)}catch{}},kn=async e=>{await(0,_n.finished)(e,{cleanup:!0,readable:!1,writable:!0})},Gn=async e=>{await(0,_n.finished)(e,{cleanup:!0,readable:!0,writable:!1})},cr=async(e,t)=>{if(await e,t)throw t},lr=(e,t,r)=>{r&&!ar(r)?e.destroy(r):t&&e.destroy()};var Ml=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,binary:o=!0,preserveNewlines:i=!0}={})=>{let s=o||D.has(r),{subprocessStdout:a,waitReadableDestroy:c}=zn(e,n,t),{readableEncoding:f,readableObjectMode:l,readableHighWaterMark:u}=Wn(a,s),{read:d,onStdoutDataDone:p}=Vn({subprocessStdout:a,subprocess:e,binary:s,encoding:r,preserveNewlines:i}),m=new Dl.Readable({read:d,destroy:(0,Cl.callbackify)(qn.bind(void 0,{subprocessStdout:a,subprocess:e,waitReadableDestroy:c})),highWaterMark:u,objectMode:l,encoding:f});return Yn({subprocessStdout:a,onStdoutDataDone:p,readable:m,subprocess:e}),m},zn=(e,t,r)=>{let n=be(e,t),o=Ke(r,n,"readableDestroy");return{subprocessStdout:n,waitReadableDestroy:o}},Wn=({readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r},n)=>n?{readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r}:{readableEncoding:e,readableObjectMode:!0,readableHighWaterMark:vn},Vn=({subprocessStdout:e,subprocess:t,binary:r,encoding:n,preserveNewlines:o})=>{let i=N(),s=sr({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:!r,encoding:n,preserveNewlines:o});return{read(){tg(this,s,i)},onStdoutDataDone:i}},tg=async(e,t,r)=>{try{let{value:n,done:o}=await t.next();o?r.resolve():e.push(n)}catch{}},Yn=async({subprocessStdout:e,onStdoutDataDone:t,readable:r,subprocess:n,subprocessStdin:o})=>{try{await Gn(e),await n,await jn(o),await t,r.readable&&r.push(null)}catch(i){await jn(o),Pl(r,i)}},qn=async({subprocessStdout:e,subprocess:t,waitReadableDestroy:r},n)=>{await De(r,t)&&(Pl(e,n),await cr(t,n))},Pl=(e,t)=>{lr(e,e.readable,t)};var Fl=require("node:stream"),Hn=require("node:util");var Bl=({subprocess:e,concurrentStreams:t},{to:r}={})=>{let{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}=Kn(e,r,t),s=new Fl.Writable({...Xn(n,e,o),destroy:(0,Hn.callbackify)(Jn.bind(void 0,{subprocessStdin:n,subprocess:e,waitWritableFinal:o,waitWritableDestroy:i})),highWaterMark:n.writableHighWaterMark,objectMode:n.writableObjectMode});return Zn(n,s),s},Kn=(e,t,r)=>{let n=bt(e,t),o=Ke(r,n,"writableFinal"),i=Ke(r,n,"writableDestroy");return{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}},Xn=(e,t,r)=>({write:rg.bind(void 0,e),final:(0,Hn.callbackify)(ng.bind(void 0,e,t,r))}),rg=(e,t,r,n)=>{e.write(t,r)?n():e.once("drain",n)},ng=async(e,t,r)=>{await De(r,t)&&(e.writable&&e.end(),await t)},Zn=async(e,t,r)=>{try{await kn(e),t.writable&&t.end()}catch(n){await Rl(r),Ll(t,n)}},Jn=async({subprocessStdin:e,subprocess:t,waitWritableFinal:r,waitWritableDestroy:n},o)=>{await De(r,t),await De(n,t)&&(Ll(e,o),await cr(t,o))},Ll=(e,t)=>{lr(e,e.writable,t)};var vl=require("node:stream"),$l=require("node:util");var Ul=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,to:o,binary:i=!0,preserveNewlines:s=!0}={})=>{let a=i||D.has(r),{subprocessStdout:c,waitReadableDestroy:f}=zn(e,n,t),{subprocessStdin:l,waitWritableFinal:u,waitWritableDestroy:d}=Kn(e,o,t),{readableEncoding:p,readableObjectMode:m,readableHighWaterMark:S}=Wn(c,a),{read:E,onStdoutDataDone:w}=Vn({subprocessStdout:c,subprocess:e,binary:a,encoding:r,preserveNewlines:s}),A=new vl.Duplex({read:E,...Xn(l,e,u),destroy:(0,$l.callbackify)(og.bind(void 0,{subprocessStdout:c,subprocessStdin:l,subprocess:e,waitReadableDestroy:f,waitWritableFinal:u,waitWritableDestroy:d})),readableHighWaterMark:S,writableHighWaterMark:l.writableHighWaterMark,readableObjectMode:m,writableObjectMode:l.writableObjectMode,encoding:p});return Yn({subprocessStdout:c,onStdoutDataDone:w,readable:A,subprocess:e,subprocessStdin:l}),Zn(l,A,c),A},og=async({subprocessStdout:e,subprocessStdin:t,subprocess:r,waitReadableDestroy:n,waitWritableFinal:o,waitWritableDestroy:i},s)=>{await Promise.all([qn({subprocessStdout:e,subprocess:r,waitReadableDestroy:n},s),Jn({subprocessStdin:t,subprocess:r,waitWritableFinal:o,waitWritableDestroy:i},s)])};var Qn=(e,t,{from:r,binary:n=!1,preserveNewlines:o=!1}={})=>{let i=n||D.has(t),s=be(e,r),a=sr({subprocessStdout:s,subprocess:e,binary:i,shouldEncode:!0,encoding:t,preserveNewlines:o});return ig(a,s,e)},ig=async function*(e,t,r){try{yield*e}finally{t.readable&&t.destroy(),await r}};var Nl=(e,{encoding:t})=>{let r=Il();e.readable=Ml.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.writable=Bl.bind(void 0,{subprocess:e,concurrentStreams:r}),e.duplex=Ul.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.iterable=Qn.bind(void 0,e,t),e[Symbol.asyncIterator]=Qn.bind(void 0,e,t,{})};var _l=(e,t)=>{for(let[r,n]of ag){let o=n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}},sg=(async()=>{})().constructor.prototype,ag=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(sg,e)]);var Gl=(e,t,r,n)=>{let{file:o,commandArguments:i,command:s,escapedCommand:a,startTime:c,verboseInfo:f,options:l,fileDescriptors:u}=cg(e,t,r),{subprocess:d,promise:p}=fg({file:o,commandArguments:i,options:l,startTime:c,verboseInfo:f,command:s,escapedCommand:a,fileDescriptors:u});return d.pipe=ir.bind(void 0,{source:d,sourcePromise:p,boundOptions:{},createNested:n}),_l(d,p),_.set(d,{options:l,fileDescriptors:u}),d},cg=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:s}=ft(e,t,r),{file:a,commandArguments:c,options:f}=Pt(e,t,r),l=lg(f),u=zc(l,s);return{file:a,commandArguments:c,command:n,escapedCommand:o,startTime:i,verboseInfo:s,options:l,fileDescriptors:u}},lg=({timeout:e,signal:t,...r})=>{if(t!==void 0)throw new TypeError('The "signal" option has been renamed to "cancelSignal" instead.');return{...r,timeoutDuration:e}},fg=({file:e,commandArguments:t,options:r,startTime:n,verboseInfo:o,command:i,escapedCommand:s,fileDescriptors:a})=>{let c;try{c=(0,kl.spawn)(e,t,r)}catch(m){return jc({error:m,command:i,escapedCommand:s,fileDescriptors:a,options:r,startTime:n,verboseInfo:o})}let f=new AbortController;(0,jl.setMaxListeners)(Number.POSITIVE_INFINITY,f.signal);let l=[...c.stdio];Kc(c,a,f),Jc(c,r,f);let u={},d=N();c.kill=Ji.bind(void 0,{kill:c.kill.bind(c),options:r,onInternalError:d,context:u,controller:f}),c.all=yl(c,r),Nl(c,r),$c(c,r);let p=ug({subprocess:c,options:r,startTime:n,verboseInfo:o,fileDescriptors:a,originalStreams:l,command:i,escapedCommand:s,context:u,onInternalError:d,controller:f});return{subprocess:c,promise:p}},ug=async({subprocess:e,options:t,startTime:r,verboseInfo:n,fileDescriptors:o,originalStreams:i,command:s,escapedCommand:a,context:c,onInternalError:f,controller:l})=>{let[u,[d,p],m,S,E]=await Ol({subprocess:e,options:t,context:c,verboseInfo:n,fileDescriptors:o,originalStreams:i,onInternalError:f,controller:l});l.abort(),f.resolve();let w=m.map((C,z)=>q(C,t,z)),A=q(S,t,"all"),I=dg({errorInfo:u,exitCode:d,signal:p,stdio:w,all:A,ipcOutput:E,context:c,options:t,command:s,escapedCommand:a,startTime:r});return Te(I,n,t)},dg=({errorInfo:e,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,context:s,options:a,command:c,escapedCommand:f,startTime:l})=>"error"in e?ke({error:e.error,command:c,escapedCommand:f,timedOut:s.terminationReason==="timeout",isCanceled:s.terminationReason==="cancel"||s.terminationReason==="gracefulCancel",isGracefullyCanceled:s.terminationReason==="gracefulCancel",isMaxBuffer:e.error instanceof j,isForcefullyTerminated:s.isForcefullyTerminated,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,options:a,startTime:l,isSync:!1}):jt({command:c,escapedCommand:f,stdio:n,all:o,ipcOutput:i,options:a,startTime:l});var fr=(e,t)=>{let r=Object.fromEntries(Object.entries(t).map(([n,o])=>[n,pg(n,e[n],o)]));return{...e,...r}},pg=(e,t,r)=>mg.has(e)&&x(t)&&x(r)?{...t,...r}:r,mg=new Set(["env",...yr]);var te=(e,t,r,n)=>{let o=(s,a,c)=>te(s,a,r,c),i=(...s)=>hg({mapArguments:e,deepOptions:r,boundOptions:t,setBoundExeca:n,createNested:o},...s);return n!==void 0&&n(i,o,t),i},hg=({mapArguments:e,deepOptions:t={},boundOptions:r={},setBoundExeca:n,createNested:o},i,...s)=>{if(x(i))return o(e,fr(r,i),n);let{file:a,commandArguments:c,options:f,isSync:l}=gg({mapArguments:e,firstArgument:i,nextArguments:s,deepOptions:t,boundOptions:r});return l?Fc(a,c,f):Gl(a,c,f,o)},gg=({mapArguments:e,firstArgument:t,nextArguments:r,deepOptions:n,boundOptions:o})=>{let i=bo(t)?wo(t,r):[t,...r],[s,a,c]=Je(...i),f=fr(fr(n,o),c),{file:l=s,commandArguments:u=a,options:d=f,isSync:p=!1}=e({file:s,commandArguments:a,options:f});return{file:l,commandArguments:u,options:d,isSync:p}};var zl=({file:e,commandArguments:t})=>Vl(e,t),Wl=({file:e,commandArguments:t})=>({...Vl(e,t),isSync:!0}),Vl=(e,t)=>{if(t.length>0)throw new TypeError(`The command and its arguments must be passed as a single string: ${e} ${t}.`);let[r,...n]=Sg(e);return{file:r,commandArguments:n}},Sg=e=>{if(typeof e!="string")throw new TypeError(`The command must be a string: ${String(e)}.`);let t=e.trim();if(t==="")return[];let r=[];for(let n of t.split(yg)){let o=r.at(-1);o&&o.endsWith("\\")?r[r.length-1]=`${o.slice(0,-1)} ${n}`:r.push(n)}return r},yg=/ +/g;var Yl=(e,t,r)=>{e.sync=t(bg,r),e.s=e.sync},ql=({options:e})=>Hl(e),bg=({options:e})=>({...Hl(e),isSync:!0}),Hl=e=>({options:{...wg(e),...e}}),wg=({input:e,inputFile:t,stdio:r})=>e===void 0&&t===void 0&&r===void 0?{stdin:"inherit"}:{},Kl={preferLocal:!0};var _O=te(()=>({})),jO=te(()=>({isSync:!0})),Xl=te(zl),kO=te(Wl),GO=te(zs),zO=te(ql,{},Kl,Yl),{sendMessage:WO,getOneMessage:VO,getEachMessage:YO,getCancelSignal:qO}=Uc();function Zl(e){switch(e){case"started":return{source:F.Icon.Play,tintColor:F.Color.Green};case"running":return{source:F.Icon.PlayFilled,tintColor:F.Color.Green};case"error":return{source:F.Icon.ExclamationMark,tintColor:F.Color.Yellow};case"none":return{source:F.Icon.Stop,tintColor:F.Color.PrimaryText};default:return{source:F.Icon.QuestionMark,tintColor:F.Color.Red}}}async function Ce(e){let{stdout:t}=await Xl(e);return t}var eo=(0,g.getPreferenceValues)(),re=eo.brewPath&&eo.brewPath.length>0?eo.brewPath:(0,Ql.cpus)()[0].model.includes("Apple")?"/opt/homebrew/bin/brew":"/usr/local/bin/brew";async function Me(){if(!Jl.default.existsSync(re))return await(0,g.showToast)(g.Toast.Style.Failure,"Brew Executable Not Found",`Is brew installed at ${re}?`),[];let e="";try{e=await Ce(`${re} services list`)}catch{return await(0,g.showToast)(g.Toast.Style.Failure,"Error Fetching Service Data",`Is brew installed at ${re}?`),[]}e===void 0&&(0,g.showToast)(g.Toast.Style.Failure,"Error Parsing Service Data","Service data could not be parsed.");let t=e.split(`
`);if(t.length<=1)return(0,g.showToast)(g.Toast.Style.Failure,"Error Parsing Service Data","There are no services."),[];for(let n=0;n<t.length-1;n++)if(t[n].startsWith("Name")){t.splice(0,n+1);break}let r=[];for(let n of t){let o=n.trim().split(/ +/g);if(o.length<2)return(0,g.showToast)(g.Toast.Style.Failure,"Error Parsing Service Data","Service data could not be parsed."),[];let i=o[1];r.push({name:o[0],status:i,user:o.length>=4&&o.at(-2)||"",path:o.at(-1)??""})}return r}async function to(e){let t=new g.Toast({style:g.Toast.Style.Animated,title:"Stopping Service",message:`Stopping ${e=="--all"?"all services":e}`});if(t.show(),await Ce(`${re} services stop ${e}`),e==="--all"){t.style=g.Toast.Style.Success,t.title="Stopped All Services",t.message="Stopped all services";return}let r=await Me();for(let n of r)n.name===e&&(n.status==="stopped"?(t.style=g.Toast.Style.Success,t.title="Stopped Service",t.message=`Stopped ${e}`):(t.style=g.Toast.Style.Failure,t.title="Error Stopping Service",t.message=`${e} could not be stopped properly`))}async function ro(e){let t=new g.Toast({style:g.Toast.Style.Animated,title:"Starting Service",message:`Starting ${e=="--all"?"all services":e}`});if(t.show(),await Ce(`${re} services start ${e}`),e==="--all"){t.style=g.Toast.Style.Success,t.title="Started All Services",t.message="Started all services";return}let r=await Me();for(let n of r)n.name===e&&(n.status==="started"?(t.style=g.Toast.Style.Success,t.title="Started Service",t.message=`Started ${e}`):(t.style=g.Toast.Style.Failure,t.title="Error Starting Service",t.message=`${e} could not be started properly`))}async function no(e){let t=new g.Toast({style:g.Toast.Style.Animated,title:"Restarting Service",message:`Restarting ${e=="--all"?"all services":e}`});if(t.show(),await Ce(`${re} services restart ${e}`),e==="--all"){t.style=g.Toast.Style.Success,t.title="Restarted All Services",t.message="Restarted all services";return}let r=await Me();for(let n of r)n.name===e&&(n.status==="started"||n.status==="running"?(t.style=g.Toast.Style.Success,t.title="Restarted Service",t.message=`Restarted ${e}`):(t.style=g.Toast.Style.Failure,t.title="Error Restarting Service",t.message=`${e} could not be restarted properly`))}async function ef(e){let t=new g.Toast({style:g.Toast.Style.Animated,title:"Running Service",message:`Running ${e=="--all"?"all services":e}`});t.show(),await Ce(`${re} services run ${e}`);let r=await Me();if(e==="--all"){t.style=g.Toast.Style.Success,t.title="Ran All Services",t.message="Ran all services";return}r.find(o=>o.name===e).status==="running"?(t.style=g.Toast.Style.Success,t.title="Ran Service",t.message=`Ran ${e}`):(t.style=g.Toast.Style.Failure,t.title="Error Running Service",t.message=`${e} could not be run properly`)}var Xe=require("@raycast/api");var b=require("@raycast/api"),tf=require("os");var y=require("react/jsx-runtime");function io(e){return e.name=="--all"?(0,y.jsx)(b.Action,{icon:b.Icon.Stop,title:"Stop All Services",onAction:()=>to(e.name),shortcut:{modifiers:["cmd"],key:"x"}}):(0,y.jsx)(b.Action,{icon:b.Icon.Stop,title:"Stop Service",onAction:()=>to(e.name)})}function so(e){return e.name=="--all"?(0,y.jsx)(b.Action,{icon:b.Icon.RotateAntiClockwise,title:"Restart All Services",onAction:()=>no(e.name),shortcut:{modifiers:["cmd"],key:"r"}}):(0,y.jsx)(b.Action,{icon:b.Icon.RotateAntiClockwise,title:"Restart Service",onAction:()=>no(e.name)})}function rf(e){return e.name=="--all"?(0,y.jsx)(b.Action,{icon:b.Icon.Play,title:"Start All Services",onAction:()=>ro(e.name),shortcut:{modifiers:["cmd"],key:"s"}}):(0,y.jsx)(b.Action,{icon:b.Icon.Play,title:"Start Service",onAction:()=>ro(e.name)})}function xg(e){return(0,y.jsx)(b.Action,{icon:b.Icon.ForwardFilled,title:"Run Service",onAction:()=>ef(e.name)})}function Eg(e){let t=e.path.replace(/^~/,(0,tf.homedir)());return(0,y.jsxs)(b.ActionPanel.Section,{title:"Plist",children:[(0,y.jsx)(b.Action.ShowInFinder,{title:"Show Plist File in Finder",path:t,shortcut:{modifiers:["cmd"],key:"f"}}),(0,y.jsx)(b.Action.OpenWith,{title:"Open Plist File With",path:t,shortcut:b.Keyboard.Shortcut.Common.OpenWith}),(0,y.jsx)(b.Action.CopyToClipboard,{title:"Copy Plist File Path",content:t,shortcut:b.Keyboard.Shortcut.Common.CopyPath})]})}function oo(){return(0,y.jsxs)(b.ActionPanel.Section,{title:"Manage All Services",children:[(0,y.jsx)(rf,{name:"--all"}),(0,y.jsx)(io,{name:"--all"}),(0,y.jsx)(so,{name:"--all"})]})}function nf(e){return e.data.status==="started"||e.data.status==="running"?(0,y.jsxs)(b.ActionPanel,{children:[(0,y.jsxs)(b.ActionPanel.Section,{title:"Manage Service",children:[(0,y.jsx)(io,{name:e.data.name}),(0,y.jsx)(so,{name:e.data.name})]}),(0,y.jsx)(Eg,{path:e.data.path}),(0,y.jsx)(oo,{})]}):e.data.status==="stopped"||e.data.status==="none"?(0,y.jsxs)(b.ActionPanel,{title:"Manage Service",children:[(0,y.jsx)(rf,{name:e.data.name}),(0,y.jsx)(xg,{name:e.data.name}),(0,y.jsx)(oo,{})]}):(0,y.jsxs)(b.ActionPanel,{title:"Manage Service",children:[(0,y.jsx)(io,{name:e.data.name}),(0,y.jsx)(so,{name:e.data.name}),(0,y.jsx)(oo,{})]})}var ur=require("react/jsx-runtime");function of(){let[e,t]=(0,dr.useState)();return(0,dr.useEffect)(()=>{Me().then(r=>t(r))}),(0,ur.jsx)(Xe.List,{isLoading:!e,searchBarPlaceholder:"Search for services...",children:(e??[]).map(r=>(0,ur.jsx)(Xe.List.Item,{title:r.name,subtitle:r.status,accessories:r.user?[{text:r.user,icon:Xe.Icon.Person}]:void 0,icon:Zl(r.status),actions:(0,ur.jsx)(nf,{data:r})}))})}
