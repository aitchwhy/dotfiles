"use strict";var F=Object.create;var m=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var M=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),C=(e,t)=>{for(var r in t)m(e,r,{get:t[r],enumerable:!0})},A=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of x(t))!O.call(e,o)&&o!==r&&m(e,o,{get:()=>t[o],enumerable:!(a=S(t,o))||a.enumerable});return e};var R=(e,t,r)=>(r=e!=null?F(L(e)):{},A(t||!e||!e.__esModule?m(r,"default",{value:e,enumerable:!0}):r,e)),b=e=>A(m({},"__esModule",{value:!0}),e);var y=M((V,g)=>{"use strict";var I=require("os"),T=I.homedir();g.exports=e=>{if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return T?e.replace(/^~(?=$|\/|\\)/,T):e}});var H={};C(H,{default:()=>G});module.exports=b(H);var i=require("@raycast/api"),k=require("react");var c=require("@raycast/api"),s=require("fs"),w=require("path"),D=R(y()),l=require("react/jsx-runtime"),d=(0,c.getPreferenceValues)(),f=(0,D.default)(d.downloadsFolder??"~/Downloads"),_=d.showHiddenFiles,q=d.fileOrder,v=d.lastestDownloadOrder;function h(){return(0,s.readdirSync)(f).filter(t=>_||!t.startsWith(".")).map(t=>{let r=(0,w.join)(f,t),a=(0,s.statSync)(r);return{file:t,path:r,lastModifiedAt:a.mtime,createdAt:a.ctime,addedAt:a.atime,birthAt:a.birthtime}}).sort((t,r)=>{switch(q){case"addTime":return r.addedAt.getTime()-t.addedAt.getTime();case"createTime":return r.createdAt.getTime()-t.createdAt.getTime();case"modifiedTime":default:return r.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()}})}function E(){try{return(0,s.accessSync)(d.downloadsFolder,s.constants.R_OK),!0}catch(e){return console.error(e),!1}}var P=e=>t=>E()?((0,s.accessSync)(d.downloadsFolder,s.constants.R_OK),(0,l.jsx)(e,{...t})):(0,l.jsx)(c.Detail,{markdown:`## Permission Required

The Downloads Manager extension requires access to your Downloads folder. Please grant permission to use it.

![Grant Permission](permission.png)`,actions:(0,l.jsx)(c.ActionPanel,{children:(0,l.jsx)(c.Action.Open,{title:"Grant Permission",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"})})});var n=require("react/jsx-runtime");function $(){let[e,t]=(0,k.useState)(h());function r(o){t(p=>p.filter(u=>Array.isArray(o)?!o.includes(u.path):o!==u.path))}function a(){t(h())}return(0,n.jsxs)(i.List,{children:[e.length===0&&(0,n.jsx)(i.List.EmptyView,{icon:{fileIcon:f},title:"No downloads found",description:"Well, first download some files \xAF\\_(\u30C4)_/\xAF"}),e.map(o=>(0,n.jsx)(i.List.Item,{title:o.file,icon:{fileIcon:o.path},quickLook:{path:o.path,name:o.file},accessories:[{date:o.lastModifiedAt,tooltip:`Last modified: ${o.lastModifiedAt.toLocaleString()}`}],actions:(0,n.jsxs)(i.ActionPanel,{children:[(0,n.jsxs)(i.ActionPanel.Section,{children:[(0,n.jsx)(i.Action.Open,{title:"Open File",target:o.path}),(0,n.jsx)(i.Action.ShowInFinder,{path:o.path}),(0,n.jsx)(i.Action.CopyToClipboard,{title:"Copy File",content:{file:o.path},shortcut:{modifiers:["cmd","shift"],key:"c"}}),(0,n.jsx)(i.Action,{title:"Reload Downloads",icon:i.Icon.RotateAntiClockwise,shortcut:{modifiers:["cmd"],key:"r"},onAction:a})]}),(0,n.jsxs)(i.ActionPanel.Section,{children:[(0,n.jsx)(i.Action.OpenWith,{path:o.path,shortcut:{modifiers:["cmd"],key:"o"}}),(0,n.jsx)(i.Action.ToggleQuickLook,{shortcut:{modifiers:["cmd"],key:"y"}})]}),(0,n.jsxs)(i.ActionPanel.Section,{children:[(0,n.jsx)(i.Action.Trash,{title:"Delete Download",paths:o.path,shortcut:{modifiers:["ctrl"],key:"x"},onTrash:r}),(0,n.jsx)(i.Action.Trash,{title:"Delete All Downloads",paths:e.map(p=>p.path),shortcut:{modifiers:["ctrl","shift"],key:"x"},onTrash:r})]})]})},o.path))]})}var G=P($);
