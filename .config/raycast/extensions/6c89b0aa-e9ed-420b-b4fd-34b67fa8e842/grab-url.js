"use strict";var z=Object.create;var d=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty;var m=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),j=(e,r)=>{for(var t in r)d(e,t,{get:r[t],enumerable:!0})},C=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of X(r))!K.call(e,n)&&n!==t&&d(e,n,{get:()=>r[n],enumerable:!(o=N(r,n))||o.enumerable});return e};var Y=(e,r,t)=>(t=e!=null?z(V(e)):{},C(r||!e||!e.__esModule?d(t,"default",{value:e,enumerable:!0}):t,e)),H=e=>C(d({},"__esModule",{value:!0}),e);var P=m((fe,T)=>{"use strict";var _=require("fs"),x;function J(){try{return _.statSync("/.dockerenv"),!0}catch{return!1}}function Q(){try{return _.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}T.exports=()=>(x===void 0&&(x=J()||Q()),x)});var O=m((pe,A)=>{"use strict";var Z=require("os"),ee=require("fs"),v=P(),k=()=>{if(process.platform!=="linux")return!1;if(Z.release().toLowerCase().includes("microsoft"))return!v();try{return ee.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!v():!1}catch{return!1}};process.env.__IS_WSL_TEST__?A.exports=k:A.exports=k()});var q=m((de,$)=>{"use strict";$.exports=(e,r,t)=>{let o=n=>Object.defineProperty(e,r,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let n=t();return o(n),n},set(n){o(n)}}),e}});var M=m((me,U)=>{var re=require("path"),te=require("child_process"),{promises:h,constants:I}=require("fs"),g=O(),ne=P(),E=q(),L=re.join(__dirname,"xdg-open"),{platform:l,arch:R}=process,oe=()=>{try{return h.statSync("/run/.containerenv"),!0}catch{return!1}},b;function se(){return b===void 0&&(b=oe()||ne()),b}var ie=(()=>{let e="/mnt/",r;return async function(){if(r)return r;let t="/etc/wsl.conf",o=!1;try{await h.access(t,I.F_OK),o=!0}catch{}if(!o)return e;let n=await h.readFile(t,{encoding:"utf8"}),u=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(n);return u?(r=u.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),W=async(e,r)=>{let t;for(let o of e)try{return await r(o)}catch(n){t=n}throw t},w=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return W(e.app,a=>w({...e,app:a}));let{name:r,arguments:t=[]}=e.app||{};if(t=[...t],Array.isArray(r))return W(r,a=>w({...e,app:{name:a,arguments:t}}));let o,n=[],u={};if(l==="darwin")o="open",e.wait&&n.push("--wait-apps"),e.background&&n.push("--background"),e.newInstance&&n.push("--new"),r&&n.push("-a",r);else if(l==="win32"||g&&!se()&&!r){let a=await ie();o=g?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,n.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),g||(u.windowsVerbatimArguments=!0);let i=["Start"];e.wait&&i.push("-Wait"),r?(i.push(`"\`"${r}\`""`,"-ArgumentList"),e.target&&t.unshift(e.target)):e.target&&i.push(`"${e.target}"`),t.length>0&&(t=t.map(p=>`"\`"${p}\`""`),i.push(t.join(","))),e.target=Buffer.from(i.join(" "),"utf16le").toString("base64")}else{if(r)o=r;else{let a=!__dirname||__dirname==="/",i=!1;try{await h.access(L,I.X_OK),i=!0}catch{}o=process.versions.electron||l==="android"||a||!i?"xdg-open":L}t.length>0&&n.push(...t),e.wait||(u.stdio="ignore",u.detached=!0)}e.target&&n.push(e.target),l==="darwin"&&t.length>0&&n.push("--args",...t);let f=te.spawn(o,n,u);return e.wait?new Promise((a,i)=>{f.once("error",i),f.once("close",p=>{if(!e.allowNonzeroExitCode&&p>0){i(new Error(`Exited with code ${p}`));return}a(f)})}):(f.unref(),f)},F=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return w({...r,target:e})},ae=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=r||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return w({...r,app:{name:e,arguments:t}})};function G(e){if(typeof e=="string"||Array.isArray(e))return e;let{[R]:r}=e;if(!r)throw new Error(`${R} is not supported`);return r}function S({[l]:e},{wsl:r}){if(r&&g)return G(r);if(!e)throw new Error(`${l} is not supported`);return G(e)}var y={};E(y,"chrome",()=>S({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));E(y,"firefox",()=>S({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));E(y,"edge",()=>S({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));F.apps=y;F.openApp=ae;U.exports=F});var ue={};j(ue,{default:()=>D});module.exports=H(ue);var s=require("@raycast/api"),B=Y(M()),c=require("react/jsx-runtime");function ce(){async function e({url:r,tags:t,pin:o}){if(!r){(0,s.showToast)(s.Toast.Style.Failure,"URL is required");return}(0,B.default)(`bear://x-callback-url/grab-url?url=${encodeURIComponent(r)}&tags=${encodeURIComponent(t)}&pin=${o?"yes":"no"}`),await(0,s.popToRoot)({clearSearchBar:!0})}return(0,c.jsx)(s.Action.SubmitForm,{icon:s.Icon.Globe,title:"Capture in New Note",onSubmit:e})}function D(){return(0,c.jsxs)(s.Form,{navigationTitle:"Grab URL",actions:(0,c.jsx)(s.ActionPanel,{children:(0,c.jsx)(ce,{})}),children:[(0,c.jsx)(s.Form.TextField,{id:"url",title:"URL",placeholder:"URL of web page to capture (eg. https://raycast.com)"}),(0,c.jsx)(s.Form.TextField,{id:"tags",title:"Tags",placeholder:"comma,separated,tags"}),(0,c.jsx)(s.Form.Checkbox,{id:"pin",label:"Pin note to top of note list"})]})}
