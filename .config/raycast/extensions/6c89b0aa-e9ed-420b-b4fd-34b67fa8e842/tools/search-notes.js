"use strict";var gn=Object.create;var Pt=Object.defineProperty;var Nn=Object.getOwnPropertyDescriptor;var An=Object.getOwnPropertyNames;var On=Object.getPrototypeOf,Sn=Object.prototype.hasOwnProperty;var Rn=(I,d)=>()=>(d||I((d={exports:{}}).exports,d),d.exports),Zn=(I,d)=>{for(var y in d)Pt(I,y,{get:d[y],enumerable:!0})},Er=(I,d,y,v)=>{if(d&&typeof d=="object"||typeof d=="function")for(let F of An(d))!Sn.call(I,F)&&F!==y&&Pt(I,F,{get:()=>d[F],enumerable:!(v=Nn(d,F))||v.enumerable});return I};var _r=(I,d,y)=>(y=I!=null?gn(On(I)):{},Er(d||!I||!I.__esModule?Pt(y,"default",{value:I,enumerable:!0}):y,I)),qn=I=>Er(Pt({},"__esModule",{value:!0}),I);var yr=Rn((Wt,rt)=>{var Bt=void 0,Qt=function(I){return Bt||(Bt=new Promise(function(d,y){var v=typeof I<"u"?I:{},F=v.onAbort;v.onAbort=function(t){y(new Error(t)),F&&F(t)},v.postRun=v.postRun||[],v.postRun.push(function(){d(v)}),rt=void 0;var o;o||=typeof v<"u"?v:{},o.onRuntimeInitialized=function(){function t(s,l){switch(typeof l){case"boolean":In(s,l?1:0);break;case"number":wn(s,l);break;case"string":bn(s,l,-1,-1);break;case"object":if(l===null)dr(s);else if(l.length!=null){var h=Gt(l,Ut);Tn(s,h,l.length,-1),Ht(h)}else xt(s,"Wrong API use : tried to return a value of an unknown type ("+l+").",-1);break;default:dr(s)}}function e(s,l){for(var h=[],E=0;E<s;E+=1){var T=Q(l+4*E,"i32"),A=pn(T);if(A===1||A===2)T=yn(T);else if(A===3)T=En(T);else if(A===4){A=T,T=mn(A),A=_n(A);for(var H=new Uint8Array(T),k=0;k<T;k+=1)H[k]=L[A+k];T=H}else T=null;h.push(T)}return h}function r(s,l){this.La=s,this.db=l,this.Ja=1,this.fb=[]}function n(s,l){if(this.db=l,l=it(s)+1,this.Ya=kt(l),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");ot(s,N,this.Ya,l),this.eb=this.Ya,this.Ua=this.ib=null}function i(s){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),s!=null){var l=this.filename,h="/",E=l;if(h&&(h=typeof h=="string"?h:mt(h),E=l?W(h+"/"+l):h),l=Me(!0,!0),E=Zt(E,(l!==void 0?l:438)&4095|32768,0),s){if(typeof s=="string"){h=Array(s.length);for(var T=0,A=s.length;T<A;++T)h[T]=s.charCodeAt(T);s=h}Lt(E,l|146),h=at(E,577),$e(h,s,0,s.length,0),ue(h),Lt(E,l)}}this.handleError(m(this.filename,a)),this.db=Q(a,"i32"),mr(this.db),this.Za={},this.Na={}}var a=V(4),u=o.cwrap,m=u("sqlite3_open","number",["string","number"]),g=u("sqlite3_close_v2","number",["number"]),w=u("sqlite3_exec","number",["number","string","number","number","number"]),q=u("sqlite3_changes","number",["number"]),D=u("sqlite3_prepare_v2","number",["number","string","number","number","number"]),ur=u("sqlite3_sql","string",["number"]),Yr=u("sqlite3_normalized_sql","string",["number"]),lr=u("sqlite3_prepare_v2","number",["number","number","number","number","number"]),zr=u("sqlite3_bind_text","number",["number","number","number","number","number"]),fr=u("sqlite3_bind_blob","number",["number","number","number","number","number"]),$r=u("sqlite3_bind_double","number",["number","number","number"]),Xr=u("sqlite3_bind_int","number",["number","number","number"]),tn=u("sqlite3_bind_parameter_index","number",["number","string"]),en=u("sqlite3_step","number",["number"]),rn=u("sqlite3_errmsg","string",["number"]),nn=u("sqlite3_column_count","number",["number"]),on=u("sqlite3_data_count","number",["number"]),sn=u("sqlite3_column_double","number",["number","number"]),hr=u("sqlite3_column_text","string",["number","number"]),an=u("sqlite3_column_blob","number",["number","number"]),un=u("sqlite3_column_bytes","number",["number","number"]),ln=u("sqlite3_column_type","number",["number","number"]),fn=u("sqlite3_column_name","string",["number","number"]),hn=u("sqlite3_reset","number",["number"]),cn=u("sqlite3_clear_bindings","number",["number"]),dn=u("sqlite3_finalize","number",["number"]),cr=u("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),pn=u("sqlite3_value_type","number",["number"]),mn=u("sqlite3_value_bytes","number",["number"]),En=u("sqlite3_value_text","string",["number"]),_n=u("sqlite3_value_blob","number",["number"]),yn=u("sqlite3_value_double","number",["number"]),wn=u("sqlite3_result_double","",["number","number"]),dr=u("sqlite3_result_null","",["number"]),bn=u("sqlite3_result_text","",["number","string","number","number"]),Tn=u("sqlite3_result_blob","",["number","number","number","number"]),In=u("sqlite3_result_int","",["number","number"]),xt=u("sqlite3_result_error","",["number","string","number"]),pr=u("sqlite3_aggregate_context","number",["number","number"]),mr=u("RegisterExtensionFunctions","number",["number"]);r.prototype.bind=function(s){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(s)?this.wb(s):s!=null&&typeof s=="object"?this.xb(s):!0},r.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var s=en(this.La);switch(s){case 100:return!0;case 101:return!1;default:throw this.db.handleError(s)}},r.prototype.rb=function(s){return s==null&&(s=this.Ja,this.Ja+=1),sn(this.La,s)},r.prototype.Ab=function(s){if(s==null&&(s=this.Ja,this.Ja+=1),s=hr(this.La,s),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(s)},r.prototype.Bb=function(s){return s==null&&(s=this.Ja,this.Ja+=1),hr(this.La,s)},r.prototype.getBlob=function(s){s==null&&(s=this.Ja,this.Ja+=1);var l=un(this.La,s);s=an(this.La,s);for(var h=new Uint8Array(l),E=0;E<l;E+=1)h[E]=L[s+E];return h},r.prototype.get=function(s,l){l=l||{},s!=null&&this.bind(s)&&this.step(),s=[];for(var h=on(this.La),E=0;E<h;E+=1)switch(ln(this.La,E)){case 1:var T=l.useBigInt?this.Ab(E):this.rb(E);s.push(T);break;case 2:s.push(this.rb(E));break;case 3:s.push(this.Bb(E));break;case 4:s.push(this.getBlob(E));break;default:s.push(null)}return s},r.prototype.getColumnNames=function(){for(var s=[],l=nn(this.La),h=0;h<l;h+=1)s.push(fn(this.La,h));return s},r.prototype.getAsObject=function(s,l){s=this.get(s,l),l=this.getColumnNames();for(var h={},E=0;E<l.length;E+=1)h[l[E]]=s[E];return h},r.prototype.getSQL=function(){return ur(this.La)},r.prototype.getNormalizedSQL=function(){return Yr(this.La)},r.prototype.run=function(s){return s!=null&&this.bind(s),this.step(),this.reset()},r.prototype.nb=function(s,l){l==null&&(l=this.Ja,this.Ja+=1),s=qe(s);var h=Gt(s,Ut);this.fb.push(h),this.db.handleError(zr(this.La,l,h,s.length-1,0))},r.prototype.vb=function(s,l){l==null&&(l=this.Ja,this.Ja+=1);var h=Gt(s,Ut);this.fb.push(h),this.db.handleError(fr(this.La,l,h,s.length,0))},r.prototype.mb=function(s,l){l==null&&(l=this.Ja,this.Ja+=1),this.db.handleError((s===(s|0)?Xr:$r)(this.La,l,s))},r.prototype.yb=function(s){s==null&&(s=this.Ja,this.Ja+=1),fr(this.La,s,0,0,0)},r.prototype.ob=function(s,l){switch(l==null&&(l=this.Ja,this.Ja+=1),typeof s){case"string":this.nb(s,l);return;case"number":this.mb(s,l);return;case"bigint":this.nb(s.toString(),l);return;case"boolean":this.mb(s+0,l);return;case"object":if(s===null){this.yb(l);return}if(s.length!=null){this.vb(s,l);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+s+")."},r.prototype.xb=function(s){var l=this;return Object.keys(s).forEach(function(h){var E=tn(l.La,h);E!==0&&l.ob(s[h],E)}),!0},r.prototype.wb=function(s){for(var l=0;l<s.length;l+=1)this.ob(s[l],l+1);return!0},r.prototype.reset=function(){return this.freemem(),cn(this.La)===0&&hn(this.La)===0},r.prototype.freemem=function(){for(var s;(s=this.fb.pop())!==void 0;)Ht(s)},r.prototype.free=function(){this.freemem();var s=dn(this.La)===0;return delete this.db.Za[this.La],this.La=0,s},n.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var s=bt(),l=V(4);dt(a),dt(l);try{this.db.handleError(lr(this.db.db,this.eb,-1,a,l)),this.eb=Q(l,"i32");var h=Q(a,"i32");return h===0?(this.gb(),{done:!0}):(this.Ua=new r(h,this.db),this.db.Za[h]=this.Ua,{value:this.Ua,done:!1})}catch(E){throw this.ib=ee(this.eb),this.gb(),E}finally{Tt(s)}},n.prototype.gb=function(){Ht(this.Ya),this.Ya=null},n.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:ee(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(s,l){if(!this.db)throw"Database closed";if(l){s=this.prepare(s,l);try{s.step()}finally{s.free()}}else this.handleError(w(this.db,s,0,0,a));return this},i.prototype.exec=function(s,l,h){if(!this.db)throw"Database closed";var E=bt(),T=null;try{var A=ce(s),H=V(4);for(s=[];Q(A,"i8")!==0;){dt(a),dt(H),this.handleError(lr(this.db,A,-1,a,H));var k=Q(a,"i32");if(A=Q(H,"i32"),k!==0){var G=null;for(T=new r(k,this),l!=null&&T.bind(l);T.step();)G===null&&(G={columns:T.getColumnNames(),values:[]},s.push(G)),G.values.push(T.get(null,h));T.free()}}return s}catch(K){throw T&&T.free(),K}finally{Tt(E)}},i.prototype.each=function(s,l,h,E,T){typeof l=="function"&&(E=h,h=l,l=void 0),s=this.prepare(s,l);try{for(;s.step();)h(s.getAsObject(null,T))}finally{s.free()}if(typeof E=="function")return E()},i.prototype.prepare=function(s,l){if(dt(a),this.handleError(D(this.db,s,-1,a,0)),s=Q(a,"i32"),s===0)throw"Nothing to prepare";var h=new r(s,this);return l!=null&&h.bind(l),this.Za[s]=h},i.prototype.iterateStatements=function(s){return new n(s,this)},i.prototype.export=function(){Object.values(this.Za).forEach(function(l){l.free()}),Object.values(this.Na).forEach(ut),this.Na={},this.handleError(g(this.db));var s=Qr(this.filename);return this.handleError(m(this.filename,a)),this.db=Q(a,"i32"),mr(this.db),s},i.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(s){s.free()}),Object.values(this.Na).forEach(ut),this.Na={},this.handleError(g(this.db)),We("/"+this.filename),this.db=null)},i.prototype.handleError=function(s){if(s===0)return null;throw s=rn(this.db),Error(s)},i.prototype.getRowsModified=function(){return q(this.db)},i.prototype.create_function=function(s,l){Object.prototype.hasOwnProperty.call(this.Na,s)&&(ut(this.Na[s]),delete this.Na[s]);var h=Ct(function(E,T,A){T=e(T,A);try{var H=l.apply(null,T)}catch(k){xt(E,k,-1);return}t(E,H)},"viii");return this.Na[s]=h,this.handleError(cr(this.db,s,l.length,1,0,h,0,0,0)),this},i.prototype.create_aggregate=function(s,l){var h=l.init||function(){return null},E=l.finalize||function(G){return G},T=l.step;if(!T)throw"An aggregate function must have a step function in "+s;var A={};Object.hasOwnProperty.call(this.Na,s)&&(ut(this.Na[s]),delete this.Na[s]),l=s+"__finalize",Object.hasOwnProperty.call(this.Na,l)&&(ut(this.Na[l]),delete this.Na[l]);var H=Ct(function(G,K,pe){var et=pr(G,1);Object.hasOwnProperty.call(A,et)||(A[et]=h()),K=e(K,pe),K=[A[et]].concat(K);try{A[et]=T.apply(null,K)}catch(vn){delete A[et],xt(G,vn,-1)}},"viii"),k=Ct(function(G){var K=pr(G,1);try{var pe=E(A[K])}catch(et){delete A[K],xt(G,et,-1);return}t(G,pe),delete A[K]},"vi");return this.Na[s]=H,this.Na[l]=k,this.handleError(cr(this.db,s,T.length-1,1,0,0,H,k,0)),this},o.Database=i};var It=Object.assign({},o),jt="./this.program",_e=typeof window=="object",lt=typeof importScripts=="function",vt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x="",Jt,gt,Nt;if(vt){var Vt=require("fs"),Yt=require("path");x=lt?Yt.dirname(x)+"/":__dirname+"/",Jt=(t,e)=>(t=Ot(t)?new URL(t):Yt.normalize(t),Vt.readFileSync(t,e?void 0:"utf8")),Nt=t=>(t=Jt(t,!0),t.buffer||(t=new Uint8Array(t)),t),gt=(t,e,r,n=!0)=>{t=Ot(t)?new URL(t):Yt.normalize(t),Vt.readFile(t,n?void 0:"utf8",(i,a)=>{i?r(i):e(n?a.buffer:a)})},!o.thisProgram&&1<process.argv.length&&(jt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof rt<"u"&&(rt.exports=o),o.inspect=()=>"[Emscripten Module object]"}else(_e||lt)&&(lt?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),x=x.indexOf("blob:")!==0?x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Jt=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},lt&&(Nt=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),gt=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});var ye=o.print||console.log.bind(console),Y=o.printErr||console.error.bind(console);Object.assign(o,It),It=null,o.thisProgram&&(jt=o.thisProgram);var ft;o.wasmBinary&&(ft=o.wasmBinary),typeof WebAssembly!="object"&&B("no native wasm support detected");var At,we=!1,L,N,ht,_,S,zt,$t;function be(){var t=At.buffer;o.HEAP8=L=new Int8Array(t),o.HEAP16=ht=new Int16Array(t),o.HEAPU8=N=new Uint8Array(t),o.HEAPU16=new Uint16Array(t),o.HEAP32=_=new Int32Array(t),o.HEAPU32=S=new Uint32Array(t),o.HEAPF32=zt=new Float32Array(t),o.HEAPF64=$t=new Float64Array(t)}var Te=[],Ie=[],ve=[];function Fr(){var t=o.preRun.shift();Te.unshift(t)}var z=0,Xt=null,ct=null;function B(t){throw o.onAbort?.(t),t="Aborted("+t+")",Y(t),we=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var ge=t=>t.startsWith("data:application/octet-stream;base64,"),Ot=t=>t.startsWith("file://"),nt;if(nt="sql-wasm.wasm",!ge(nt)){var Ne=nt;nt=o.locateFile?o.locateFile(Ne,x):x+Ne}function Ae(t){if(t==nt&&ft)return new Uint8Array(ft);if(Nt)return Nt(t);throw"both async and sync fetching of the wasm failed"}function Mr(t){if(!ft&&(_e||lt)){if(typeof fetch=="function"&&!Ot(t))return fetch(t,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()}).catch(()=>Ae(t));if(gt)return new Promise((e,r)=>{gt(t,n=>e(new Uint8Array(n)),r)})}return Promise.resolve().then(()=>Ae(t))}function Oe(t,e,r){return Mr(t).then(n=>WebAssembly.instantiate(n,e)).then(n=>n).then(r,n=>{Y(`failed to asynchronously prepare wasm: ${n}`),B(n)})}function Ur(t,e){var r=nt;ft||typeof WebAssembly.instantiateStreaming!="function"||ge(r)||Ot(r)||vt||typeof fetch!="function"?Oe(r,t,e):fetch(r,{credentials:"same-origin"}).then(n=>WebAssembly.instantiateStreaming(n,t).then(e,function(i){return Y(`wasm streaming compile failed: ${i}`),Y("falling back to ArrayBuffer instantiation"),Oe(r,t,e)}))}var p,R,te=t=>{for(;0<t.length;)t.shift()(o)};function Q(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return L[t>>0];case"i8":return L[t>>0];case"i16":return ht[t>>1];case"i32":return _[t>>2];case"i64":B("to do getValue(i64) use WASM_BIGINT");case"float":return zt[t>>2];case"double":return $t[t>>3];case"*":return S[t>>2];default:B(`invalid type for getValue: ${e}`)}}function dt(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":L[t>>0]=0;break;case"i8":L[t>>0]=0;break;case"i16":ht[t>>1]=0;break;case"i32":_[t>>2]=0;break;case"i64":B("to do setValue(i64) use WASM_BIGINT");case"float":zt[t>>2]=0;break;case"double":$t[t>>3]=0;break;case"*":S[t>>2]=0;break;default:B(`invalid type for setValue: ${e}`)}}var Se=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Z=(t,e,r)=>{var n=e+r;for(r=e;t[r]&&!(r>=n);)++r;if(16<r-e&&t.buffer&&Se)return Se.decode(t.subarray(e,r));for(n="";e<r;){var i=t[e++];if(i&128){var a=t[e++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|a);else{var u=t[e++]&63;i=(i&240)==224?(i&15)<<12|a<<6|u:(i&7)<<18|a<<12|u<<6|t[e++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},ee=(t,e)=>t?Z(N,t,e):"",Re=(t,e)=>{for(var r=0,n=t.length-1;0<=n;n--){var i=t[n];i==="."?t.splice(n,1):i===".."?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},W=t=>{var e=t.charAt(0)==="/",r=t.substr(-1)==="/";return(t=Re(t.split("/").filter(n=>!!n),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},Gr=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&=e.substr(0,e.length-1),t+e)},St=t=>{if(t==="/")return"/";t=W(t),t=t.replace(/\/$/,"");var e=t.lastIndexOf("/");return e===-1?t:t.substr(e+1)},Cr=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return r=>crypto.getRandomValues(r);if(vt)try{var t=require("crypto");if(t.randomFillSync)return r=>t.randomFillSync(r);var e=t.randomBytes;return r=>(r.set(e(r.byteLength)),r)}catch{}B("initRandomDevice")},Ze=t=>(Ze=Cr())(t);function Rt(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){if(e=0<=r?arguments[r]:"/",typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e=e.charAt(0)==="/"}return t=Re(t.split("/").filter(n=>!!n),!e).join("/"),(e?"/":"")+t||"."}var re=[],it=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++r):e+=3}return e},ot=(t,e,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var a=0;a<t.length;++a){var u=t.charCodeAt(a);if(55296<=u&&57343>=u){var m=t.charCodeAt(++a);u=65536+((u&1023)<<10)|m&1023}if(127>=u){if(r>=n)break;e[r++]=u}else{if(2047>=u){if(r+1>=n)break;e[r++]=192|u>>6}else{if(65535>=u){if(r+2>=n)break;e[r++]=224|u>>12}else{if(r+3>=n)break;e[r++]=240|u>>18,e[r++]=128|u>>12&63}e[r++]=128|u>>6&63}e[r++]=128|u&63}}return e[r]=0,r-i};function qe(t,e){var r=Array(it(t)+1);return t=ot(t,r,0,r.length),e&&(r.length=t),r}var Le=[];function De(t,e){Le[t]={input:[],output:[],Xa:e},se(t,kr)}var kr={open(t){var e=Le[t.node.rdev];if(!e)throw new f(43);t.tty=e,t.seekable=!1},close(t){t.tty.Xa.fsync(t.tty)},fsync(t){t.tty.Xa.fsync(t.tty)},read(t,e,r,n){if(!t.tty||!t.tty.Xa.sb)throw new f(60);for(var i=0,a=0;a<n;a++){try{var u=t.tty.Xa.sb(t.tty)}catch{throw new f(29)}if(u===void 0&&i===0)throw new f(6);if(u==null)break;i++,e[r+a]=u}return i&&(t.node.timestamp=Date.now()),i},write(t,e,r,n){if(!t.tty||!t.tty.Xa.jb)throw new f(60);try{for(var i=0;i<n;i++)t.tty.Xa.jb(t.tty,e[r+i])}catch{throw new f(29)}return n&&(t.node.timestamp=Date.now()),i}},Hr={sb(){t:{if(!re.length){var t=null;if(vt){var e=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=Vt.readSync(n,e)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r?t=e.slice(0,r).toString("utf-8"):t=null}else typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`));if(!t){t=null;break t}re=qe(t,!0)}t=re.shift()}return t},jb(t,e){e===null||e===10?(ye(Z(t.output,0)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){t.output&&0<t.output.length&&(ye(Z(t.output,0)),t.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},Kr={jb(t,e){e===null||e===10?(Y(Z(t.output,0)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){t.output&&0<t.output.length&&(Y(Z(t.output,0)),t.output=[])}};function Fe(t,e){var r=t.Ia?t.Ia.length:0;r>=e||(e=Math.max(e,r*(1048576>r?2:1.125)>>>0),r!=0&&(e=Math.max(e,256)),r=t.Ia,t.Ia=new Uint8Array(e),0<t.Ma&&t.Ia.set(r.subarray(0,t.Ma),0))}var b={Qa:null,Ra(){return b.createNode(null,"/",16895,0)},createNode(t,e,r,n){if((r&61440)===24576||(r&61440)===4096)throw new f(63);return b.Qa||(b.Qa={dir:{node:{Pa:b.Ga.Pa,Oa:b.Ga.Oa,lookup:b.Ga.lookup,ab:b.Ga.ab,rename:b.Ga.rename,unlink:b.Ga.unlink,rmdir:b.Ga.rmdir,readdir:b.Ga.readdir,symlink:b.Ga.symlink},stream:{Ta:b.Ha.Ta}},file:{node:{Pa:b.Ga.Pa,Oa:b.Ga.Oa},stream:{Ta:b.Ha.Ta,read:b.Ha.read,write:b.Ha.write,lb:b.Ha.lb,bb:b.Ha.bb,cb:b.Ha.cb}},link:{node:{Pa:b.Ga.Pa,Oa:b.Ga.Oa,readlink:b.Ga.readlink},stream:{}},pb:{node:{Pa:b.Ga.Pa,Oa:b.Ga.Oa},stream:Br}}),r=ke(t,e,r,n),C(r.mode)?(r.Ga=b.Qa.dir.node,r.Ha=b.Qa.dir.stream,r.Ia={}):(r.mode&61440)===32768?(r.Ga=b.Qa.file.node,r.Ha=b.Qa.file.stream,r.Ma=0,r.Ia=null):(r.mode&61440)===40960?(r.Ga=b.Qa.link.node,r.Ha=b.Qa.link.stream):(r.mode&61440)===8192&&(r.Ga=b.Qa.pb.node,r.Ha=b.Qa.pb.stream),r.timestamp=Date.now(),t&&(t.Ia[e]=r,t.timestamp=r.timestamp),r},Lb(t){return t.Ia?t.Ia.subarray?t.Ia.subarray(0,t.Ma):new Uint8Array(t.Ia):new Uint8Array(0)},Ga:{Pa(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,C(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ma:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.zb=4096,e.blocks=Math.ceil(e.size/e.zb),e},Oa(t,e){if(e.mode!==void 0&&(t.mode=e.mode),e.timestamp!==void 0&&(t.timestamp=e.timestamp),e.size!==void 0&&(e=e.size,t.Ma!=e))if(e==0)t.Ia=null,t.Ma=0;else{var r=t.Ia;t.Ia=new Uint8Array(e),r&&t.Ia.set(r.subarray(0,Math.min(e,t.Ma))),t.Ma=e}},lookup(){throw ie[44]},ab(t,e,r,n){return b.createNode(t,e,r,n)},rename(t,e,r){if(C(t.mode)){try{var n=$(e,r)}catch{}if(n)for(var i in n.Ia)throw new f(55)}delete t.parent.Ia[t.name],t.parent.timestamp=Date.now(),t.name=r,e.Ia[r]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink(t,e){delete t.Ia[e],t.timestamp=Date.now()},rmdir(t,e){var r=$(t,e),n;for(n in r.Ia)throw new f(55);delete t.Ia[e],t.timestamp=Date.now()},readdir(t){var e=[".",".."],r;for(r of Object.keys(t.Ia))e.push(r);return e},symlink(t,e,r){return t=b.createNode(t,e,41471,0),t.link=r,t},readlink(t){if((t.mode&61440)!==40960)throw new f(28);return t.link}},Ha:{read(t,e,r,n,i){var a=t.node.Ia;if(i>=t.node.Ma)return 0;if(t=Math.min(t.node.Ma-i,n),8<t&&a.subarray)e.set(a.subarray(i,i+t),r);else for(n=0;n<t;n++)e[r+n]=a[i+n];return t},write(t,e,r,n,i,a){if(e.buffer===L.buffer&&(a=!1),!n)return 0;if(t=t.node,t.timestamp=Date.now(),e.subarray&&(!t.Ia||t.Ia.subarray)){if(a)return t.Ia=e.subarray(r,r+n),t.Ma=n;if(t.Ma===0&&i===0)return t.Ia=e.slice(r,r+n),t.Ma=n;if(i+n<=t.Ma)return t.Ia.set(e.subarray(r,r+n),i),n}if(Fe(t,i+n),t.Ia.subarray&&e.subarray)t.Ia.set(e.subarray(r,r+n),i);else for(a=0;a<n;a++)t.Ia[i+a]=e[r+a];return t.Ma=Math.max(t.Ma,i+n),n},Ta(t,e,r){if(r===1?e+=t.position:r===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ma),0>e)throw new f(28);return e},lb(t,e,r){Fe(t.node,e+r),t.node.Ma=Math.max(t.node.Ma,e+r)},bb(t,e,r,n,i){if((t.node.mode&61440)!==32768)throw new f(43);if(t=t.node.Ia,i&2||t.buffer!==L.buffer){if((0<r||r+e<t.length)&&(t.subarray?t=t.subarray(r,r+e):t=Array.prototype.slice.call(t,r,r+e)),r=!0,e=65536*Math.ceil(e/65536),(i=sr(65536,e))?(N.fill(0,i,i+e),e=i):e=0,!e)throw new f(48);L.set(t,e)}else r=!1,e=t.byteOffset;return{Db:e,ub:r}},cb(t,e,r,n){return b.Ha.write(t,e,0,n,r,!1),0}}},Me=(t,e)=>{var r=0;return t&&(r|=365),e&&(r|=146),r},ne=null,Ue={},pt=[],xr=1,J=null,Ge=!0,f=null,ie={};function U(t,e={}){if(t=Rt(t),!t)return{path:"",node:null};if(e=Object.assign({qb:!0,kb:0},e),8<e.kb)throw new f(32);t=t.split("/").filter(u=>!!u);for(var r=ne,n="/",i=0;i<t.length;i++){var a=i===t.length-1;if(a&&e.parent)break;if(r=$(r,t[i]),n=W(n+"/"+t[i]),r.Va&&(!a||a&&e.qb)&&(r=r.Va.root),!a||e.Sa){for(a=0;(r.mode&61440)===40960;)if(r=je(n),n=Rt(Gr(n),r),r=U(n,{kb:e.kb+1}).node,40<a++)throw new f(32)}}return{path:n,node:r}}function mt(t){for(var e;;){if(t===t.parent)return t=t.Ra.tb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function oe(t,e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%J.length}function Ce(t){var e=oe(t.parent.id,t.name);if(J[e]===t)J[e]=t.Wa;else for(e=J[e];e;){if(e.Wa===t){e.Wa=t.Wa;break}e=e.Wa}}function $(t,e){var r;if(r=(r=st(t,"x"))?r:t.Ga.lookup?0:2)throw new f(r,t);for(r=J[oe(t.id,e)];r;r=r.Wa){var n=r.name;if(r.parent.id===t.id&&n===e)return r}return t.Ga.lookup(t,e)}function ke(t,e,r,n){return t=new ir(t,e,r,n),e=oe(t.parent.id,t.name),t.Wa=J[e],J[e]=t}function C(t){return(t&61440)===16384}function He(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function st(t,e){if(Ge)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function Ke(t,e){try{return $(t,e),20}catch{}return st(t,"wx")}function xe(t,e,r){try{var n=$(t,e)}catch(i){return i.Ka}if(t=st(t,"wx"))return t;if(r){if(!C(n.mode))return 54;if(n===n.parent||mt(n)==="/")return 10}else if(C(n.mode))return 31;return 0}function Pr(){for(var t=0;4096>=t;t++)if(!pt[t])return t;throw new f(33)}function M(t){if(t=pt[t],!t)throw new f(8);return t}function Pe(t,e=-1){return yt||(yt=function(){this.$a={}},yt.prototype={},Object.defineProperties(yt.prototype,{object:{get(){return this.node},set(r){this.node=r}},flags:{get(){return this.$a.flags},set(r){this.$a.flags=r}},position:{get(){return this.$a.position},set(r){this.$a.position=r}}})),t=Object.assign(new yt,t),e==-1&&(e=Pr()),t.fd=e,pt[e]=t}var Br={open(t){t.Ha=Ue[t.node.rdev].Ha,t.Ha.open?.(t)},Ta(){throw new f(70)}};function se(t,e){Ue[t]={Ha:e}}function Be(t,e){var r=e==="/",n=!e;if(r&&ne)throw new f(10);if(!r&&!n){var i=U(e,{qb:!1});if(e=i.path,i=i.node,i.Va)throw new f(10);if(!C(i.mode))throw new f(54)}e={type:t,Pb:{},tb:e,Cb:[]},t=t.Ra(e),t.Ra=e,e.root=t,r?ne=t:i&&(i.Va=e,i.Ra&&i.Ra.Cb.push(e))}function Zt(t,e,r){var n=U(t,{parent:!0}).node;if(t=St(t),!t||t==="."||t==="..")throw new f(28);var i=Ke(n,t);if(i)throw new f(i);if(!n.Ga.ab)throw new f(63);return n.Ga.ab(n,t,e,r)}function P(t,e){return Zt(t,(e!==void 0?e:511)&1023|16384,0)}function qt(t,e,r){typeof r>"u"&&(r=e,e=438),Zt(t,e|8192,r)}function ae(t,e){if(!Rt(t))throw new f(44);var r=U(e,{parent:!0}).node;if(!r)throw new f(44);e=St(e);var n=Ke(r,e);if(n)throw new f(n);if(!r.Ga.symlink)throw new f(63);r.Ga.symlink(r,e,t)}function Qe(t){var e=U(t,{parent:!0}).node;t=St(t);var r=$(e,t),n=xe(e,t,!0);if(n)throw new f(n);if(!e.Ga.rmdir)throw new f(63);if(r.Va)throw new f(10);e.Ga.rmdir(e,t),Ce(r)}function We(t){var e=U(t,{parent:!0}).node;if(!e)throw new f(44);t=St(t);var r=$(e,t),n=xe(e,t,!1);if(n)throw new f(n);if(!e.Ga.unlink)throw new f(63);if(r.Va)throw new f(10);e.Ga.unlink(e,t),Ce(r)}function je(t){if(t=U(t).node,!t)throw new f(44);if(!t.Ga.readlink)throw new f(28);return Rt(mt(t.parent),t.Ga.readlink(t))}function Et(t,e){if(t=U(t,{Sa:!e}).node,!t)throw new f(44);if(!t.Ga.Pa)throw new f(63);return t.Ga.Pa(t)}function Je(t){return Et(t,!0)}function Lt(t,e){if(t=typeof t=="string"?U(t,{Sa:!0}).node:t,!t.Ga.Oa)throw new f(63);t.Ga.Oa(t,{mode:e&4095|t.mode&-4096,timestamp:Date.now()})}function Ve(t,e){if(0>e)throw new f(28);if(t=typeof t=="string"?U(t,{Sa:!0}).node:t,!t.Ga.Oa)throw new f(63);if(C(t.mode))throw new f(31);if((t.mode&61440)!==32768)throw new f(28);var r=st(t,"w");if(r)throw new f(r);t.Ga.Oa(t,{size:e,timestamp:Date.now()})}function at(t,e,r){if(t==="")throw new f(44);if(typeof e=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof n>"u")throw Error(`Unknown file open mode: ${e}`);e=n}if(r=e&64?(typeof r>"u"?438:r)&4095|32768:0,typeof t=="object")var i=t;else{t=W(t);try{i=U(t,{Sa:!(e&131072)}).node}catch{}}if(n=!1,e&64)if(i){if(e&128)throw new f(20)}else i=Zt(t,r,0),n=!0;if(!i)throw new f(44);if((i.mode&61440)===8192&&(e&=-513),e&65536&&!C(i.mode))throw new f(54);if(!n&&(r=i?(i.mode&61440)===40960?32:C(i.mode)&&(He(e)!=="r"||e&512)?31:st(i,He(e)):44))throw new f(r);return e&512&&!n&&Ve(i,0),e&=-131713,i=Pe({node:i,path:mt(i),flags:e,seekable:!0,position:0,Ha:i.Ha,Fb:[],error:!1}),i.Ha.open&&i.Ha.open(i),!o.logReadFiles||e&1||(le||={},t in le||(le[t]=1)),i}function ue(t){if(t.fd===null)throw new f(8);t.hb&&(t.hb=null);try{t.Ha.close&&t.Ha.close(t)}catch(e){throw e}finally{pt[t.fd]=null}t.fd=null}function Ye(t,e,r){if(t.fd===null)throw new f(8);if(!t.seekable||!t.Ha.Ta)throw new f(70);if(r!=0&&r!=1&&r!=2)throw new f(28);t.position=t.Ha.Ta(t,e,r),t.Fb=[]}function ze(t,e,r,n,i){if(0>n||0>i)throw new f(28);if(t.fd===null)throw new f(8);if((t.flags&2097155)===1)throw new f(8);if(C(t.node.mode))throw new f(31);if(!t.Ha.read)throw new f(28);var a=typeof i<"u";if(!a)i=t.position;else if(!t.seekable)throw new f(70);return e=t.Ha.read(t,e,r,n,i),a||(t.position+=e),e}function $e(t,e,r,n,i){if(0>n||0>i)throw new f(28);if(t.fd===null)throw new f(8);if(!(t.flags&2097155))throw new f(8);if(C(t.node.mode))throw new f(31);if(!t.Ha.write)throw new f(28);t.seekable&&t.flags&1024&&Ye(t,0,2);var a=typeof i<"u";if(!a)i=t.position;else if(!t.seekable)throw new f(70);return e=t.Ha.write(t,e,r,n,i,void 0),a||(t.position+=e),e}function Qr(t){var e="binary";if(e!=="utf8"&&e!=="binary")throw Error(`Invalid encoding type "${e}"`);var r,n=at(t,n||0);t=Et(t).size;var i=new Uint8Array(t);return ze(n,i,0,t,0),e==="utf8"?r=Z(i,0):e==="binary"&&(r=i),ue(n),r}function Xe(){f||(f=function(t,e){this.name="ErrnoError",this.node=e,this.Eb=function(r){this.Ka=r},this.Eb(t),this.message="FS error"},f.prototype=Error(),f.prototype.constructor=f,[44].forEach(t=>{ie[t]=new f(t),ie[t].stack="<generic error, no stack>"}))}var tr;function _t(t,e,r){t=W("/dev/"+t);var n=Me(!!e,!!r);er||=64;var i=er++<<8|0;se(i,{open(a){a.seekable=!1},close(){r?.buffer?.length&&r(10)},read(a,u,m,g){for(var w=0,q=0;q<g;q++){try{var D=e()}catch{throw new f(29)}if(D===void 0&&w===0)throw new f(6);if(D==null)break;w++,u[m+q]=D}return w&&(a.node.timestamp=Date.now()),w},write(a,u,m,g){for(var w=0;w<g;w++)try{r(u[m+w])}catch{throw new f(29)}return g&&(a.node.timestamp=Date.now()),w}}),qt(t,n,i)}var er,O={},yt,le;function X(t,e,r){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":M(t).path,e.length==0){if(!r)throw new f(44);return t}return W(t+"/"+e)}function Dt(t,e,r){try{var n=t(e)}catch(a){if(a&&a.node&&W(e)!==W(mt(a.node)))return-54;throw a}_[r>>2]=n.dev,_[r+4>>2]=n.mode,S[r+8>>2]=n.nlink,_[r+12>>2]=n.uid,_[r+16>>2]=n.gid,_[r+20>>2]=n.rdev,R=[n.size>>>0,(p=n.size,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[r+24>>2]=R[0],_[r+28>>2]=R[1],_[r+32>>2]=4096,_[r+36>>2]=n.blocks,t=n.atime.getTime(),e=n.mtime.getTime();var i=n.ctime.getTime();return R=[Math.floor(t/1e3)>>>0,(p=Math.floor(t/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[r+40>>2]=R[0],_[r+44>>2]=R[1],S[r+48>>2]=t%1e3*1e3,R=[Math.floor(e/1e3)>>>0,(p=Math.floor(e/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[r+56>>2]=R[0],_[r+60>>2]=R[1],S[r+64>>2]=e%1e3*1e3,R=[Math.floor(i/1e3)>>>0,(p=Math.floor(i/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[r+72>>2]=R[0],_[r+76>>2]=R[1],S[r+80>>2]=i%1e3*1e3,R=[n.ino>>>0,(p=n.ino,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[r+88>>2]=R[0],_[r+92>>2]=R[1],0}var Ft=void 0;function Mt(){var t=_[+Ft>>2];return Ft+=4,t}var wt=(t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN,Wr=[0,31,60,91,121,152,182,213,244,274,305,335],jr=[0,31,59,90,120,151,181,212,243,273,304,334],rr=t=>{var e=it(t)+1,r=kt(e);return r&&ot(t,N,r,e),r},fe={},nr=()=>{if(!he){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:jt||"./this.program"},e;for(e in fe)fe[e]===void 0?delete t[e]:t[e]=fe[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);he=r}return he},he,ce=t=>{var e=it(t)+1,r=V(e);return ot(t,N,r,e),r},Jr=(t,e,r,n)=>{var i={string:w=>{var q=0;return w!=null&&w!==0&&(q=ce(w)),q},array:w=>{var q=V(w.length);return L.set(w,q),q}};t=o["_"+t];var a=[],u=0;if(n)for(var m=0;m<n.length;m++){var g=i[r[m]];g?(u===0&&(u=bt()),a[m]=g(n[m])):a[m]=n[m]}return r=t.apply(null,a),r=function(w){return u!==0&&Tt(u),e==="string"?w?Z(N,w):"":e==="boolean"?!!w:w}(r)},Ut=0,Gt=(t,e)=>(e=e==1?V(t.length):kt(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),N.set(t,e),e),tt,de=[],j,ut=t=>{tt.delete(j.get(t)),j.set(t,null),de.push(t)},Ct=(t,e)=>{if(!tt){tt=new WeakMap;var r=j.length;if(tt)for(var n=0;n<0+r;n++){var i=j.get(n);i&&tt.set(i,n)}}if(r=tt.get(t)||0)return r;if(de.length)r=de.pop();else{try{j.grow(1)}catch(m){throw m instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":m}r=j.length-1}try{j.set(r,t)}catch(m){if(!(m instanceof TypeError))throw m;if(typeof WebAssembly.Function=="function"){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var a={parameters:[],results:e[0]=="v"?[]:[i[e[0]]]},u=1;u<e.length;++u)a.parameters.push(i[e[u]]);e=new n(a,t)}else{for(n=[1],i=e.slice(0,1),e=e.slice(1),a={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96),u=e.length,128>u?n.push(u):n.push(u%128|128,u>>7),u=0;u<e.length;++u)n.push(a[e[u]]);i=="v"?n.push(0):n.push(1,a[i]),e=[0,97,115,109,1,0,0,0,1],i=n.length,128>i?e.push(i):e.push(i%128|128,i>>7),e.push.apply(e,n),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}j.set(r,e)}return tt.set(t,r),r};function ir(t,e,r,n){t||=this,this.parent=t,this.Ra=t.Ra,this.Va=null,this.id=xr++,this.name=e,this.mode=r,this.Ga={},this.Ha={},this.rdev=n}Object.defineProperties(ir.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(t){t?this.mode|=146:this.mode&=-147}}}),Xe(),J=Array(4096),Be(b,"/"),P("/tmp"),P("/home"),P("/home/web_user"),function(){P("/dev"),se(259,{read:()=>0,write:(n,i,a,u)=>u}),qt("/dev/null",259),De(1280,Hr),De(1536,Kr),qt("/dev/tty",1280),qt("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,r=()=>(e===0&&(e=Ze(t).byteLength),t[--e]);_t("random",r),_t("urandom",r),P("/dev/shm"),P("/dev/shm/tmp")}(),function(){P("/proc");var t=P("/proc/self");P("/proc/self/fd"),Be({Ra(){var e=ke(t,"fd",16895,73);return e.Ga={lookup(r,n){var i=M(+n);return r={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>i.path}},r.parent=r}},e}},"/proc/self/fd")}();var Vr={a:(t,e,r,n)=>{B(`Assertion failed: ${t?Z(N,t):""}, at: `+[e?e?Z(N,e):"":"unknown filename",r,n?n?Z(N,n):"":"unknown function"])},h:function(t,e){try{return t=t?Z(N,t):"",Lt(t,e),0}catch(r){if(typeof O>"u"||r.name!=="ErrnoError")throw r;return-r.Ka}},H:function(t,e,r){try{if(e=e?Z(N,e):"",e=X(t,e),r&-8)return-28;var n=U(e,{Sa:!0}).node;return n?(t="",r&4&&(t+="r"),r&2&&(t+="w"),r&1&&(t+="x"),t&&st(n,t)?-2:0):-44}catch(i){if(typeof O>"u"||i.name!=="ErrnoError")throw i;return-i.Ka}},i:function(t,e){try{var r=M(t);return Lt(r.node,e),0}catch(n){if(typeof O>"u"||n.name!=="ErrnoError")throw n;return-n.Ka}},g:function(t){try{var e=M(t).node,r=typeof e=="string"?U(e,{Sa:!0}).node:e;if(!r.Ga.Oa)throw new f(63);return r.Ga.Oa(r,{timestamp:Date.now()}),0}catch(n){if(typeof O>"u"||n.name!=="ErrnoError")throw n;return-n.Ka}},b:function(t,e,r){Ft=r;try{var n=M(t);switch(e){case 0:var i=Mt();if(0>i)return-28;for(;pt[i];)i++;return Pe(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=Mt(),n.flags|=i,0;case 5:return i=Mt(),ht[i+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return _[or()>>2]=28,-1;default:return-28}}catch(a){if(typeof O>"u"||a.name!=="ErrnoError")throw a;return-a.Ka}},f:function(t,e){try{var r=M(t);return Dt(Et,r.path,e)}catch(n){if(typeof O>"u"||n.name!=="ErrnoError")throw n;return-n.Ka}},n:function(t,e,r){e=wt(e,r);try{if(isNaN(e))return 61;var n=M(t);if(!(n.flags&2097155))throw new f(28);return Ve(n.node,e),0}catch(i){if(typeof O>"u"||i.name!=="ErrnoError")throw i;return-i.Ka}},C:function(t,e){try{if(e===0)return-28;var r=it("/")+1;return e<r?-68:(ot("/",N,t,e),r)}catch(n){if(typeof O>"u"||n.name!=="ErrnoError")throw n;return-n.Ka}},F:function(t,e){try{return t=t?Z(N,t):"",Dt(Je,t,e)}catch(r){if(typeof O>"u"||r.name!=="ErrnoError")throw r;return-r.Ka}},z:function(t,e,r){try{return e=e?Z(N,e):"",e=X(t,e),e=W(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),P(e,r),0}catch(n){if(typeof O>"u"||n.name!=="ErrnoError")throw n;return-n.Ka}},E:function(t,e,r,n){try{e=e?Z(N,e):"";var i=n&256;return e=X(t,e,n&4096),Dt(i?Je:Et,e,r)}catch(a){if(typeof O>"u"||a.name!=="ErrnoError")throw a;return-a.Ka}},y:function(t,e,r,n){Ft=n;try{e=e?Z(N,e):"",e=X(t,e);var i=n?Mt():0;return at(e,r,i).fd}catch(a){if(typeof O>"u"||a.name!=="ErrnoError")throw a;return-a.Ka}},w:function(t,e,r,n){try{if(e=e?Z(N,e):"",e=X(t,e),0>=n)return-28;var i=je(e),a=Math.min(n,it(i)),u=L[r+a];return ot(i,N,r,n+1),L[r+a]=u,a}catch(m){if(typeof O>"u"||m.name!=="ErrnoError")throw m;return-m.Ka}},v:function(t){try{return t=t?Z(N,t):"",Qe(t),0}catch(e){if(typeof O>"u"||e.name!=="ErrnoError")throw e;return-e.Ka}},G:function(t,e){try{return t=t?Z(N,t):"",Dt(Et,t,e)}catch(r){if(typeof O>"u"||r.name!=="ErrnoError")throw r;return-r.Ka}},r:function(t,e,r){try{return e=e?Z(N,e):"",e=X(t,e),r===0?We(e):r===512?Qe(e):B("Invalid flags passed to unlinkat"),0}catch(n){if(typeof O>"u"||n.name!=="ErrnoError")throw n;return-n.Ka}},q:function(t,e,r){try{if(e=e?Z(N,e):"",e=X(t,e,!0),r){var n=S[r>>2]+4294967296*_[r+4>>2],i=_[r+8>>2];a=1e3*n+i/1e6,r+=16,n=S[r>>2]+4294967296*_[r+4>>2],i=_[r+8>>2],u=1e3*n+i/1e6}else var a=Date.now(),u=a;t=a;var m=U(e,{Sa:!0}).node;return m.Ga.Oa(m,{timestamp:Math.max(t,u)}),0}catch(g){if(typeof O>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},l:function(t,e,r){t=new Date(1e3*wt(t,e)),_[r>>2]=t.getSeconds(),_[r+4>>2]=t.getMinutes(),_[r+8>>2]=t.getHours(),_[r+12>>2]=t.getDate(),_[r+16>>2]=t.getMonth(),_[r+20>>2]=t.getFullYear()-1900,_[r+24>>2]=t.getDay(),e=t.getFullYear(),_[r+28>>2]=(e%4!==0||e%100===0&&e%400!==0?jr:Wr)[t.getMonth()]+t.getDate()-1|0,_[r+36>>2]=-(60*t.getTimezoneOffset()),e=new Date(t.getFullYear(),6,1).getTimezoneOffset();var n=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[r+32>>2]=(e!=n&&t.getTimezoneOffset()==Math.min(n,e))|0},j:function(t,e,r,n,i,a,u,m){i=wt(i,a);try{if(isNaN(i))return 61;var g=M(n);if(e&2&&!(r&2)&&(g.flags&2097155)!==2)throw new f(2);if((g.flags&2097155)===1)throw new f(2);if(!g.Ha.bb)throw new f(43);var w=g.Ha.bb(g,t,i,e,r),q=w.Db;return _[u>>2]=w.ub,S[m>>2]=q,0}catch(D){if(typeof O>"u"||D.name!=="ErrnoError")throw D;return-D.Ka}},k:function(t,e,r,n,i,a,u){a=wt(a,u);try{if(isNaN(a))return 61;var m=M(i);if(r&2){if((m.node.mode&61440)!==32768)throw new f(43);if(!(n&2)){var g=N.slice(t,t+e);m.Ha.cb&&m.Ha.cb(m,g,a,e,n)}}}catch(w){if(typeof O>"u"||w.name!=="ErrnoError")throw w;return-w.Ka}},s:(t,e,r)=>{function n(g){return(g=g.toTimeString().match(/\(([A-Za-z ]+)\)$/))?g[1]:"GMT"}var i=new Date().getFullYear(),a=new Date(i,0,1),u=new Date(i,6,1);i=a.getTimezoneOffset();var m=u.getTimezoneOffset();S[t>>2]=60*Math.max(i,m),_[e>>2]=+(i!=m),t=n(a),e=n(u),t=rr(t),e=rr(e),m<i?(S[r>>2]=t,S[r+4>>2]=e):(S[r>>2]=e,S[r+4>>2]=t)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:t=>{var e=N.length;if(t>>>=0,2147483648<t)return!1;for(var r=1;4>=r;r*=2){var n=e*(1+.2/r);n=Math.min(n,t+100663296);var i=Math;n=Math.max(t,n);t:{i=(i.min.call(i,2147483648,n+(65536-n%65536)%65536)-At.buffer.byteLength+65535)/65536;try{At.grow(i),be();var a=1;break t}catch{}a=void 0}if(a)return!0}return!1},A:(t,e)=>{var r=0;return nr().forEach((n,i)=>{var a=e+r;for(i=S[t+4*i>>2]=a,a=0;a<n.length;++a)L[i++>>0]=n.charCodeAt(a);L[i>>0]=0,r+=n.length+1}),0},B:(t,e)=>{var r=nr();S[t>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),S[e>>2]=n,0},e:function(t){try{var e=M(t);return ue(e),0}catch(r){if(typeof O>"u"||r.name!=="ErrnoError")throw r;return r.Ka}},p:function(t,e){try{var r=M(t);return L[e>>0]=r.tty?2:C(r.mode)?3:(r.mode&61440)===40960?7:4,ht[e+2>>1]=0,R=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[e+8>>2]=R[0],_[e+12>>2]=R[1],R=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[e+16>>2]=R[0],_[e+20>>2]=R[1],0}catch(n){if(typeof O>"u"||n.name!=="ErrnoError")throw n;return n.Ka}},x:function(t,e,r,n){try{t:{var i=M(t);t=e;for(var a,u=e=0;u<r;u++){var m=S[t>>2],g=S[t+4>>2];t+=8;var w=ze(i,L,m,g,a);if(0>w){var q=-1;break t}if(e+=w,w<g)break;typeof a<"u"&&(a+=w)}q=e}return S[n>>2]=q,0}catch(D){if(typeof O>"u"||D.name!=="ErrnoError")throw D;return D.Ka}},m:function(t,e,r,n,i){e=wt(e,r);try{if(isNaN(e))return 61;var a=M(t);return Ye(a,e,n),R=[a.position>>>0,(p=a.position,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],_[i>>2]=R[0],_[i+4>>2]=R[1],a.hb&&e===0&&n===0&&(a.hb=null),0}catch(u){if(typeof O>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},D:function(t){try{var e=M(t);return e.Ha?.fsync?e.Ha.fsync(e):0}catch(r){if(typeof O>"u"||r.name!=="ErrnoError")throw r;return r.Ka}},u:function(t,e,r,n){try{t:{var i=M(t);t=e;for(var a,u=e=0;u<r;u++){var m=S[t>>2],g=S[t+4>>2];t+=8;var w=$e(i,L,m,g,a);if(0>w){var q=-1;break t}e+=w,typeof a<"u"&&(a+=w)}q=e}return S[n>>2]=q,0}catch(D){if(typeof O>"u"||D.name!=="ErrnoError")throw D;return D.Ka}}},c=function(){function t(r){return c=r.exports,At=c.I,be(),j=c.Aa,Ie.unshift(c.J),z--,o.monitorRunDependencies?.(z),z==0&&(Xt!==null&&(clearInterval(Xt),Xt=null),ct&&(r=ct,ct=null,r())),c}var e={a:Vr};if(z++,o.monitorRunDependencies?.(z),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(r){return Y(`Module.instantiateWasm callback failed with error: ${r}`),!1}return Ur(e,function(r){t(r.instance)}),{}}();o._sqlite3_free=t=>(o._sqlite3_free=c.K)(t),o._sqlite3_value_text=t=>(o._sqlite3_value_text=c.L)(t);var or=()=>(or=c.M)();o._sqlite3_prepare_v2=(t,e,r,n,i)=>(o._sqlite3_prepare_v2=c.N)(t,e,r,n,i),o._sqlite3_step=t=>(o._sqlite3_step=c.O)(t),o._sqlite3_reset=t=>(o._sqlite3_reset=c.P)(t),o._sqlite3_exec=(t,e,r,n,i)=>(o._sqlite3_exec=c.Q)(t,e,r,n,i),o._sqlite3_finalize=t=>(o._sqlite3_finalize=c.R)(t),o._sqlite3_column_name=(t,e)=>(o._sqlite3_column_name=c.S)(t,e),o._sqlite3_column_text=(t,e)=>(o._sqlite3_column_text=c.T)(t,e),o._sqlite3_column_type=(t,e)=>(o._sqlite3_column_type=c.U)(t,e),o._sqlite3_errmsg=t=>(o._sqlite3_errmsg=c.V)(t),o._sqlite3_clear_bindings=t=>(o._sqlite3_clear_bindings=c.W)(t),o._sqlite3_value_blob=t=>(o._sqlite3_value_blob=c.X)(t),o._sqlite3_value_bytes=t=>(o._sqlite3_value_bytes=c.Y)(t),o._sqlite3_value_double=t=>(o._sqlite3_value_double=c.Z)(t),o._sqlite3_value_int=t=>(o._sqlite3_value_int=c._)(t),o._sqlite3_value_type=t=>(o._sqlite3_value_type=c.$)(t),o._sqlite3_result_blob=(t,e,r,n)=>(o._sqlite3_result_blob=c.aa)(t,e,r,n),o._sqlite3_result_double=(t,e)=>(o._sqlite3_result_double=c.ba)(t,e),o._sqlite3_result_error=(t,e,r)=>(o._sqlite3_result_error=c.ca)(t,e,r),o._sqlite3_result_int=(t,e)=>(o._sqlite3_result_int=c.da)(t,e),o._sqlite3_result_int64=(t,e,r)=>(o._sqlite3_result_int64=c.ea)(t,e,r),o._sqlite3_result_null=t=>(o._sqlite3_result_null=c.fa)(t),o._sqlite3_result_text=(t,e,r,n)=>(o._sqlite3_result_text=c.ga)(t,e,r,n),o._sqlite3_aggregate_context=(t,e)=>(o._sqlite3_aggregate_context=c.ha)(t,e),o._sqlite3_column_count=t=>(o._sqlite3_column_count=c.ia)(t),o._sqlite3_data_count=t=>(o._sqlite3_data_count=c.ja)(t),o._sqlite3_column_blob=(t,e)=>(o._sqlite3_column_blob=c.ka)(t,e),o._sqlite3_column_bytes=(t,e)=>(o._sqlite3_column_bytes=c.la)(t,e),o._sqlite3_column_double=(t,e)=>(o._sqlite3_column_double=c.ma)(t,e),o._sqlite3_bind_blob=(t,e,r,n,i)=>(o._sqlite3_bind_blob=c.na)(t,e,r,n,i),o._sqlite3_bind_double=(t,e,r)=>(o._sqlite3_bind_double=c.oa)(t,e,r),o._sqlite3_bind_int=(t,e,r)=>(o._sqlite3_bind_int=c.pa)(t,e,r),o._sqlite3_bind_text=(t,e,r,n,i)=>(o._sqlite3_bind_text=c.qa)(t,e,r,n,i),o._sqlite3_bind_parameter_index=(t,e)=>(o._sqlite3_bind_parameter_index=c.ra)(t,e),o._sqlite3_sql=t=>(o._sqlite3_sql=c.sa)(t),o._sqlite3_normalized_sql=t=>(o._sqlite3_normalized_sql=c.ta)(t),o._sqlite3_changes=t=>(o._sqlite3_changes=c.ua)(t),o._sqlite3_close_v2=t=>(o._sqlite3_close_v2=c.va)(t),o._sqlite3_create_function_v2=(t,e,r,n,i,a,u,m,g)=>(o._sqlite3_create_function_v2=c.wa)(t,e,r,n,i,a,u,m,g),o._sqlite3_open=(t,e)=>(o._sqlite3_open=c.xa)(t,e);var kt=o._malloc=t=>(kt=o._malloc=c.ya)(t),Ht=o._free=t=>(Ht=o._free=c.za)(t);o._RegisterExtensionFunctions=t=>(o._RegisterExtensionFunctions=c.Ba)(t);var sr=(t,e)=>(sr=c.Ca)(t,e),bt=()=>(bt=c.Da)(),Tt=t=>(Tt=c.Ea)(t),V=t=>(V=c.Fa)(t);o.stackAlloc=V,o.stackSave=bt,o.stackRestore=Tt,o.cwrap=(t,e,r,n)=>{var i=!r||r.every(a=>a==="number"||a==="boolean");return e!=="string"&&i&&!n?o["_"+t]:function(){return Jr(t,e,r,arguments)}},o.addFunction=Ct,o.removeFunction=ut,o.UTF8ToString=ee,o.ALLOC_NORMAL=Ut,o.allocate=Gt,o.allocateUTF8OnStack=ce;var Kt;ct=function t(){Kt||ar(),Kt||(ct=t)};function ar(){function t(){if(!Kt&&(Kt=!0,o.calledRun=!0,!we)){if(o.noFSInit||tr||(tr=!0,Xe(),o.stdin=o.stdin,o.stdout=o.stdout,o.stderr=o.stderr,o.stdin?_t("stdin",o.stdin):ae("/dev/tty","/dev/stdin"),o.stdout?_t("stdout",null,o.stdout):ae("/dev/tty","/dev/stdout"),o.stderr?_t("stderr",null,o.stderr):ae("/dev/tty1","/dev/stderr"),at("/dev/stdin",0),at("/dev/stdout",1),at("/dev/stderr",1)),Ge=!1,te(Ie),o.onRuntimeInitialized&&o.onRuntimeInitialized(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var e=o.postRun.shift();ve.unshift(e)}te(ve)}}if(!(0<z)){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Fr();te(Te),0<z||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),t()},1)):t())}}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return ar(),v}),Bt)};typeof Wt=="object"&&typeof rt=="object"?(rt.exports=Qt,rt.exports.default=Qt):typeof define=="function"&&define.amd?define([],function(){return Qt}):typeof Wt=="object"&&(Wt.Module=Qt)});var Mn={};Zn(Mn,{default:()=>Fn});module.exports=qn(Mn);var Rr=require("@raycast/api"),me=require("fs"),Zr=require("os"),qr=_r(require("path")),Lr=_r(yr());var wr=`
SELECT
  notes.ZUNIQUEIDENTIFIER AS id,
  notes.ZTITLE AS title,
  notes.ZTEXT AS text,
  notes.ZMODIFICATIONDATE AS modified_at,
  notes.ZCREATIONDATE AS created_at,
  group_concat(tags.ZTITLE) AS tags,
  notes.ZENCRYPTED AS encrypted
FROM
  ZSFNOTE AS notes
LEFT OUTER JOIN
  Z_7TAGS AS notes_to_tags ON notes.Z_PK = notes_to_tags.Z_7NOTES
LEFT OUTER JOIN
  ZSFNOTETAG AS tags ON notes_to_tags.Z_14TAGS = tags.Z_PK
WHERE
  -- When there is a query, filter the body by that query, otherwise
  -- ignore the query
  (
    lower(notes.ZTITLE) LIKE lower('%' || :query || '%')
    OR lower(notes.ZTEXT) LIKE lower('%' || :query || '%')
    OR :query = ''
    OR lower(notes.ZUNIQUEIDENTIFIER) LIKE lower('%' || :query || '%')
  )
  -- Ignore trashed, archived, and empty notes
  AND notes.ZARCHIVED = 0
  AND notes.ZTRASHED = 0
  AND (
    notes.ZTEXT IS NOT NULL
    OR notes.ZENCRYPTED = 1
  )
GROUP BY
  notes.ZUNIQUEIDENTIFIER
HAVING
  (:tag IS NULL OR group_concat('#' || tags.ZTITLE || '#') LIKE '%#' || :tag || '#%')
ORDER BY
  -- Sort title matches ahead of body matches
  CASE WHEN (
    lower(notes.ZTITLE) like lower('%' || :query || '%')
    OR :query = ''
  ) THEN 0 ELSE 1 END,
  -- When there are multiple title matches, sort by last modified
  notes.ZMODIFICATIONDATE DESC
LIMIT
  20
`,br=`
SELECT
  notes.ZUNIQUEIDENTIFIER AS id,
  notes.ZTITLE AS title,
  notes.ZTEXT AS text,
  notes.ZMODIFICATIONDATE AS modified_at,
  notes.ZCREATIONDATE AS created_at,
  group_concat(tags.ZTITLE) AS tags,
  notes.ZENCRYPTED AS encrypted,
  notes.ZPINNED AS pinned
FROM
  ZSFNOTE AS notes
LEFT OUTER JOIN
  Z_5TAGS AS notes_to_tags ON notes.Z_PK = notes_to_tags.Z_5NOTES
LEFT OUTER JOIN
  ZSFNOTETAG AS tags ON notes_to_tags.Z_13TAGS = tags.Z_PK
WHERE
  -- When there is a query, filter the body by that query, otherwise
  -- ignore the query
  (
    lower(notes.ZTITLE) LIKE lower('%' || :query || '%')
    OR lower(notes.ZTEXT) LIKE lower('%' || :query || '%')
    OR :query = ''
    OR lower(notes.ZUNIQUEIDENTIFIER) LIKE lower('%' || :query || '%')
  )
  -- Ignore trashed, archived, and empty notes
  AND notes.ZARCHIVED = 0
  AND notes.ZTRASHED = 0
  AND (
    notes.ZTEXT IS NOT NULL
    OR notes.ZENCRYPTED = 1
  )
GROUP BY
  notes.ZUNIQUEIDENTIFIER
HAVING
  (:tag IS NULL OR group_concat('#' || tags.ZTITLE || '#') LIKE '%#' || :tag || '#%')
ORDER BY
  -- Sort title matches ahead of body matches
  CASE WHEN (
    lower(notes.ZTITLE) like lower('%' || :query || '%')
    OR :query = ''
  ) THEN 0 ELSE 1 END,
  -- When there are multiple title matches, sort by last modified
  notes.ZMODIFICATIONDATE DESC
LIMIT
  20
`,Tr=`
  SELECT DISTINCT
  note.ZUNIQUEIDENTIFIER AS id,
  note.ZTITLE AS title,
  note.ZTEXT AS text,
  note.ZMODIFICATIONDATE AS modified_at,
  group_concat(tag.ZTITLE) AS tags
FROM
	ZSFNOTE note
	LEFT OUTER JOIN Z_7TAGS nTag ON note.Z_PK = nTag.Z_7NOTES
	LEFT OUTER JOIN ZSFNOTETAG tag ON nTag.Z_14TAGS = tag.Z_PK
WHERE
	note.ZUNIQUEIDENTIFIER in(
		SELECT
			src.ZUNIQUEIDENTIFIER FROM ZSFNOTE src
			JOIN Z_7LINKEDNOTES lnk ON lnk.Z_7LINKEDBYNOTES = src.Z_PK
			JOIN ZSFNOTE trgt ON lnk.Z_7LINKEDNOTES = trgt.Z_PK
		WHERE
			trgt.ZUNIQUEIDENTIFIER LIKE :id )
GROUP BY
	note.ZUNIQUEIDENTIFIER
ORDER BY
	note.ZMODIFICATIONDATE DESC
LIMIT 400
`,Ir=`
SELECT DISTINCT
	note.ZUNIQUEIDENTIFIER AS id,
	note.ZTITLE AS title,
	note.ZTEXT AS text,
	note.ZMODIFICATIONDATE AS modified_at,
	group_concat(tag.ZTITLE) AS tags
FROM
	ZSFNOTE note
	LEFT OUTER JOIN Z_5TAGS nTag ON note.Z_PK = nTag.Z_5NOTES
	LEFT OUTER JOIN ZSFNOTETAG tag ON nTag.Z_13TAGS = tag.Z_PK
WHERE
	note.ZUNIQUEIDENTIFIER in(
		SELECT
			origin.ZUNIQUEIDENTIFIER FROM ZSFNOTE origin
			JOIN ZSFNOTEBACKLINK link ON origin.Z_PK = link.ZLINKEDBY
			JOIN ZSFNOTE target ON target.Z_PK = link.ZLINKINGTO
		WHERE
			target.ZUNIQUEIDENTIFIER LIKE :id)
GROUP BY
	note.ZUNIQUEIDENTIFIER
ORDER BY
	note.ZMODIFICATIONDATE DESC
LIMIT 400
`,vr=`
SELECT DISTINCT
  note.ZUNIQUEIDENTIFIER AS id,
  note.ZTITLE AS title,
  note.ZTEXT AS text,
  note.ZMODIFICATIONDATE AS modified_at,
  group_concat(tag.ZTITLE) AS tags
FROM
	ZSFNOTE note
	LEFT OUTER JOIN Z_7TAGS nTag ON note.Z_PK = nTag.Z_7NOTES
	LEFT OUTER JOIN ZSFNOTETAG tag ON nTag.Z_14TAGS = tag.Z_PK
WHERE
	note.ZUNIQUEIDENTIFIER in(
		SELECT
			trgt.ZUNIQUEIDENTIFIER FROM ZSFNOTE src
			JOIN Z_7LINKEDNOTES lnk ON lnk.Z_7LINKEDBYNOTES = src.Z_PK
			JOIN ZSFNOTE trgt ON lnk.Z_7LINKEDNOTES = trgt.Z_PK
		WHERE
			src.ZUNIQUEIDENTIFIER LIKE :id )
GROUP BY
	note.ZUNIQUEIDENTIFIER
ORDER BY
	note.ZMODIFICATIONDATE DESC
LIMIT 400
`,gr=`
SELECT DISTINCT
	note.ZUNIQUEIDENTIFIER AS id,
	note.ZTITLE AS title,
	note.ZTEXT AS text,
	note.ZMODIFICATIONDATE AS modified_at,
	group_concat(tag.ZTITLE) AS tags
FROM
	ZSFNOTE note
	LEFT OUTER JOIN Z_5TAGS nTag ON note.Z_PK = nTag.Z_5NOTES
	LEFT OUTER JOIN ZSFNOTETAG tag ON nTag.Z_13TAGS = tag.Z_PK
WHERE
	note.ZUNIQUEIDENTIFIER in( SELECT DISTINCT
			target.ZUNIQUEIDENTIFIER FROM ZSFNOTE origin
			JOIN ZSFNOTEBACKLINK link ON origin.Z_PK = link.ZLINKEDBY
			JOIN ZSFNOTE target ON target.Z_PK = link.ZLINKINGTO
		WHERE
			origin.ZUNIQUEIDENTIFIER LIKE :id)
GROUP BY
	note.ZUNIQUEIDENTIFIER
ORDER BY
	note.ZMODIFICATIONDATE DESC
LIMIT 400
`,Nr="SELECT name FROM sqlite_master WHERE type='table' AND name=:name",Ar=`
SELECT DISTINCT 
  tags.ZTITLE AS tags 
FROM
  ZSFNOTE AS notes
  LEFT OUTER JOIN Z_7TAGS AS notes_to_tags ON notes.Z_PK = notes_to_tags.Z_7NOTES
  LEFT OUTER JOIN ZSFNOTETAG AS tags ON notes_to_tags.Z_14TAGS = tags.Z_PK 
-- Ignore tags for trashed and archived notes
WHERE notes.ZARCHIVED = 0 AND notes.ZTRASHED = 0
ORDER BY tags.ZTITLE ASC
`,Or=`
SELECT DISTINCT 
  tags.ZTITLE AS tags 
FROM
  ZSFNOTE AS notes
  LEFT OUTER JOIN Z_5TAGS AS notes_to_tags ON notes.Z_PK = notes_to_tags.Z_5NOTES
  LEFT OUTER JOIN ZSFNOTETAG AS tags ON notes_to_tags.Z_13TAGS = tags.Z_PK 
-- Ignore tags for trashed and archived notes
WHERE notes.ZARCHIVED = 0 AND notes.ZTRASHED = 0
ORDER BY tags.ZTITLE ASC
`;var Ln=(0,Zr.homedir)()+"/Library/Group Containers/9K33E3U3T4.net.shinyfrog.bear/Application Data/database.sqlite",Sr=978307200;async function Dr(){let I=(0,me.readFileSync)(qr.default.join(Rr.environment.assetsPath,"sql-wasm.wasm")),d=await(0,Lr.default)({wasmBinary:I}),y=(0,me.readFileSync)(Ln);return new Ee(new d.Database(y))}function Dn(I){if(I.length===0)return"Not Tagged";let d=[];for(let y of I)I.filter(v=>v.includes(y)).length<2&&d.push(y.includes(" ")?`#${y}#`:`#${y}`);return d.join(" ")}var Ee=class I{database;static searchNotesQueries={v1:wr,v2:br};static getNoteLinksQueries={v1:vr,v2:gr};static getNoteBacklinksQueries={v1:Tr,v2:Ir};static getTags={v1:Ar,v2:Or};constructor(d){this.database=d}close(){this.database.close()}toNote(d){let y=d.tags?.split(",")??[],v=d.text??"";return{id:d.id,title:d.title,text:v,modifiedAt:new Date((d.modified_at+Sr)*1e3),createdAt:new Date((d.created_at+Sr)*1e3),tags:y,formattedTags:Dn(y),encrypted:d.encrypted===1,pinned:d.pinned===1,wordCount:[...v.matchAll(/\b\w+\b/g)].length}}tableExists(d){let y=this.database.prepare(Nr);y.bind({":name":d});let v=y.step();return y.free(),v}getBearVersion(){return this.tableExists("Z_5TAGS")?2:1}getNotes(d,y){let v=this.database.prepare(this.getBearVersion()===2?I.searchNotesQueries.v2:I.searchNotesQueries.v1);y?v.bind({":query":`${d}`,":tag":`${y}`}):v.bind({":query":`${d}`});let F=[];for(;v.step();){let o=v.getAsObject();F.push(this.toNote(o))}return v.free(),F.sort((o,It)=>o.pinned===It.pinned?0:o.pinned?-1:1),F}getTags(){let d=this.database.prepare(this.getBearVersion()===2?I.getTags.v2:I.getTags.v1),y=[];for(;d.step();){let v=d.getAsObject();v.tags!==null&&y.push(v.tags)}return d.free(),y}getBacklinks(d){let y=this.database.prepare(this.getBearVersion()===2?I.getNoteBacklinksQueries.v2:I.getNoteBacklinksQueries.v1);y.bind({":id":d});let v=[];for(;y.step();){let F=y.getAsObject();v.push(this.toNote(F))}return y.free(),v}getNoteLinks(d){let y=this.database.prepare(this.getBearVersion()===2?I.getNoteLinksQueries.v2:I.getNoteLinksQueries.v1);y.bind({":id":d});let v=[];for(;y.step();){let F=y.getAsObject();v.push(this.toNote(F))}return y.free(),v}};async function Fn(I){return(await Dr()).getNotes(I.text||"",I.tag)}
