"use strict";var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var f=(e,r)=>{for(var t in r)s(e,t,{get:r[t],enumerable:!0})},g=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of d(r))!l.call(e,i)&&i!==t&&s(e,i,{get:()=>r[i],enumerable:!(n=u(r,i))||n.enumerable});return e};var m=e=>g(s({},"__esModule",{value:!0}),e);var w={};f(w,{default:()=>p});module.exports=m(w);var o=require("@raycast/api");var x={0:"Completed",1:"Frozen",2:"In Transit",3:"Ready for Pickup",4:"Out for Delivery",5:"Not Found",6:"Failed Delivery Attempt",7:"Exception",8:"Info Received"};function a(e){return x[e]||"Unknown Status"}function _(){let e=(0,o.getPreferenceValues)();if(!e.apiKey)throw new Error("API key not found. Please add your Parcel API key in extension preferences.");return e.apiKey}function v(e){return`https://api.parcel.app/external/deliveries/?filter_mode=${e}`}function y(){return{"api-key":_()}}async function c(e){let r=v(e),t=await fetch(r,{headers:y()});if(!t.ok)throw new Error(`API request failed with status ${t.status} (${await t.text()})`);let n=await t.json(),i=P(n);if(i)throw i;return n.deliveries}function P(e){return e.success?null:new Error(e?.error_message||"Unknown API error")}async function p(e){try{let r=e?.filter||"active";return(await c(r)).map(n=>({...n,formatted_date_expected:n.date_expected?new Date(n.date_expected).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"Not available",status_description:a(n.status_code)}))}catch(r){throw new Error(`Failed to fetch deliveries: ${r.message}`)}}
