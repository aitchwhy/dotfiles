"use strict";var f=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var C=(t,e)=>{for(var a in e)f(t,a,{get:e[a],enumerable:!0})},J=(t,e,a,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of U(e))!k.call(t,r)&&r!==a&&f(t,r,{get:()=>e[r],enumerable:!(i=F(e,r))||i.enumerable});return t};var j=t=>J(f({},"__esModule",{value:!0}),t);var N={};C(N,{default:()=>P});module.exports=j(N);var n=require("@raycast/api");var y=require("@raycast/api"),S=require("path"),w=require("fs/promises"),x=require("child_process");async function E(t,...e){let a=(0,S.join)(y.environment.assetsPath,"compiled_raycast_swift/swift");return await(0,w.chmod)(a,"755"),new Promise((i,r)=>{let l=[t];for(let s of e)try{l.push(JSON.stringify(s,(o,c)=>c===void 0?null:c))}catch(o){r(new d("Failed to serialize input to JSON: "+o.message));return}let u=(0,x.spawn)(a,l),g=[],m=[];u.stdout?.on("data",s=>{g.push(s.toString())}),u.stderr?.on("data",s=>{m.push(s.toString())}),u.on("exit",s=>{if(s===0)try{let o=g.join("").trim();o.length!=0?i(JSON.parse(o)):i(null)}catch(o){let c=new d("Failed to deserialize result from JSON: "+o.message);c.stdout=g.join("").trim(),c.stderr=m.join("").trim(),r(c)}else{let o=new d(m.join("").trim()||g.join("").trim()||"Could not get any data");o.stdout=g.join("").trim(),o.stderr=m.join("").trim(),r(o)}}),u.on("error",s=>{r(s)})})}async function L(t,e,a,i,r,l,u){return await E("recognizeText",t,e,a,i,r,l,u)}var d=class extends Error{constructor(e){super(e),this.name="SwiftError"}};var p=require("@raycast/api");var v=[{title:"\u{1F1FA}\u{1F1F8} English (US)",value:"en-US"},{title:"\u{1F1EB}\u{1F1F7} French (France)",value:"fr-FR"},{title:"\u{1F1EE}\u{1F1F9} Italian (Italy)",value:"it-IT"},{title:"\u{1F1E9}\u{1F1EA} German (Germany)",value:"de-DE"},{title:"\u{1F1EA}\u{1F1F8} Spanish (Spain)",value:"es-ES"},{title:"\u{1F1E7}\u{1F1F7} Portuguese (Brazil)",value:"pt-BR"},{title:"\u{1F1E8}\u{1F1F3} Chinese (Simplified)",value:"zh-Hans"},{title:"\u{1F1F9}\u{1F1FC} Chinese (Traditional)",value:"zh-Hant"},{title:"\u{1F1E8}\u{1F1F3} Cantonese (Simplified)",value:"yue-Hans"},{title:"\u{1F1ED}\u{1F1F0} Cantonese (Traditional)",value:"yue-Hant"},{title:"\u{1F1F0}\u{1F1F7} Korean (South Korea)",value:"ko-KR"},{title:"\u{1F1EF}\u{1F1F5} Japanese (Japan)",value:"ja-JP"},{title:"\u{1F1F7}\u{1F1FA} Russian (Russia)",value:"ru-RU"},{title:"\u{1F1FA}\u{1F1E6} Ukrainian (Ukraine)",value:"uk-UA"},{title:"\u{1F1F9}\u{1F1ED} Thai (Thailand)",value:"th-TH"},{title:"\u{1F1FB}\u{1F1F3} Vietnamese (Vietnam)",value:"vi-VT"}];var h=()=>(0,p.getPreferenceValues)(),T=async()=>{let t=h(),e=await p.LocalStorage.getItem("SelectedLanguages"),a={title:v.find(l=>l.value===t.primaryLanguage)?.title??"\u{1F1FA}\u{1F1F8} English (US)",value:t.primaryLanguage,isDefault:!0},i=[];return typeof e<"u"?(i=JSON.parse(e),i):[a]};var z=async(t=!1)=>{let e=h();try{let a=await T();return await L(t,e.keepImage,e.ocrMode==="fast",e.languageCorrection,e.ignoreLineBreaks,e.customWordsList?e.customWordsList.split(","):[],a.map(r=>r.value))}catch(a){throw console.error(a),new Error("Failed to recognize text")}};async function P(){await(0,n.closeMainWindow)();try{let t=await z();if(!t)return await(0,n.showToast)({style:n.Toast.Style.Failure,title:"No text detected"});await n.Clipboard.copy(t),await(0,n.showToast)({style:n.Toast.Style.Success,title:"Copied text to clipboard"})}catch(t){console.error(t),await(0,n.showToast)({style:n.Toast.Style.Failure,title:"Failed detecting text"})}}
