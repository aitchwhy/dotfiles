"use strict";var d=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var P=(o,n)=>{for(var r in n)d(o,r,{get:n[r],enumerable:!0})},T=(o,n,r,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of R(n))!w.call(o,a)&&a!==r&&d(o,a,{get:()=>n[a],enumerable:!(i=L(n,a))||i.enumerable});return o};var A=o=>T(d({},"__esModule",{value:!0}),o);var U={};P(U,{default:()=>f});module.exports=A(U);var c=require("react"),e=require("@raycast/api");function m(o){return"https://www.google.com/maps/search/?api=1"+"&query="+encodeURI(o)}var t=require("react/jsx-runtime");function k({initialSearchText:o}){let{saveSearchHistory:n}=(0,e.getPreferenceValues)(),[r,i]=(0,c.useState)(o||""),[a,h]=(0,c.useState)([]),[S,y]=(0,c.useState)(!0),g=(0,c.useCallback)(async()=>{let s=await e.LocalStorage.getItem("recent-searches");h(s?JSON.parse(s):[]),y(!1)},[]);(0,c.useEffect)(()=>{g()},[g]),(0,c.useEffect)(()=>{if(r.length>3&&!a.includes(r.trim())&&n){let s=setTimeout(async()=>{let l=[r,...a.filter(p=>p!==r)].slice(0,10);await e.LocalStorage.setItem("recent-searches",JSON.stringify(l)),h(l)},3e3);return()=>clearTimeout(s)}},[r,a,n]);let C=(0,c.useCallback)(async s=>{let l=a.filter(p=>p!==s);await e.LocalStorage.setItem("recent-searches",JSON.stringify(l)),h(l)},[a]),I=(0,c.useCallback)(async()=>{await e.LocalStorage.removeItem("recent-searches"),h([])},[]),u={searchBarPlaceholder:"Search Google Maps...",searchText:r,onSearchTextChange:i,isLoading:S};return r?(0,t.jsx)(e.List,{...u,children:(0,t.jsx)(e.List.Item,{title:r,icon:e.Icon.MagnifyingGlass,actions:(0,t.jsxs)(e.ActionPanel,{children:[(0,t.jsx)(e.Action.OpenInBrowser,{url:m(r)}),(0,t.jsx)(e.Action.CopyToClipboard,{title:"Copy URL",content:m(r),shortcut:{modifiers:["cmd"],key:"n"}})]})})}):(0,t.jsxs)(e.List,{...u,children:[(0,t.jsx)(e.List.EmptyView,{title:"Search Google Maps"}),a.map(s=>(0,t.jsx)(e.List.Item,{title:s,icon:e.Icon.Clock,actions:(0,t.jsxs)(e.ActionPanel,{children:[(0,t.jsx)(e.Action.OpenInBrowser,{url:m(s)}),(0,t.jsx)(e.Action,{icon:e.Icon.MagnifyingGlass,title:"Search Again",onAction:()=>i(s)}),(0,t.jsx)(e.Action.CopyToClipboard,{title:"Copy URL",content:m(s),shortcut:{modifiers:["cmd"],key:"c"}}),(0,t.jsx)(e.Action,{icon:e.Icon.Trash,title:"Remove Search",onAction:()=>C(s)}),(0,t.jsx)(e.Action,{icon:e.Icon.Trash,title:"Clear All Searches",shortcut:{modifiers:["cmd"],key:"d"},onAction:I})]})},s))]})}function f({launchContext:o,fallbackText:n}){return(0,t.jsx)(k,{initialSearchText:o?.query??n})}
